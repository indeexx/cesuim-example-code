(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors~14e06226"],{"055f":function(e,t,r){"use strict";var i=r("6af0"),n=r("ae9b"),a=r("4051"),s=r("c937"),o=r("21b7"),u=r("e2a6"),c=r("82ba"),h=r("a4da"),f=r("a3c8"),_=r("d5cf"),l=r("b18b"),d=r("5027"),m=r("8f7d");function p(e){this._context=e}let b;const T=new _["a"]({primitiveType:c["a"].TRIANGLES}),g=new f["a"]({color:new a["a"](0,0,0,0)});function x(e,t){return new l["a"]({context:e,colorTextures:[t],destroyAttachments:!1})}function E(e,t){return m["a"].fromCache({context:e,vertexShaderSource:h["a"],fragmentShaderSource:t,attributeLocations:{position:0,textureCoordinates:1}})}function A(e,t){return Object(s["a"])(b)&&b.viewport.width===e&&b.viewport.height===t||(b=d["a"].fromCache({viewport:new i["a"](0,0,e,t)})),b}p.prototype.execute=function(e){if(n["a"].defined("computeCommand",e),Object(s["a"])(e.preExecute)&&e.preExecute(e),!Object(s["a"])(e.fragmentShaderSource)&&!Object(s["a"])(e.shaderProgram))throw new u["a"]("computeCommand.fragmentShaderSource or computeCommand.shaderProgram is required.");n["a"].defined("computeCommand.outputTexture",e.outputTexture);const t=e.outputTexture,r=t.width,i=t.height,a=this._context,o=Object(s["a"])(e.vertexArray)?e.vertexArray:a.getViewportQuadVertexArray(),c=Object(s["a"])(e.shaderProgram)?e.shaderProgram:E(a,e.fragmentShaderSource),h=x(a,t),f=A(r,i),_=e.uniformMap,l=g;l.framebuffer=h,l.renderState=f,l.execute(a);const d=T;d.vertexArray=o,d.renderState=f,d.shaderProgram=c,d.uniformMap=_,d.framebuffer=h,d.execute(a),h.destroy(),e.persists||(c.destroy(),Object(s["a"])(e.vertexArray)&&o.destroy()),Object(s["a"])(e.postExecute)&&e.postExecute(t)},p.prototype.isDestroyed=function(){return!1},p.prototype.destroy=function(){return Object(o["a"])(this)},t["a"]=p},2341:function(e,t,r){"use strict";const i={_maximumCombinedTextureImageUnits:0,_maximumCubeMapSize:0,_maximumFragmentUniformVectors:0,_maximumTextureImageUnits:0,_maximumRenderbufferSize:0,_maximumTextureSize:0,_maximumVaryingVectors:0,_maximumVertexAttributes:0,_maximumVertexTextureImageUnits:0,_maximumVertexUniformVectors:0,_minimumAliasedLineWidth:0,_maximumAliasedLineWidth:0,_minimumAliasedPointSize:0,_maximumAliasedPointSize:0,_maximumViewportWidth:0,_maximumViewportHeight:0,_maximumTextureFilterAnisotropy:0,_maximumDrawBuffers:0,_maximumColorAttachments:0,_maximumSamples:0,_highpFloatSupported:!1,_highpIntSupported:!1};Object.defineProperties(i,{maximumCombinedTextureImageUnits:{get:function(){return i._maximumCombinedTextureImageUnits}},maximumCubeMapSize:{get:function(){return i._maximumCubeMapSize}},maximumFragmentUniformVectors:{get:function(){return i._maximumFragmentUniformVectors}},maximumTextureImageUnits:{get:function(){return i._maximumTextureImageUnits}},maximumRenderbufferSize:{get:function(){return i._maximumRenderbufferSize}},maximumTextureSize:{get:function(){return i._maximumTextureSize}},maximumVaryingVectors:{get:function(){return i._maximumVaryingVectors}},maximumVertexAttributes:{get:function(){return i._maximumVertexAttributes}},maximumVertexTextureImageUnits:{get:function(){return i._maximumVertexTextureImageUnits}},maximumVertexUniformVectors:{get:function(){return i._maximumVertexUniformVectors}},minimumAliasedLineWidth:{get:function(){return i._minimumAliasedLineWidth}},maximumAliasedLineWidth:{get:function(){return i._maximumAliasedLineWidth}},minimumAliasedPointSize:{get:function(){return i._minimumAliasedPointSize}},maximumAliasedPointSize:{get:function(){return i._maximumAliasedPointSize}},maximumViewportWidth:{get:function(){return i._maximumViewportWidth}},maximumViewportHeight:{get:function(){return i._maximumViewportHeight}},maximumTextureFilterAnisotropy:{get:function(){return i._maximumTextureFilterAnisotropy}},maximumDrawBuffers:{get:function(){return i._maximumDrawBuffers}},maximumColorAttachments:{get:function(){return i._maximumColorAttachments}},maximumSamples:{get:function(){return i._maximumSamples}},highpFloatSupported:{get:function(){return i._highpFloatSupported}},highpIntSupported:{get:function(){return i._highpIntSupported}}}),t["a"]=i},3366:function(e,t,r){"use strict";var i=r("dde0"),n=r("722e"),a=r("cedf");const s=new i["a"];function o(e){this._size=e.size,this._datatype=e.datatype,this.getValue=e.getValue}const u={};u[a["a"].FLOAT]="float",u[a["a"].FLOAT_VEC2]="vec2",u[a["a"].FLOAT_VEC3]="vec3",u[a["a"].FLOAT_VEC4]="vec4",u[a["a"].INT]="int",u[a["a"].INT_VEC2]="ivec2",u[a["a"].INT_VEC3]="ivec3",u[a["a"].INT_VEC4]="ivec4",u[a["a"].BOOL]="bool",u[a["a"].BOOL_VEC2]="bvec2",u[a["a"].BOOL_VEC3]="bvec3",u[a["a"].BOOL_VEC4]="bvec4",u[a["a"].FLOAT_MAT2]="mat2",u[a["a"].FLOAT_MAT3]="mat3",u[a["a"].FLOAT_MAT4]="mat4",u[a["a"].SAMPLER_2D]="sampler2D",u[a["a"].SAMPLER_CUBE]="samplerCube",o.prototype.getDeclaration=function(e){let t=`uniform ${u[this._datatype]} ${e}`;const r=this._size;return t+=1===r?";":`[${r.toString()}];`,t};const c={czm_viewport:new o({size:1,datatype:a["a"].FLOAT_VEC4,getValue:function(e){return e.viewportCartesian4}}),czm_viewportOrthographic:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.viewportOrthographic}}),czm_viewportTransformation:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.viewportTransformation}}),czm_globeDepthTexture:new o({size:1,datatype:a["a"].SAMPLER_2D,getValue:function(e){return e.globeDepthTexture}}),czm_model:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.model}}),czm_inverseModel:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.inverseModel}}),czm_view:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.view}}),czm_view3D:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.view3D}}),czm_viewRotation:new o({size:1,datatype:a["a"].FLOAT_MAT3,getValue:function(e){return e.viewRotation}}),czm_viewRotation3D:new o({size:1,datatype:a["a"].FLOAT_MAT3,getValue:function(e){return e.viewRotation3D}}),czm_inverseView:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.inverseView}}),czm_inverseView3D:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.inverseView3D}}),czm_inverseViewRotation:new o({size:1,datatype:a["a"].FLOAT_MAT3,getValue:function(e){return e.inverseViewRotation}}),czm_inverseViewRotation3D:new o({size:1,datatype:a["a"].FLOAT_MAT3,getValue:function(e){return e.inverseViewRotation3D}}),czm_projection:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.projection}}),czm_inverseProjection:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.inverseProjection}}),czm_infiniteProjection:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.infiniteProjection}}),czm_modelView:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.modelView}}),czm_modelView3D:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.modelView3D}}),czm_modelViewRelativeToEye:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.modelViewRelativeToEye}}),czm_inverseModelView:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.inverseModelView}}),czm_inverseModelView3D:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.inverseModelView3D}}),czm_viewProjection:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.viewProjection}}),czm_inverseViewProjection:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.inverseViewProjection}}),czm_modelViewProjection:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.modelViewProjection}}),czm_inverseModelViewProjection:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.inverseModelViewProjection}}),czm_modelViewProjectionRelativeToEye:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.modelViewProjectionRelativeToEye}}),czm_modelViewInfiniteProjection:new o({size:1,datatype:a["a"].FLOAT_MAT4,getValue:function(e){return e.modelViewInfiniteProjection}}),czm_orthographicIn3D:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.orthographicIn3D?1:0}}),czm_normal:new o({size:1,datatype:a["a"].FLOAT_MAT3,getValue:function(e){return e.normal}}),czm_normal3D:new o({size:1,datatype:a["a"].FLOAT_MAT3,getValue:function(e){return e.normal3D}}),czm_inverseNormal:new o({size:1,datatype:a["a"].FLOAT_MAT3,getValue:function(e){return e.inverseNormal}}),czm_inverseNormal3D:new o({size:1,datatype:a["a"].FLOAT_MAT3,getValue:function(e){return e.inverseNormal3D}}),czm_eyeHeight:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.eyeHeight}}),czm_eyeHeight2D:new o({size:1,datatype:a["a"].FLOAT_VEC2,getValue:function(e){return e.eyeHeight2D}}),czm_entireFrustum:new o({size:1,datatype:a["a"].FLOAT_VEC2,getValue:function(e){return e.entireFrustum}}),czm_currentFrustum:new o({size:1,datatype:a["a"].FLOAT_VEC2,getValue:function(e){return e.currentFrustum}}),czm_frustumPlanes:new o({size:1,datatype:a["a"].FLOAT_VEC4,getValue:function(e){return e.frustumPlanes}}),czm_farDepthFromNearPlusOne:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.farDepthFromNearPlusOne}}),czm_log2FarDepthFromNearPlusOne:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.log2FarDepthFromNearPlusOne}}),czm_oneOverLog2FarDepthFromNearPlusOne:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.oneOverLog2FarDepthFromNearPlusOne}}),czm_sunPositionWC:new o({size:1,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return e.sunPositionWC}}),czm_sunPositionColumbusView:new o({size:1,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return e.sunPositionColumbusView}}),czm_sunDirectionEC:new o({size:1,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return e.sunDirectionEC}}),czm_sunDirectionWC:new o({size:1,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return e.sunDirectionWC}}),czm_moonDirectionEC:new o({size:1,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return e.moonDirectionEC}}),czm_lightDirectionEC:new o({size:1,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return e.lightDirectionEC}}),czm_lightDirectionWC:new o({size:1,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return e.lightDirectionWC}}),czm_lightColor:new o({size:1,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return e.lightColor}}),czm_lightColorHdr:new o({size:1,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return e.lightColorHdr}}),czm_encodedCameraPositionMCHigh:new o({size:1,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return e.encodedCameraPositionMCHigh}}),czm_encodedCameraPositionMCLow:new o({size:1,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return e.encodedCameraPositionMCLow}}),czm_viewerPositionWC:new o({size:1,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return n["a"].getTranslation(e.inverseView,s)}}),czm_frameNumber:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.frameState.frameNumber}}),czm_morphTime:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.frameState.morphTime}}),czm_sceneMode:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.frameState.mode}}),czm_pass:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.pass}}),czm_backgroundColor:new o({size:1,datatype:a["a"].FLOAT_VEC4,getValue:function(e){return e.backgroundColor}}),czm_brdfLut:new o({size:1,datatype:a["a"].SAMPLER_2D,getValue:function(e){return e.brdfLut}}),czm_environmentMap:new o({size:1,datatype:a["a"].SAMPLER_CUBE,getValue:function(e){return e.environmentMap}}),czm_specularEnvironmentMaps:new o({size:1,datatype:a["a"].SAMPLER_2D,getValue:function(e){return e.specularEnvironmentMaps}}),czm_specularEnvironmentMapSize:new o({size:1,datatype:a["a"].FLOAT_VEC2,getValue:function(e){return e.specularEnvironmentMapsDimensions}}),czm_specularEnvironmentMapsMaximumLOD:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.specularEnvironmentMapsMaximumLOD}}),czm_sphericalHarmonicCoefficients:new o({size:9,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return e.sphericalHarmonicCoefficients}}),czm_temeToPseudoFixed:new o({size:1,datatype:a["a"].FLOAT_MAT3,getValue:function(e){return e.temeToPseudoFixedMatrix}}),czm_pixelRatio:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.pixelRatio}}),czm_fogDensity:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.fogDensity}}),czm_splitPosition:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.splitPosition}}),czm_imagerySplitPosition:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.imagerySplitPosition}}),czm_geometricToleranceOverMeter:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.geometricToleranceOverMeter}}),czm_minimumDisableDepthTestDistance:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.minimumDisableDepthTestDistance}}),czm_invertClassificationColor:new o({size:1,datatype:a["a"].FLOAT_VEC4,getValue:function(e){return e.invertClassificationColor}}),czm_gamma:new o({size:1,datatype:a["a"].FLOAT,getValue:function(e){return e.gamma}}),czm_ellipsoidRadii:new o({size:1,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return e.ellipsoid.radii}}),czm_ellipsoidInverseRadii:new o({size:1,datatype:a["a"].FLOAT_VEC3,getValue:function(e){return e.ellipsoid.oneOverRadii}})};t["a"]=c},"66fd":function(e,t,r){"use strict";var i=r("b18b"),n=r("45f0"),a=r("1494"),s=r("932f"),o=r("acf9"),u=r("4d68"),c=r("1a75"),h=r("1a5d"),f=r("c937"),_=r("e2a6"),l=r("0238");function d(e){if(e=Object(h["a"])(e,h["a"].EMPTY_OBJECT),this._numSamples=Object(h["a"])(e.numSamples,1),this._colorAttachmentsLength=Object(h["a"])(e.colorAttachmentsLength,1),this._color=Object(h["a"])(e.color,!0),this._depth=Object(h["a"])(e.depth,!1),this._depthStencil=Object(h["a"])(e.depthStencil,!1),this._supportsDepthTexture=Object(h["a"])(e.supportsDepthTexture,!1),!this._color&&!this._depth&&!this._depthStencil)throw new _["a"]("Must enable at least one type of framebuffer attachment.");if(this._depth&&this._depthStencil)throw new _["a"]("Cannot have both a depth and depth-stencil attachment.");this._createColorAttachments=Object(h["a"])(e.createColorAttachments,!0),this._createDepthAttachments=Object(h["a"])(e.createDepthAttachments,!0),this._pixelDatatype=e.pixelDatatype,this._pixelFormat=e.pixelFormat,this._width=void 0,this._height=void 0,this._framebuffer=void 0,this._multisampleFramebuffer=void 0,this._colorTextures=void 0,this._color&&(this._colorTextures=new Array(this._colorAttachmentsLength),this._colorRenderbuffers=new Array(this._colorAttachmentsLength)),this._colorRenderbuffer=void 0,this._depthStencilRenderbuffer=void 0,this._depthStencilTexture=void 0,this._depthRenderbuffer=void 0,this._depthTexture=void 0,this._attachmentsDirty=!1}Object.defineProperties(d.prototype,{framebuffer:{get:function(){return this._numSamples>1?this._multisampleFramebuffer.getRenderFramebuffer():this._framebuffer}},numSamples:{get:function(){return this._numSamples}},status:{get:function(){return this.framebuffer.status}}}),d.prototype.isDirty=function(e,t,r,i,n){r=Object(h["a"])(r,1);const a=this._width!==e||this._height!==t,s=this._numSamples!==r,o=Object(f["a"])(i)&&this._pixelDatatype!==i||Object(f["a"])(n)&&this._pixelFormat!==n,u=1===r?Object(f["a"])(this._framebuffer):Object(f["a"])(this._multisampleFramebuffer);return this._attachmentsDirty||a||s||o||!u||this._color&&!Object(f["a"])(this._colorTextures[0])},d.prototype.update=function(e,t,r,d,m,p){if(!Object(f["a"])(t)||!Object(f["a"])(r))throw new _["a"]("width and height must be defined.");if(d=e.msaa?Object(h["a"])(d,1):1,m=Object(h["a"])(m,this._color?Object(h["a"])(this._pixelDatatype,a["a"].UNSIGNED_BYTE):void 0),p=Object(h["a"])(p,this._color?Object(h["a"])(this._pixelFormat,l["a"].RGBA):void 0),this.isDirty(t,r,d,m,p)){if(this.destroy(),this._width=t,this._height=r,this._numSamples=d,this._pixelDatatype=m,this._pixelFormat=p,this._attachmentsDirty=!1,this._color&&this._createColorAttachments)for(let i=0;i<this._colorAttachmentsLength;++i)if(this._colorTextures[i]=new c["a"]({context:e,width:t,height:r,pixelFormat:p,pixelDatatype:m,sampler:u["a"].NEAREST}),this._numSamples>1){const n=o["a"].getColorFormat(m);this._colorRenderbuffers[i]=new s["a"]({context:e,width:t,height:r,format:n,numSamples:this._numSamples})}this._depthStencil&&this._createDepthAttachments&&(this._supportsDepthTexture&&e.depthTexture?(this._depthStencilTexture=new c["a"]({context:e,width:t,height:r,pixelFormat:l["a"].DEPTH_STENCIL,pixelDatatype:a["a"].UNSIGNED_INT_24_8,sampler:u["a"].NEAREST}),this._numSamples>1&&(this._depthStencilRenderbuffer=new s["a"]({context:e,width:t,height:r,format:o["a"].DEPTH24_STENCIL8,numSamples:this._numSamples}))):this._depthStencilRenderbuffer=new s["a"]({context:e,width:t,height:r,format:o["a"].DEPTH_STENCIL})),this._depth&&this._createDepthAttachments&&(this._supportsDepthTexture&&e.depthTexture?this._depthTexture=new c["a"]({context:e,width:t,height:r,pixelFormat:l["a"].DEPTH_COMPONENT,pixelDatatype:a["a"].UNSIGNED_INT,sampler:u["a"].NEAREST}):this._depthRenderbuffer=new s["a"]({context:e,width:t,height:r,format:o["a"].DEPTH_COMPONENT16})),this._numSamples>1?this._multisampleFramebuffer=new n["a"]({context:e,width:this._width,height:this._height,colorTextures:this._colorTextures,colorRenderbuffers:this._colorRenderbuffers,depthStencilTexture:this._depthStencilTexture,depthStencilRenderbuffer:this._depthStencilRenderbuffer,destroyAttachments:!1}):this._framebuffer=new i["a"]({context:e,colorTextures:this._colorTextures,depthTexture:this._depthTexture,depthRenderbuffer:this._depthRenderbuffer,depthStencilTexture:this._depthStencilTexture,depthStencilRenderbuffer:this._depthStencilRenderbuffer,destroyAttachments:!1})}},d.prototype.getColorTexture=function(e){if(e=Object(h["a"])(e,0),e>=this._colorAttachmentsLength)throw new _["a"]("index must be smaller than total number of color attachments.");return this._colorTextures[e]},d.prototype.setColorTexture=function(e,t){if(t=Object(h["a"])(t,0),this._createColorAttachments)throw new _["a"]("createColorAttachments must be false if setColorTexture is called.");if(t>=this._colorAttachmentsLength)throw new _["a"]("index must be smaller than total number of color attachments.");this._attachmentsDirty=e!==this._colorTextures[t],this._colorTextures[t]=e},d.prototype.getColorRenderbuffer=function(e){if(e=Object(h["a"])(e,0),e>=this._colorAttachmentsLength)throw new _["a"]("index must be smaller than total number of color attachments.");return this._colorRenderbuffers[e]},d.prototype.setColorRenderbuffer=function(e,t){if(t=Object(h["a"])(t,0),this._createColorAttachments)throw new _["a"]("createColorAttachments must be false if setColorRenderbuffer is called.");if(t>=this._colorAttachmentsLength)throw new _["a"]("index must be smaller than total number of color attachments.");this._attachmentsDirty=e!==this._colorRenderbuffers[t],this._colorRenderbuffers[t]=e},d.prototype.getDepthRenderbuffer=function(){return this._depthRenderbuffer},d.prototype.setDepthRenderbuffer=function(e){if(this._createDepthAttachments)throw new _["a"]("createDepthAttachments must be false if setDepthRenderbuffer is called.");this._attachmentsDirty=e!==this._depthRenderbuffer,this._depthRenderbuffer=e},d.prototype.getDepthTexture=function(){return this._depthTexture},d.prototype.setDepthTexture=function(e){if(this._createDepthAttachments)throw new _["a"]("createDepthAttachments must be false if setDepthTexture is called.");this._attachmentsDirty=e!==this._depthTexture,this._depthTexture=e},d.prototype.getDepthStencilRenderbuffer=function(){return this._depthStencilRenderbuffer},d.prototype.setDepthStencilRenderbuffer=function(e){if(this._createDepthAttachments)throw new _["a"]("createDepthAttachments must be false if setDepthStencilRenderbuffer is called.");this._attachmentsDirty=e!==this._depthStencilRenderbuffer,this._depthStencilRenderbuffer=e},d.prototype.getDepthStencilTexture=function(){return this._depthStencilTexture},d.prototype.setDepthStencilTexture=function(e){if(this._createDepthAttachments)throw new _["a"]("createDepthAttachments must be false if setDepthStencilTexture is called.");this._attachmentsDirty=e!==this._depthStencilTexture,this._depthStencilTexture=e},d.prototype.prepareTextures=function(e,t){this._numSamples>1&&this._multisampleFramebuffer.blitFramebuffers(e,t)},d.prototype.clear=function(e,t,r){const i=t.framebuffer;t.framebuffer=this.framebuffer,t.execute(e,r),t.framebuffer=i},d.prototype.destroyFramebuffer=function(){this._framebuffer=this._framebuffer&&this._framebuffer.destroy(),this._multisampleFramebuffer=this._multisampleFramebuffer&&this._multisampleFramebuffer.destroy()},d.prototype.destroy=function(){if(this._color){let e;const t=this._colorTextures.length;for(e=0;e<t;++e){const t=this._colorTextures[e];this._createColorAttachments&&Object(f["a"])(t)&&!t.isDestroyed()&&(this._colorTextures[e].destroy(),this._colorTextures[e]=void 0),Object(f["a"])(t)&&t.isDestroyed()&&(this._colorTextures[e]=void 0);const r=this._colorRenderbuffers[e];this._createColorAttachments&&Object(f["a"])(r)&&!r.isDestroyed()&&(this._colorRenderbuffers[e].destroy(),this._colorRenderbuffers[e]=void 0),Object(f["a"])(r)&&r.isDestroyed()&&(this._colorRenderbuffers[e]=void 0)}}this._depthStencil&&(this._createDepthAttachments&&(this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy()),Object(f["a"])(this._depthStencilTexture)&&this._depthStencilTexture.isDestroyed()&&(this._depthStencilTexture=void 0),Object(f["a"])(this._depthStencilRenderbuffer)&&this._depthStencilRenderbuffer.isDestroyed()&&(this._depthStencilRenderbuffer=void 0)),this._depth&&(this._createDepthAttachments&&(this._depthTexture=this._depthTexture&&this._depthTexture.destroy(),this._depthRenderbuffer=this._depthRenderbuffer&&this._depthRenderbuffer.destroy()),Object(f["a"])(this._depthTexture)&&this._depthTexture.isDestroyed()&&(this._depthTexture=void 0),Object(f["a"])(this._depthRenderbuffer)&&this._depthRenderbuffer.isDestroyed()&&(this._depthRenderbuffer=void 0)),this.destroyFramebuffer()},t["a"]=d},"6ba7":function(e,t,r){"use strict";var i=r("cedf");const n={STREAM_DRAW:i["a"].STREAM_DRAW,STATIC_DRAW:i["a"].STATIC_DRAW,DYNAMIC_DRAW:i["a"].DYNAMIC_DRAW,validate:function(e){return e===n.STREAM_DRAW||e===n.STATIC_DRAW||e===n.DYNAMIC_DRAW}};t["a"]=Object.freeze(n)},"6f54":function(e,t,r){"use strict";var i=r("ae9b"),n=r("1a5d"),a=r("c937"),s=r("21b7"),o=r("e2a6"),u=r("2642"),c=r("cedf"),h=r("6ba7");function f(e){if(e=Object(n["a"])(e,n["a"].EMPTY_OBJECT),i["a"].defined("options.context",e.context),!Object(a["a"])(e.typedArray)&&!Object(a["a"])(e.sizeInBytes))throw new o["a"]("Either options.sizeInBytes or options.typedArray is required.");if(Object(a["a"])(e.typedArray)&&Object(a["a"])(e.sizeInBytes))throw new o["a"]("Cannot pass in both options.sizeInBytes and options.typedArray.");if(Object(a["a"])(e.typedArray)&&(i["a"].typeOf.object("options.typedArray",e.typedArray),i["a"].typeOf.number("options.typedArray.byteLength",e.typedArray.byteLength)),!h["a"].validate(e.usage))throw new o["a"]("usage is invalid.");const t=e.context._gl,r=e.bufferTarget,s=e.typedArray;let u=e.sizeInBytes;const c=e.usage,f=Object(a["a"])(s);f&&(u=s.byteLength),i["a"].typeOf.number.greaterThan("sizeInBytes",u,0);const _=t.createBuffer();t.bindBuffer(r,_),t.bufferData(r,f?s:u,c),t.bindBuffer(r,null),this._gl=t,this._webgl2=e.context._webgl2,this._bufferTarget=r,this._sizeInBytes=u,this._usage=c,this._buffer=_,this.vertexArrayDestroyable=!0}f.createVertexBuffer=function(e){return i["a"].defined("options.context",e.context),new f({context:e.context,bufferTarget:c["a"].ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage})},f.createIndexBuffer=function(e){if(i["a"].defined("options.context",e.context),!u["a"].validate(e.indexDatatype))throw new o["a"]("Invalid indexDatatype.");if(e.indexDatatype===u["a"].UNSIGNED_INT&&!e.context.elementIndexUint)throw new o["a"]("IndexDatatype.UNSIGNED_INT requires OES_element_index_uint, which is not supported on this system.  Check context.elementIndexUint.");const t=e.context,r=e.indexDatatype,n=u["a"].getSizeInBytes(r),a=new f({context:t,bufferTarget:c["a"].ELEMENT_ARRAY_BUFFER,typedArray:e.typedArray,sizeInBytes:e.sizeInBytes,usage:e.usage}),s=a.sizeInBytes/n;return Object.defineProperties(a,{indexDatatype:{get:function(){return r}},bytesPerIndex:{get:function(){return n}},numberOfIndices:{get:function(){return s}}}),a},Object.defineProperties(f.prototype,{sizeInBytes:{get:function(){return this._sizeInBytes}},usage:{get:function(){return this._usage}}}),f.prototype._getBuffer=function(){return this._buffer},f.prototype.copyFromArrayView=function(e,t){t=Object(n["a"])(t,0),i["a"].defined("arrayView",e),i["a"].typeOf.number.lessThanOrEquals("offsetInBytes + arrayView.byteLength",t+e.byteLength,this._sizeInBytes);const r=this._gl,a=this._bufferTarget;r.bindBuffer(a,this._buffer),r.bufferSubData(a,t,e),r.bindBuffer(a,null)},f.prototype.copyFromBuffer=function(e,t,r,i){if(!this._webgl2)throw new o["a"]("A WebGL 2 context is required.");if(!Object(a["a"])(e))throw new o["a"]("readBuffer must be defined.");if(!Object(a["a"])(i)||i<=0)throw new o["a"]("sizeInBytes must be defined and be greater than zero.");if(!Object(a["a"])(t)||t<0||t+i>e._sizeInBytes)throw new o["a"]("readOffset must be greater than or equal to zero and readOffset + sizeInBytes must be less than of equal to readBuffer.sizeInBytes.");if(!Object(a["a"])(r)||r<0||r+i>this._sizeInBytes)throw new o["a"]("writeOffset must be greater than or equal to zero and writeOffset + sizeInBytes must be less than of equal to this.sizeInBytes.");if(this._buffer===e._buffer&&(r>=t&&r<t+i||t>r&&t<r+i))throw new o["a"]("When readBuffer is equal to this, the ranges [readOffset + sizeInBytes) and [writeOffset, writeOffset + sizeInBytes) must not overlap.");if(this._bufferTarget===c["a"].ELEMENT_ARRAY_BUFFER&&e._bufferTarget!==c["a"].ELEMENT_ARRAY_BUFFER||this._bufferTarget!==c["a"].ELEMENT_ARRAY_BUFFER&&e._bufferTarget===c["a"].ELEMENT_ARRAY_BUFFER)throw new o["a"]("Can not copy an index buffer into another buffer type.");const n=c["a"].COPY_READ_BUFFER,s=c["a"].COPY_WRITE_BUFFER,u=this._gl;u.bindBuffer(s,this._buffer),u.bindBuffer(n,e._buffer),u.copyBufferSubData(n,s,t,r,i),u.bindBuffer(s,null),u.bindBuffer(n,null)},f.prototype.getBufferData=function(e,t,r,i){if(t=Object(n["a"])(t,0),r=Object(n["a"])(r,0),!this._webgl2)throw new o["a"]("A WebGL 2 context is required.");if(!Object(a["a"])(e))throw new o["a"]("arrayView is required.");let s,u,h=e.byteLength;if(Object(a["a"])(i)?(s=i,Object(a["a"])(h)?u=1:(h=e.length,u=e.BYTES_PER_ELEMENT)):Object(a["a"])(h)?(s=h-r,u=1):(h=e.length,s=h-r,u=e.BYTES_PER_ELEMENT),r<0||r>h)throw new o["a"]("destinationOffset must be greater than zero and less than the arrayView length.");if(r+s>h)throw new o["a"]("destinationOffset + length must be less than or equal to the arrayViewLength.");if(t<0||t>this._sizeInBytes)throw new o["a"]("sourceOffset must be greater than zero and less than the buffers size.");if(t+s*u>this._sizeInBytes)throw new o["a"]("sourceOffset + length must be less than the buffers size.");const f=this._gl,_=c["a"].COPY_READ_BUFFER;f.bindBuffer(_,this._buffer),f.getBufferSubData(_,t,e,r,i),f.bindBuffer(_,null)},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){return this._gl.deleteBuffer(this._buffer),Object(s["a"])(this)},t["a"]=f},a3c8:function(e,t,r){"use strict";var i=r("4051"),n=r("1a5d");function a(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT),this.color=e.color,this.depth=e.depth,this.stencil=e.stencil,this.renderState=e.renderState,this.framebuffer=e.framebuffer,this.owner=e.owner,this.pass=e.pass}a.ALL=Object.freeze(new a({color:new i["a"](0,0,0,0),depth:1,stencil:0})),a.prototype.execute=function(e,t){e.clear(this,t)},t["a"]=a},b18b:function(e,t,r){"use strict";var i=r("ae9b"),n=r("1a5d"),a=r("c937"),s=r("21b7"),o=r("e2a6"),u=r("0238"),c=r("2341"),h=r("1494");function f(e,t,r){const i=e._gl;i.framebufferTexture2D(i.FRAMEBUFFER,t,r._target,r._texture,0)}function _(e,t,r){const i=e._gl;i.framebufferRenderbuffer(i.FRAMEBUFFER,t,i.RENDERBUFFER,r._getRenderbuffer())}function l(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);const t=e.context;i["a"].defined("options.context",t);const r=t._gl,s=c["a"].maximumColorAttachments;if(this._gl=r,this._framebuffer=r.createFramebuffer(),this._colorTextures=[],this._colorRenderbuffers=[],this._activeColorAttachments=[],this._depthTexture=void 0,this._depthRenderbuffer=void 0,this._stencilRenderbuffer=void 0,this._depthStencilTexture=void 0,this._depthStencilRenderbuffer=void 0,this.destroyAttachments=Object(n["a"])(e.destroyAttachments,!0),Object(a["a"])(e.colorTextures)&&Object(a["a"])(e.colorRenderbuffers))throw new o["a"]("Cannot have both color texture and color renderbuffer attachments.");if(Object(a["a"])(e.depthTexture)&&Object(a["a"])(e.depthRenderbuffer))throw new o["a"]("Cannot have both a depth texture and depth renderbuffer attachment.");if(Object(a["a"])(e.depthStencilTexture)&&Object(a["a"])(e.depthStencilRenderbuffer))throw new o["a"]("Cannot have both a depth-stencil texture and depth-stencil renderbuffer attachment.");const l=Object(a["a"])(e.depthTexture)||Object(a["a"])(e.depthRenderbuffer),d=Object(a["a"])(e.depthStencilTexture)||Object(a["a"])(e.depthStencilRenderbuffer);if(l&&d)throw new o["a"]("Cannot have both a depth and depth-stencil attachment.");if(Object(a["a"])(e.stencilRenderbuffer)&&d)throw new o["a"]("Cannot have both a stencil and depth-stencil attachment.");if(l&&Object(a["a"])(e.stencilRenderbuffer))throw new o["a"]("Cannot have both a depth and stencil attachment.");let m,p,b,T,g;if(this._bind(),Object(a["a"])(e.colorTextures)){const r=e.colorTextures;if(T=this._colorTextures.length=this._activeColorAttachments.length=r.length,T>s)throw new o["a"]("The number of color attachments exceeds the number supported.");for(b=0;b<T;++b){if(m=r[b],!u["a"].isColorFormat(m.pixelFormat))throw new o["a"]("The color-texture pixel-format must be a color format.");if(m.pixelDatatype===h["a"].FLOAT&&!t.colorBufferFloat)throw new o["a"]("The color texture pixel datatype is FLOAT and the WebGL implementation does not support the EXT_color_buffer_float or WEBGL_color_buffer_float extensions. See Context.colorBufferFloat.");if(m.pixelDatatype===h["a"].HALF_FLOAT&&!t.colorBufferHalfFloat)throw new o["a"]("The color texture pixel datatype is HALF_FLOAT and the WebGL implementation does not support the EXT_color_buffer_half_float extension. See Context.colorBufferHalfFloat.");g=this._gl.COLOR_ATTACHMENT0+b,f(this,g,m),this._activeColorAttachments[b]=g,this._colorTextures[b]=m}}if(Object(a["a"])(e.colorRenderbuffers)){const t=e.colorRenderbuffers;if(T=this._colorRenderbuffers.length=this._activeColorAttachments.length=t.length,T>s)throw new o["a"]("The number of color attachments exceeds the number supported.");for(b=0;b<T;++b)p=t[b],g=this._gl.COLOR_ATTACHMENT0+b,_(this,g,p),this._activeColorAttachments[b]=g,this._colorRenderbuffers[b]=p}if(Object(a["a"])(e.depthTexture)){if(m=e.depthTexture,m.pixelFormat!==u["a"].DEPTH_COMPONENT)throw new o["a"]("The depth-texture pixel-format must be DEPTH_COMPONENT.");f(this,this._gl.DEPTH_ATTACHMENT,m),this._depthTexture=m}if(Object(a["a"])(e.depthRenderbuffer)&&(p=e.depthRenderbuffer,_(this,this._gl.DEPTH_ATTACHMENT,p),this._depthRenderbuffer=p),Object(a["a"])(e.stencilRenderbuffer)&&(p=e.stencilRenderbuffer,_(this,this._gl.STENCIL_ATTACHMENT,p),this._stencilRenderbuffer=p),Object(a["a"])(e.depthStencilTexture)){if(m=e.depthStencilTexture,m.pixelFormat!==u["a"].DEPTH_STENCIL)throw new o["a"]("The depth-stencil pixel-format must be DEPTH_STENCIL.");f(this,this._gl.DEPTH_STENCIL_ATTACHMENT,m),this._depthStencilTexture=m}Object(a["a"])(e.depthStencilRenderbuffer)&&(p=e.depthStencilRenderbuffer,_(this,this._gl.DEPTH_STENCIL_ATTACHMENT,p),this._depthStencilRenderbuffer=p),this._unBind()}Object.defineProperties(l.prototype,{status:{get:function(){this._bind();const e=this._gl.checkFramebufferStatus(this._gl.FRAMEBUFFER);return this._unBind(),e}},numberOfColorAttachments:{get:function(){return this._activeColorAttachments.length}},depthTexture:{get:function(){return this._depthTexture}},depthRenderbuffer:{get:function(){return this._depthRenderbuffer}},stencilRenderbuffer:{get:function(){return this._stencilRenderbuffer}},depthStencilTexture:{get:function(){return this._depthStencilTexture}},depthStencilRenderbuffer:{get:function(){return this._depthStencilRenderbuffer}},hasDepthAttachment:{get:function(){return!!(this.depthTexture||this.depthRenderbuffer||this.depthStencilTexture||this.depthStencilRenderbuffer)}}}),l.prototype._bind=function(){const e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer)},l.prototype._unBind=function(){const e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},l.prototype.bindDraw=function(){const e=this._gl;e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this._framebuffer)},l.prototype.bindRead=function(){const e=this._gl;e.bindFramebuffer(e.READ_FRAMEBUFFER,this._framebuffer)},l.prototype._getActiveColorAttachments=function(){return this._activeColorAttachments},l.prototype.getColorTexture=function(e){if(!Object(a["a"])(e)||e<0||e>=this._colorTextures.length)throw new o["a"]("index is required, must be greater than or equal to zero and must be less than the number of color attachments.");return this._colorTextures[e]},l.prototype.getColorRenderbuffer=function(e){if(!Object(a["a"])(e)||e<0||e>=this._colorRenderbuffers.length)throw new o["a"]("index is required, must be greater than or equal to zero and must be less than the number of color attachments.");return this._colorRenderbuffers[e]},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){if(this.destroyAttachments){let e=0;const t=this._colorTextures;let r=t.length;for(;e<r;++e){const r=t[e];Object(a["a"])(r)&&r.destroy()}const i=this._colorRenderbuffers;for(r=i.length,e=0;e<r;++e){const t=i[e];Object(a["a"])(t)&&t.destroy()}this._depthTexture=this._depthTexture&&this._depthTexture.destroy(),this._depthRenderbuffer=this._depthRenderbuffer&&this._depthRenderbuffer.destroy(),this._stencilRenderbuffer=this._stencilRenderbuffer&&this._stencilRenderbuffer.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy()}return this._gl.deleteFramebuffer(this._framebuffer),Object(s["a"])(this)},t["a"]=l},c772:function(e,t,r){"use strict";var i=r("ae9b"),n=r("1a5d"),a=r("c937"),s=r("e2a6"),o=r("0238"),u=r("1494");function c(e,t,r,i,n,a,s,o,u,c,h){this._context=e,this._texture=t,this._textureTarget=r,this._targetFace=i,this._pixelDatatype=s,this._internalFormat=n,this._pixelFormat=a,this._size=o,this._preMultiplyAlpha=u,this._flipY=c,this._initialized=h}Object.defineProperties(c.prototype,{pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},_target:{get:function(){return this._targetFace}}}),c.prototype.copyFrom=function(e){i["a"].defined("options",e);const t=Object(n["a"])(e.xOffset,0),r=Object(n["a"])(e.yOffset,0);if(i["a"].defined("options.source",e.source),i["a"].typeOf.number.greaterThanOrEquals("xOffset",t,0),i["a"].typeOf.number.greaterThanOrEquals("yOffset",r,0),t+e.source.width>this._size)throw new s["a"]("xOffset + options.source.width must be less than or equal to width.");if(r+e.source.height>this._size)throw new s["a"]("yOffset + options.source.height must be less than or equal to height.");const c=e.source,h=this._context._gl,f=this._textureTarget,_=this._targetFace;h.activeTexture(h.TEXTURE0),h.bindTexture(f,this._texture);const l=c.width,d=c.height;let m=c.arrayBufferView;const p=this._size,b=this._pixelFormat,T=this._internalFormat,g=this._pixelDatatype,x=this._preMultiplyAlpha,E=this._flipY,A=Object(n["a"])(e.skipColorSpaceConversion,!1);let O=4;Object(a["a"])(m)&&(O=o["a"].alignmentInBytes(b,g,l)),h.pixelStorei(h.UNPACK_ALIGNMENT,O),A?h.pixelStorei(h.UNPACK_COLORSPACE_CONVERSION_WEBGL,h.NONE):h.pixelStorei(h.UNPACK_COLORSPACE_CONVERSION_WEBGL,h.BROWSER_DEFAULT_WEBGL);let w=!1;if(!this._initialized){if(0===t&&0===r&&l===p&&d===p)Object(a["a"])(m)?(h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),E&&(m=o["a"].flipY(m,b,g,p,p)),h.texImage2D(_,0,T,p,p,0,b,u["a"].toWebGLConstant(g,this._context),m)):(h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,E),h.texImage2D(_,0,T,b,u["a"].toWebGLConstant(g,this._context),c)),w=!0;else{h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1);const e=o["a"].createTypedArray(b,g,p,p);h.texImage2D(_,0,T,p,p,0,b,u["a"].toWebGLConstant(g,this._context),e)}this._initialized=!0}w||(Object(a["a"])(m)?(h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),E&&(m=o["a"].flipY(m,b,g,l,d)),h.texSubImage2D(_,0,t,r,l,d,b,u["a"].toWebGLConstant(g,this._context),m)):(h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,E),h.texSubImage2D(_,0,t,r,b,u["a"].toWebGLConstant(g,this._context),c))),h.bindTexture(f,null)},c.prototype.copyFromFramebuffer=function(e,t,r,a,o,c){if(e=Object(n["a"])(e,0),t=Object(n["a"])(t,0),r=Object(n["a"])(r,0),a=Object(n["a"])(a,0),o=Object(n["a"])(o,this._size),c=Object(n["a"])(c,this._size),i["a"].typeOf.number.greaterThanOrEquals("xOffset",e,0),i["a"].typeOf.number.greaterThanOrEquals("yOffset",t,0),i["a"].typeOf.number.greaterThanOrEquals("framebufferXOffset",r,0),i["a"].typeOf.number.greaterThanOrEquals("framebufferYOffset",a,0),e+o>this._size)throw new s["a"]("xOffset + source.width must be less than or equal to width.");if(t+c>this._size)throw new s["a"]("yOffset + source.height must be less than or equal to height.");if(this._pixelDatatype===u["a"].FLOAT)throw new s["a"]("Cannot call copyFromFramebuffer when the texture pixel data type is FLOAT.");if(this._pixelDatatype===u["a"].HALF_FLOAT)throw new s["a"]("Cannot call copyFromFramebuffer when the texture pixel data type is HALF_FLOAT.");const h=this._context._gl,f=this._textureTarget;h.activeTexture(h.TEXTURE0),h.bindTexture(f,this._texture),h.copyTexSubImage2D(this._targetFace,0,e,t,r,a,o,c),h.bindTexture(f,null),this._initialized=!0},t["a"]=c},d5cf:function(e,t,r){"use strict";var i=r("1a5d"),n=r("c937"),a=r("82ba");const s={CULL:1,OCCLUDE:2,EXECUTE_IN_CLOSEST_FRUSTUM:4,DEBUG_SHOW_BOUNDING_VOLUME:8,CAST_SHADOWS:16,RECEIVE_SHADOWS:32,PICK_ONLY:64,DEPTH_FOR_TRANSLUCENT_CLASSIFICATION:128};function o(e){e=Object(i["a"])(e,i["a"].EMPTY_OBJECT),this._boundingVolume=e.boundingVolume,this._orientedBoundingBox=e.orientedBoundingBox,this._modelMatrix=e.modelMatrix,this._primitiveType=Object(i["a"])(e.primitiveType,a["a"].TRIANGLES),this._vertexArray=e.vertexArray,this._count=e.count,this._offset=Object(i["a"])(e.offset,0),this._instanceCount=Object(i["a"])(e.instanceCount,0),this._shaderProgram=e.shaderProgram,this._uniformMap=e.uniformMap,this._renderState=e.renderState,this._framebuffer=e.framebuffer,this._pass=e.pass,this._owner=e.owner,this._debugOverlappingFrustums=0,this._pickId=e.pickId,this._flags=0,this.cull=Object(i["a"])(e.cull,!0),this.occlude=Object(i["a"])(e.occlude,!0),this.executeInClosestFrustum=Object(i["a"])(e.executeInClosestFrustum,!1),this.debugShowBoundingVolume=Object(i["a"])(e.debugShowBoundingVolume,!1),this.castShadows=Object(i["a"])(e.castShadows,!1),this.receiveShadows=Object(i["a"])(e.receiveShadows,!1),this.pickOnly=Object(i["a"])(e.pickOnly,!1),this.depthForTranslucentClassification=Object(i["a"])(e.depthForTranslucentClassification,!1),this.dirty=!0,this.lastDirtyTime=0,this.derivedCommands={}}function u(e,t){return(e._flags&t)===t}function c(e,t,r){r?e._flags|=t:e._flags&=~t}Object.defineProperties(o.prototype,{boundingVolume:{get:function(){return this._boundingVolume},set:function(e){this._boundingVolume!==e&&(this._boundingVolume=e,this.dirty=!0)}},orientedBoundingBox:{get:function(){return this._orientedBoundingBox},set:function(e){this._orientedBoundingBox!==e&&(this._orientedBoundingBox=e,this.dirty=!0)}},cull:{get:function(){return u(this,s.CULL)},set:function(e){u(this,s.CULL)!==e&&(c(this,s.CULL,e),this.dirty=!0)}},occlude:{get:function(){return u(this,s.OCCLUDE)},set:function(e){u(this,s.OCCLUDE)!==e&&(c(this,s.OCCLUDE,e),this.dirty=!0)}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix!==e&&(this._modelMatrix=e,this.dirty=!0)}},primitiveType:{get:function(){return this._primitiveType},set:function(e){this._primitiveType!==e&&(this._primitiveType=e,this.dirty=!0)}},vertexArray:{get:function(){return this._vertexArray},set:function(e){this._vertexArray!==e&&(this._vertexArray=e,this.dirty=!0)}},count:{get:function(){return this._count},set:function(e){this._count!==e&&(this._count=e,this.dirty=!0)}},offset:{get:function(){return this._offset},set:function(e){this._offset!==e&&(this._offset=e,this.dirty=!0)}},instanceCount:{get:function(){return this._instanceCount},set:function(e){this._instanceCount!==e&&(this._instanceCount=e,this.dirty=!0)}},shaderProgram:{get:function(){return this._shaderProgram},set:function(e){this._shaderProgram!==e&&(this._shaderProgram=e,this.dirty=!0)}},castShadows:{get:function(){return u(this,s.CAST_SHADOWS)},set:function(e){u(this,s.CAST_SHADOWS)!==e&&(c(this,s.CAST_SHADOWS,e),this.dirty=!0)}},receiveShadows:{get:function(){return u(this,s.RECEIVE_SHADOWS)},set:function(e){u(this,s.RECEIVE_SHADOWS)!==e&&(c(this,s.RECEIVE_SHADOWS,e),this.dirty=!0)}},uniformMap:{get:function(){return this._uniformMap},set:function(e){this._uniformMap!==e&&(this._uniformMap=e,this.dirty=!0)}},renderState:{get:function(){return this._renderState},set:function(e){this._renderState!==e&&(this._renderState=e,this.dirty=!0)}},framebuffer:{get:function(){return this._framebuffer},set:function(e){this._framebuffer!==e&&(this._framebuffer=e,this.dirty=!0)}},pass:{get:function(){return this._pass},set:function(e){this._pass!==e&&(this._pass=e,this.dirty=!0)}},executeInClosestFrustum:{get:function(){return u(this,s.EXECUTE_IN_CLOSEST_FRUSTUM)},set:function(e){u(this,s.EXECUTE_IN_CLOSEST_FRUSTUM)!==e&&(c(this,s.EXECUTE_IN_CLOSEST_FRUSTUM,e),this.dirty=!0)}},owner:{get:function(){return this._owner},set:function(e){this._owner!==e&&(this._owner=e,this.dirty=!0)}},debugShowBoundingVolume:{get:function(){return u(this,s.DEBUG_SHOW_BOUNDING_VOLUME)},set:function(e){u(this,s.DEBUG_SHOW_BOUNDING_VOLUME)!==e&&(c(this,s.DEBUG_SHOW_BOUNDING_VOLUME,e),this.dirty=!0)}},debugOverlappingFrustums:{get:function(){return this._debugOverlappingFrustums},set:function(e){this._debugOverlappingFrustums!==e&&(this._debugOverlappingFrustums=e,this.dirty=!0)}},pickId:{get:function(){return this._pickId},set:function(e){this._pickId!==e&&(this._pickId=e,this.dirty=!0)}},pickOnly:{get:function(){return u(this,s.PICK_ONLY)},set:function(e){u(this,s.PICK_ONLY)!==e&&(c(this,s.PICK_ONLY,e),this.dirty=!0)}},depthForTranslucentClassification:{get:function(){return u(this,s.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION)},set:function(e){u(this,s.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION)!==e&&(c(this,s.DEPTH_FOR_TRANSLUCENT_CLASSIFICATION,e),this.dirty=!0)}}}),o.shallowClone=function(e,t){if(Object(n["a"])(e))return Object(n["a"])(t)||(t=new o),t._boundingVolume=e._boundingVolume,t._orientedBoundingBox=e._orientedBoundingBox,t._modelMatrix=e._modelMatrix,t._primitiveType=e._primitiveType,t._vertexArray=e._vertexArray,t._count=e._count,t._offset=e._offset,t._instanceCount=e._instanceCount,t._shaderProgram=e._shaderProgram,t._uniformMap=e._uniformMap,t._renderState=e._renderState,t._framebuffer=e._framebuffer,t._pass=e._pass,t._owner=e._owner,t._debugOverlappingFrustums=e._debugOverlappingFrustums,t._pickId=e._pickId,t._flags=e._flags,t.dirty=!0,t.lastDirtyTime=0,t},o.prototype.execute=function(e,t){e.draw(this,t)},t["a"]=o},ef87:function(e,t,r){"use strict";var i=r("ae9b"),n=r("1a5d"),a=r("c937"),s=r("21b7"),o=r("e2a6"),u=r("b8b5"),c=r("0238"),h=r("2341"),f=r("c772"),_=r("999a"),l=r("1494"),d=r("4d68"),m=r("50de"),p=r("518b");function b(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT),i["a"].defined("options.context",e.context);const t=e.context,r=e.source;let s,u;if(Object(a["a"])(r)){const e=[r.positiveX,r.negativeX,r.positiveY,r.negativeY,r.positiveZ,r.negativeZ];if(!e[0]||!e[1]||!e[2]||!e[3]||!e[4]||!e[5])throw new o["a"]("options.source requires positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ faces.");s=e[0].width,u=e[0].height;for(let t=1;t<6;++t)if(Number(e[t].width)!==s||Number(e[t].height)!==u)throw new o["a"]("Each face in options.source must have the same width and height.")}else s=e.width,u=e.height;const _=s,m=Object(n["a"])(e.pixelDatatype,l["a"].UNSIGNED_BYTE),p=Object(n["a"])(e.pixelFormat,c["a"].RGBA),b=c["a"].toInternalFormat(p,m,t);if(!Object(a["a"])(s)||!Object(a["a"])(u))throw new o["a"]("options requires a source field to create an initialized cube map or width and height fields to create a blank cube map.");if(s!==u)throw new o["a"]("Width must equal height.");if(_<=0)throw new o["a"]("Width and height must be greater than zero.");if(_>h["a"].maximumCubeMapSize)throw new o["a"](`Width and height must be less than or equal to the maximum cube map size (${h["a"].maximumCubeMapSize}).  Check maximumCubeMapSize.`);if(!c["a"].validate(p))throw new o["a"]("Invalid options.pixelFormat.");if(c["a"].isDepthFormat(p))throw new o["a"]("options.pixelFormat cannot be DEPTH_COMPONENT or DEPTH_STENCIL.");if(!l["a"].validate(m))throw new o["a"]("Invalid options.pixelDatatype.");if(m===l["a"].FLOAT&&!t.floatingPointTexture)throw new o["a"]("When options.pixelDatatype is FLOAT, this WebGL implementation must support the OES_texture_float extension.");if(m===l["a"].HALF_FLOAT&&!t.halfFloatingPointTexture)throw new o["a"]("When options.pixelDatatype is HALF_FLOAT, this WebGL implementation must support the OES_texture_half_float extension.");const T=6*c["a"].textureSizeInBytes(p,m,_,_),g=e.preMultiplyAlpha||p===c["a"].RGB||p===c["a"].LUMINANCE,x=Object(n["a"])(e.flipY,!0),E=Object(n["a"])(e.skipColorSpaceConversion,!1),A=t._gl,O=A.TEXTURE_CUBE_MAP,w=A.createTexture();function y(e,r,i,n,o){let u=r.arrayBufferView;Object(a["a"])(u)||(u=r.bufferView);let h=4;Object(a["a"])(u)&&(h=c["a"].alignmentInBytes(p,m,s)),A.pixelStorei(A.UNPACK_ALIGNMENT,h),o?A.pixelStorei(A.UNPACK_COLORSPACE_CONVERSION_WEBGL,A.NONE):A.pixelStorei(A.UNPACK_COLORSPACE_CONVERSION_WEBGL,A.BROWSER_DEFAULT_WEBGL),Object(a["a"])(u)?(A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,!1),n&&(u=c["a"].flipY(u,p,m,_,_)),A.texImage2D(e,0,b,_,_,0,p,l["a"].toWebGLConstant(m,t),u)):(A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,n),A.texImage2D(e,0,b,p,l["a"].toWebGLConstant(m,t),r))}A.activeTexture(A.TEXTURE0),A.bindTexture(O,w),Object(a["a"])(r)?(y(A.TEXTURE_CUBE_MAP_POSITIVE_X,r.positiveX,g,x,E),y(A.TEXTURE_CUBE_MAP_NEGATIVE_X,r.negativeX,g,x,E),y(A.TEXTURE_CUBE_MAP_POSITIVE_Y,r.positiveY,g,x,E),y(A.TEXTURE_CUBE_MAP_NEGATIVE_Y,r.negativeY,g,x,E),y(A.TEXTURE_CUBE_MAP_POSITIVE_Z,r.positiveZ,g,x,E),y(A.TEXTURE_CUBE_MAP_NEGATIVE_Z,r.negativeZ,g,x,E)):(A.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X,0,b,_,_,0,p,l["a"].toWebGLConstant(m,t),null),A.texImage2D(A.TEXTURE_CUBE_MAP_NEGATIVE_X,0,b,_,_,0,p,l["a"].toWebGLConstant(m,t),null),A.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_Y,0,b,_,_,0,p,l["a"].toWebGLConstant(m,t),null),A.texImage2D(A.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,b,_,_,0,p,l["a"].toWebGLConstant(m,t),null),A.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_Z,0,b,_,_,0,p,l["a"].toWebGLConstant(m,t),null),A.texImage2D(A.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,b,_,_,0,p,l["a"].toWebGLConstant(m,t),null)),A.bindTexture(O,null),this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=O,this._texture=w,this._pixelFormat=p,this._pixelDatatype=m,this._size=_,this._hasMipmap=!1,this._sizeInBytes=T,this._preMultiplyAlpha=g,this._flipY=x,this._sampler=void 0;const C=Object(a["a"])(r);this._positiveX=new f["a"](t,w,O,A.TEXTURE_CUBE_MAP_POSITIVE_X,b,p,m,_,g,x,C),this._negativeX=new f["a"](t,w,O,A.TEXTURE_CUBE_MAP_NEGATIVE_X,b,p,m,_,g,x,C),this._positiveY=new f["a"](t,w,O,A.TEXTURE_CUBE_MAP_POSITIVE_Y,b,p,m,_,g,x,C),this._negativeY=new f["a"](t,w,O,A.TEXTURE_CUBE_MAP_NEGATIVE_Y,b,p,m,_,g,x,C),this._positiveZ=new f["a"](t,w,O,A.TEXTURE_CUBE_MAP_POSITIVE_Z,b,p,m,_,g,x,C),this._negativeZ=new f["a"](t,w,O,A.TEXTURE_CUBE_MAP_NEGATIVE_Z,b,p,m,_,g,x,C),this.sampler=Object(a["a"])(e.sampler)?e.sampler:new d["a"]}Object.defineProperties(b.prototype,{positiveX:{get:function(){return this._positiveX}},negativeX:{get:function(){return this._negativeX}},positiveY:{get:function(){return this._positiveY}},negativeY:{get:function(){return this._negativeY}},positiveZ:{get:function(){return this._positiveZ}},negativeZ:{get:function(){return this._negativeZ}},sampler:{get:function(){return this._sampler},set:function(e){let t=e.minificationFilter,r=e.magnificationFilter;const i=t===p["a"].NEAREST_MIPMAP_NEAREST||t===p["a"].NEAREST_MIPMAP_LINEAR||t===p["a"].LINEAR_MIPMAP_NEAREST||t===p["a"].LINEAR_MIPMAP_LINEAR,n=this._context,s=this._pixelDatatype;(s===l["a"].FLOAT&&!n.textureFloatLinear||s===l["a"].HALF_FLOAT&&!n.textureHalfFloatLinear)&&(t=i?p["a"].NEAREST_MIPMAP_NEAREST:p["a"].NEAREST,r=m["a"].NEAREST);const o=n._gl,u=this._textureTarget;o.activeTexture(o.TEXTURE0),o.bindTexture(u,this._texture),o.texParameteri(u,o.TEXTURE_MIN_FILTER,t),o.texParameteri(u,o.TEXTURE_MAG_FILTER,r),o.texParameteri(u,o.TEXTURE_WRAP_S,e.wrapS),o.texParameteri(u,o.TEXTURE_WRAP_T,e.wrapT),Object(a["a"])(this._textureFilterAnisotropic)&&o.texParameteri(u,this._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.maximumAnisotropy),o.bindTexture(u,null),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},width:{get:function(){return this._size}},height:{get:function(){return this._size}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(4*this._sizeInBytes/3):this._sizeInBytes}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},_target:{get:function(){return this._textureTarget}}}),b.prototype.generateMipmap=function(e){if(e=Object(n["a"])(e,_["a"].DONT_CARE),this._size>1&&!u["a"].isPowerOfTwo(this._size))throw new o["a"]("width and height must be a power of two to call generateMipmap().");if(!_["a"].validate(e))throw new o["a"]("hint is invalid.");this._hasMipmap=!0;const t=this._context._gl,r=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(r,this._texture),t.generateMipmap(r),t.bindTexture(r,null)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),this._positiveX=Object(s["a"])(this._positiveX),this._negativeX=Object(s["a"])(this._negativeX),this._positiveY=Object(s["a"])(this._positiveY),this._negativeY=Object(s["a"])(this._negativeY),this._positiveZ=Object(s["a"])(this._positiveZ),this._negativeZ=Object(s["a"])(this._negativeZ),Object(s["a"])(this)},t["a"]=b},f176:function(e,t,r){"use strict";var i=r("ae9b"),n=r("44e9"),a=r("4051"),s=r("cbf0"),o=r("0b4a"),u=r("1a5d"),c=r("c937"),h=r("21b7"),f=r("e2a6"),_=r("5a72"),l=r("f3a4"),d=r("0dea"),m=r("722e"),p=r("0238"),b=r("82ba"),T=r("e2aa"),g=r("cedf"),x=r("a4da"),E=r("6ba7"),A=r("a3c8"),O=r("2341"),w=r("ef87"),y=r("d5cf"),C=r("2992"),S=r("1494"),F=r("5027"),R=r("19c1"),L=r("8f7d"),v=r("1a75"),I=r("c29d"),P=r("43b9"),D=r("dc15");function M(e,t){let r="WebGL Error:  ";switch(t){case e.INVALID_ENUM:r+="INVALID_ENUM";break;case e.INVALID_VALUE:r+="INVALID_VALUE";break;case e.INVALID_OPERATION:r+="INVALID_OPERATION";break;case e.OUT_OF_MEMORY:r+="OUT_OF_MEMORY";break;case e.CONTEXT_LOST_WEBGL:r+="CONTEXT_LOST_WEBGL lost";break;default:r+=`Unknown (${t})`}return r}function B(e,t,r,i){let n=`${M(e,i)}: ${t.name}(`;for(let a=0;a<r.length;++a)0!==a&&(n+=", "),n+=r[a];return n+=");",n}function V(e,t,r){const i=e.getError();if(i!==e.NO_ERROR)throw new T["a"](B(e,t,r,i))}function z(e,t,r){return{get:function(){const i=e[t];return r(e,"get: "+t,i),e[t]},set:function(i){e[t]=i,r(e,"set: "+t,i)}}}function j(e,t){if(!Object(c["a"])(t))return e;function r(r){return function(){const i=r.apply(e,arguments);return t(e,r,arguments),i}}const i={};for(const n in e){const a=e[n];a instanceof Function?i[n]=r(a):Object.defineProperty(i,n,z(e,n,t))}return i}function N(e,t){const r=t.length;for(let i=0;i<r;++i){const r=e.getExtension(t[i]);if(r)return r}}function U(e,t){if("undefined"===typeof WebGLRenderingContext)throw new T["a"]("The browser does not support WebGL.  Visit http://get.webgl.org.");i["a"].defined("canvas",e),this._canvas=e,t=Object(n["a"])(t,!0),t=Object(u["a"])(t,{}),t.allowTextureFilterAnisotropic=Object(u["a"])(t.allowTextureFilterAnisotropic,!0);const r=Object(u["a"])(t.webgl,{});r.alpha=Object(u["a"])(r.alpha,!1),r.stencil=Object(u["a"])(r.stencil,!0);const s=Object(u["a"])(t.requestWebgl2,!1)&&"undefined"!==typeof WebGL2RenderingContext;let h,f=!1;const _=t.getWebGLStub;if(Object(c["a"])(_))h=_(e,r);else if(s&&(h=e.getContext("webgl2",r)||e.getContext("experimental-webgl2",r)||void 0,Object(c["a"])(h)&&(f=!0)),Object(c["a"])(h)||(h=e.getContext("webgl",r)||e.getContext("experimental-webgl",r)||void 0),!Object(c["a"])(h))throw new T["a"]("The browser supports WebGL, but initialization failed.");this._originalGLContext=h,this._gl=h,this._webgl2=f,this._id=Object(o["a"])(),this.validateFramebuffer=!1,this.validateShaderProgram=!1,this.logShaderCompilation=!1,this._throwOnWebGLError=!1,this._shaderCache=new R["a"](this),this._textureCache=new I["a"];const l=h;this._stencilBits=l.getParameter(l.STENCIL_BITS),O["a"]._maximumCombinedTextureImageUnits=l.getParameter(l.MAX_COMBINED_TEXTURE_IMAGE_UNITS),O["a"]._maximumCubeMapSize=l.getParameter(l.MAX_CUBE_MAP_TEXTURE_SIZE),O["a"]._maximumFragmentUniformVectors=l.getParameter(l.MAX_FRAGMENT_UNIFORM_VECTORS),O["a"]._maximumTextureImageUnits=l.getParameter(l.MAX_TEXTURE_IMAGE_UNITS),O["a"]._maximumRenderbufferSize=l.getParameter(l.MAX_RENDERBUFFER_SIZE),O["a"]._maximumTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),O["a"]._maximumVaryingVectors=l.getParameter(l.MAX_VARYING_VECTORS),O["a"]._maximumVertexAttributes=l.getParameter(l.MAX_VERTEX_ATTRIBS),O["a"]._maximumVertexTextureImageUnits=l.getParameter(l.MAX_VERTEX_TEXTURE_IMAGE_UNITS),O["a"]._maximumVertexUniformVectors=l.getParameter(l.MAX_VERTEX_UNIFORM_VECTORS),O["a"]._maximumSamples=this._webgl2?l.getParameter(l.MAX_SAMPLES):0;const m=l.getParameter(l.ALIASED_LINE_WIDTH_RANGE);O["a"]._minimumAliasedLineWidth=m[0],O["a"]._maximumAliasedLineWidth=m[1];const p=l.getParameter(l.ALIASED_POINT_SIZE_RANGE);O["a"]._minimumAliasedPointSize=p[0],O["a"]._maximumAliasedPointSize=p[1];const b=l.getParameter(l.MAX_VIEWPORT_DIMS);O["a"]._maximumViewportWidth=b[0],O["a"]._maximumViewportHeight=b[1];const x=l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,l.HIGH_FLOAT);O["a"]._highpFloatSupported=0!==x.precision;const E=l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,l.HIGH_INT);O["a"]._highpIntSupported=0!==E.rangeMax,this._antialias=l.getContextAttributes().antialias,this._standardDerivatives=!!N(l,["OES_standard_derivatives"]),this._blendMinmax=!!N(l,["EXT_blend_minmax"]),this._elementIndexUint=!!N(l,["OES_element_index_uint"]),this._depthTexture=!!N(l,["WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),this._fragDepth=!!N(l,["EXT_frag_depth"]),this._debugShaders=N(l,["WEBGL_debug_shaders"]),this._textureFloat=!!N(l,["OES_texture_float"]),this._textureHalfFloat=!!N(l,["OES_texture_half_float"]),this._textureFloatLinear=!!N(l,["OES_texture_float_linear"]),this._textureHalfFloatLinear=!!N(l,["OES_texture_half_float_linear"]),this._colorBufferFloat=!!N(l,["EXT_color_buffer_float","WEBGL_color_buffer_float"]),this._floatBlend=!!N(l,["EXT_float_blend"]),this._colorBufferHalfFloat=!!N(l,["EXT_color_buffer_half_float"]),this._s3tc=!!N(l,["WEBGL_compressed_texture_s3tc","MOZ_WEBGL_compressed_texture_s3tc","WEBKIT_WEBGL_compressed_texture_s3tc"]),this._pvrtc=!!N(l,["WEBGL_compressed_texture_pvrtc","WEBKIT_WEBGL_compressed_texture_pvrtc"]),this._astc=!!N(l,["WEBGL_compressed_texture_astc"]),this._etc=!!N(l,["WEBG_compressed_texture_etc"]),this._etc1=!!N(l,["WEBGL_compressed_texture_etc1"]),this._bc7=!!N(l,["EXT_texture_compression_bptc"]),d["a"].setKTX2SupportedFormats(this._s3tc,this._pvrtc,this._astc,this._etc,this._etc1,this._bc7);const A=t.allowTextureFilterAnisotropic?N(l,["EXT_texture_filter_anisotropic","WEBKIT_EXT_texture_filter_anisotropic"]):void 0;let w,y,S,L,v,D,M,B,V,z;if(this._textureFilterAnisotropic=A,O["a"]._maximumTextureFilterAnisotropy=Object(c["a"])(A)?l.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1,f){const e=this;w=function(){return e._gl.createVertexArray()},y=function(t){e._gl.bindVertexArray(t)},S=function(t){e._gl.deleteVertexArray(t)},L=function(e,t,r,i,n){l.drawElementsInstanced(e,t,r,i,n)},v=function(e,t,r,i){l.drawArraysInstanced(e,t,r,i)},D=function(e,t){l.vertexAttribDivisor(e,t)},M=function(e){l.drawBuffers(e)}}else B=N(l,["OES_vertex_array_object"]),Object(c["a"])(B)&&(w=function(){return B.createVertexArrayOES()},y=function(e){B.bindVertexArrayOES(e)},S=function(e){B.deleteVertexArrayOES(e)}),V=N(l,["ANGLE_instanced_arrays"]),Object(c["a"])(V)&&(L=function(e,t,r,i,n){V.drawElementsInstancedANGLE(e,t,r,i,n)},v=function(e,t,r,i){V.drawArraysInstancedANGLE(e,t,r,i)},D=function(e,t){V.vertexAttribDivisorANGLE(e,t)}),z=N(l,["WEBGL_draw_buffers"]),Object(c["a"])(z)&&(M=function(e){z.drawBuffersWEBGL(e)});this.glCreateVertexArray=w,this.glBindVertexArray=y,this.glDeleteVertexArray=S,this.glDrawElementsInstanced=L,this.glDrawArraysInstanced=v,this.glVertexAttribDivisor=D,this.glDrawBuffers=M,this._vertexArrayObject=!!B,this._instancedArrays=!!V,this._drawBuffers=!!z,O["a"]._maximumDrawBuffers=this.drawBuffers?l.getParameter(g["a"].MAX_DRAW_BUFFERS):1,O["a"]._maximumColorAttachments=this.drawBuffers?l.getParameter(g["a"].MAX_COLOR_ATTACHMENTS):1,this._clearColor=new a["a"](0,0,0,0),this._clearDepth=1,this._clearStencil=0;const j=new P["a"],U=new C["a"](this),G=F["a"].fromCache();this._defaultPassState=U,this._defaultRenderState=G,this._defaultTexture=void 0,this._defaultEmissiveTexture=void 0,this._defaultNormalTexture=void 0,this._defaultCubeMap=void 0,this._us=j,this._currentRenderState=G,this._currentPassState=U,this._currentFramebuffer=void 0,this._maxFrameTextureUnitIndex=0,this._vertexAttribDivisors=[],this._previousDrawInstanced=!1;for(let i=0;i<O["a"]._maximumVertexAttributes;i++)this._vertexAttribDivisors.push(0);this._pickObjects={},this._nextPickColor=new Uint32Array(1),this.options=t,this.cache={},F["a"].apply(l,G,U)}const G={};function W(e){if(e.validateFramebuffer){const t=e._gl,r=t.checkFramebufferStatus(t.FRAMEBUFFER);if(r!==t.FRAMEBUFFER_COMPLETE){let e;switch(r){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:e="Framebuffer is not complete.  Incomplete attachment: at least one attachment point with a renderbuffer or texture attached has its attached object no longer in existence or has an attached image with a width or height of zero, or the color attachment point has a non-color-renderable image attached, or the depth attachment point has a non-depth-renderable image attached, or the stencil attachment point has a non-stencil-renderable image attached.  Color-renderable formats include GL_RGBA4, GL_RGB5_A1, and GL_RGB565. GL_DEPTH_COMPONENT16 is the only depth-renderable format. GL_STENCIL_INDEX8 is the only stencil-renderable format.";break;case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:e="Framebuffer is not complete.  Incomplete dimensions: not all attached images have the same width and height.";break;case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:e="Framebuffer is not complete.  Missing attachment: no images are attached to the framebuffer.";break;case t.FRAMEBUFFER_UNSUPPORTED:e="Framebuffer is not complete.  Unsupported: the combination of internal formats of the attached images violates an implementation-dependent set of restrictions.";break}throw new f["a"](e)}}}function X(e,t,r,i){const n=e._currentRenderState,a=e._currentPassState;e._currentRenderState=t,e._currentPassState=r,F["a"].partialApply(e._gl,n,t,a,r,i)}let H;function Y(e,t){if(t!==e._currentFramebuffer){e._currentFramebuffer=t;let r=H;if(Object(c["a"])(t))t._bind(),W(e),r=t._getActiveColorAttachments();else{const t=e._gl;t.bindFramebuffer(t.FRAMEBUFFER,null)}e.drawBuffers&&e.glDrawBuffers(r)}}Object.defineProperties(U.prototype,{id:{get:function(){return this._id}},webgl2:{get:function(){return this._webgl2}},canvas:{get:function(){return this._canvas}},shaderCache:{get:function(){return this._shaderCache}},textureCache:{get:function(){return this._textureCache}},uniformState:{get:function(){return this._us}},stencilBits:{get:function(){return this._stencilBits}},stencilBuffer:{get:function(){return this._stencilBits>=8}},antialias:{get:function(){return this._antialias}},msaa:{get:function(){return this._webgl2}},standardDerivatives:{get:function(){return this._standardDerivatives||this._webgl2}},floatBlend:{get:function(){return this._floatBlend}},blendMinmax:{get:function(){return this._blendMinmax||this._webgl2}},elementIndexUint:{get:function(){return this._elementIndexUint||this._webgl2}},depthTexture:{get:function(){return this._depthTexture||this._webgl2}},floatingPointTexture:{get:function(){return this._webgl2||this._textureFloat}},halfFloatingPointTexture:{get:function(){return this._webgl2||this._textureHalfFloat}},textureFloatLinear:{get:function(){return this._textureFloatLinear}},textureHalfFloatLinear:{get:function(){return this._webgl2&&this._textureFloatLinear||!this._webgl2&&this._textureHalfFloatLinear}},textureFilterAnisotropic:{get:function(){return!!this._textureFilterAnisotropic}},s3tc:{get:function(){return this._s3tc}},pvrtc:{get:function(){return this._pvrtc}},astc:{get:function(){return this._astc}},etc:{get:function(){return this._etc}},etc1:{get:function(){return this._etc1}},bc7:{get:function(){return this._bc7}},supportsBasis:{get:function(){return this._s3tc||this._pvrtc||this._astc||this._etc||this._etc1||this._bc7}},vertexArrayObject:{get:function(){return this._vertexArrayObject||this._webgl2}},fragmentDepth:{get:function(){return this._fragDepth||this._webgl2}},instancedArrays:{get:function(){return this._instancedArrays||this._webgl2}},colorBufferFloat:{get:function(){return this._colorBufferFloat}},colorBufferHalfFloat:{get:function(){return this._webgl2&&this._colorBufferFloat||!this._webgl2&&this._colorBufferHalfFloat}},drawBuffers:{get:function(){return this._drawBuffers||this._webgl2}},debugShaders:{get:function(){return this._debugShaders}},throwOnWebGLError:{get:function(){return this._throwOnWebGLError},set:function(e){this._throwOnWebGLError=e,this._gl=j(this._originalGLContext,e?V:void 0)}},defaultTexture:{get:function(){return void 0===this._defaultTexture&&(this._defaultTexture=new v["a"]({context:this,source:{width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])},flipY:!1})),this._defaultTexture}},defaultEmissiveTexture:{get:function(){return void 0===this._defaultEmissiveTexture&&(this._defaultEmissiveTexture=new v["a"]({context:this,pixelFormat:p["a"].RGB,source:{width:1,height:1,arrayBufferView:new Uint8Array([0,0,0])},flipY:!1})),this._defaultEmissiveTexture}},defaultNormalTexture:{get:function(){return void 0===this._defaultNormalTexture&&(this._defaultNormalTexture=new v["a"]({context:this,pixelFormat:p["a"].RGB,source:{width:1,height:1,arrayBufferView:new Uint8Array([128,128,255])},flipY:!1})),this._defaultNormalTexture}},defaultCubeMap:{get:function(){if(void 0===this._defaultCubeMap){const e={width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])};this._defaultCubeMap=new w["a"]({context:this,source:{positiveX:e,negativeX:e,positiveY:e,negativeY:e,positiveZ:e,negativeZ:e},flipY:!1})}return this._defaultCubeMap}},drawingBufferHeight:{get:function(){return this._gl.drawingBufferHeight}},drawingBufferWidth:{get:function(){return this._gl.drawingBufferWidth}},defaultFramebuffer:{get:function(){return G}}}),"undefined"!==typeof WebGLRenderingContext&&(H=[g["a"].BACK]);const k=new A["a"];function q(e,t,r,i,n){if(Object(c["a"])(t)&&n.depthTest&&n.depthTest.enabled&&!t.hasDepthAttachment)throw new f["a"]("The depth test can not be enabled (drawCommand.renderState.depthTest.enabled) because the framebuffer (drawCommand.framebuffer) does not have a depth or depth-stencil renderbuffer.");Y(e,t),X(e,n,r,!1),i._bind(),e._maxFrameTextureUnitIndex=Math.max(e._maxFrameTextureUnitIndex,i.maximumTextureUnitIndex)}function K(e,t,r,n){const a=t._primitiveType,s=t._vertexArray;let o=t._offset,h=t._count;const _=t.instanceCount;if(!b["a"].validate(a))throw new f["a"]("drawCommand.primitiveType is required and must be valid.");if(i["a"].defined("drawCommand.vertexArray",s),i["a"].typeOf.number.greaterThanOrEquals("drawCommand.offset",o,0),Object(c["a"])(h)&&i["a"].typeOf.number.greaterThanOrEquals("drawCommand.count",h,0),i["a"].typeOf.number.greaterThanOrEquals("drawCommand.instanceCount",_,0),_>0&&!e.instancedArrays)throw new f["a"]("Instanced arrays extension is not supported");e._us.model=Object(u["a"])(t._modelMatrix,m["a"].IDENTITY),r._setUniforms(n,e._us,e.validateShaderProgram),s._bind();const l=s.indexBuffer;Object(c["a"])(l)?(o*=l.bytesPerIndex,h=Object(u["a"])(h,l.numberOfIndices),0===_?e._gl.drawElements(a,h,l.indexDatatype,o):e.glDrawElementsInstanced(a,h,l.indexDatatype,o,_)):(h=Object(u["a"])(h,s.numberOfVertices),0===_?e._gl.drawArrays(a,o,h):e.glDrawArraysInstanced(a,o,h,_)),s._unBind()}U.prototype.clear=function(e,t){e=Object(u["a"])(e,k),t=Object(u["a"])(t,this._defaultPassState);const r=this._gl;let i=0;const n=e.color,s=e.depth,o=e.stencil;Object(c["a"])(n)&&(a["a"].equals(this._clearColor,n)||(a["a"].clone(n,this._clearColor),r.clearColor(n.red,n.green,n.blue,n.alpha)),i|=r.COLOR_BUFFER_BIT),Object(c["a"])(s)&&(s!==this._clearDepth&&(this._clearDepth=s,r.clearDepth(s)),i|=r.DEPTH_BUFFER_BIT),Object(c["a"])(o)&&(o!==this._clearStencil&&(this._clearStencil=o,r.clearStencil(o)),i|=r.STENCIL_BUFFER_BIT);const h=Object(u["a"])(e.renderState,this._defaultRenderState);X(this,h,t,!0);const f=Object(u["a"])(e.framebuffer,t.framebuffer);Y(this,f),r.clear(i)},U.prototype.draw=function(e,t,r,n){i["a"].defined("drawCommand",e),i["a"].defined("drawCommand.shaderProgram",e._shaderProgram),t=Object(u["a"])(t,this._defaultPassState);const a=Object(u["a"])(e._framebuffer,t.framebuffer),s=Object(u["a"])(e._renderState,this._defaultRenderState);r=Object(u["a"])(r,e._shaderProgram),n=Object(u["a"])(n,e._uniformMap),q(this,a,t,r,s),K(this,e,r,n)},U.prototype.endFrame=function(){const e=this._gl;e.useProgram(null),this._currentFramebuffer=void 0,e.bindFramebuffer(e.FRAMEBUFFER,null);const t=H;this.drawBuffers&&this.glDrawBuffers(t);const r=this._maxFrameTextureUnitIndex;this._maxFrameTextureUnitIndex=0;for(let i=0;i<r;++i)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,null),e.bindTexture(e.TEXTURE_CUBE_MAP,null)},U.prototype.readPixels=function(e){const t=this._gl;e=Object(u["a"])(e,u["a"].EMPTY_OBJECT);const r=Math.max(Object(u["a"])(e.x,0),0),n=Math.max(Object(u["a"])(e.y,0),0),a=Object(u["a"])(e.width,t.drawingBufferWidth),s=Object(u["a"])(e.height,t.drawingBufferHeight),o=e.framebuffer;i["a"].typeOf.number.greaterThan("readState.width",a,0),i["a"].typeOf.number.greaterThan("readState.height",s,0);let h=S["a"].UNSIGNED_BYTE;Object(c["a"])(o)&&o.numberOfColorAttachments>0&&(h=o.getColorTexture(0).pixelDatatype);const f=p["a"].createTypedArray(p["a"].RGBA,h,a,s);return Y(this,o),t.readPixels(r,n,a,s,p["a"].RGBA,S["a"].toWebGLConstant(h,this),f),f};const Z={position:0,textureCoordinates:1};function J(e,t,r){this._pickObjects=e,this.key=t,this.color=r}U.prototype.getViewportQuadVertexArray=function(){let e=this.cache.viewportQuad_vertexArray;if(!Object(c["a"])(e)){const t=new _["a"]({attributes:{position:new l["a"]({componentDatatype:s["a"].FLOAT,componentsPerAttribute:2,values:[-1,-1,1,-1,1,1,-1,1]}),textureCoordinates:new l["a"]({componentDatatype:s["a"].FLOAT,componentsPerAttribute:2,values:[0,0,1,0,1,1,0,1]})},indices:new Uint16Array([0,1,2,0,2,3]),primitiveType:b["a"].TRIANGLES});e=D["a"].fromGeometry({context:this,geometry:t,attributeLocations:Z,bufferUsage:E["a"].STATIC_DRAW,interleave:!0}),this.cache.viewportQuad_vertexArray=e}return e},U.prototype.createViewportQuadCommand=function(e,t){return t=Object(u["a"])(t,u["a"].EMPTY_OBJECT),new y["a"]({vertexArray:this.getViewportQuadVertexArray(),primitiveType:b["a"].TRIANGLES,renderState:t.renderState,shaderProgram:L["a"].fromCache({context:this,vertexShaderSource:x["a"],fragmentShaderSource:e,attributeLocations:Z}),uniformMap:t.uniformMap,owner:t.owner,framebuffer:t.framebuffer,pass:t.pass})},U.prototype.getObjectByPickColor=function(e){return i["a"].defined("pickColor",e),this._pickObjects[e.toRgba()]},Object.defineProperties(J.prototype,{object:{get:function(){return this._pickObjects[this.key]},set:function(e){this._pickObjects[this.key]=e}}}),J.prototype.destroy=function(){delete this._pickObjects[this.key]},U.prototype.createPickId=function(e){i["a"].defined("object",e),++this._nextPickColor[0];const t=this._nextPickColor[0];if(0===t)throw new T["a"]("Out of unique Pick IDs.");return this._pickObjects[t]=e,new J(this._pickObjects,t,a["a"].fromRgba(t))},U.prototype.isDestroyed=function(){return!1},U.prototype.destroy=function(){const e=this.cache;for(const t in e)if(e.hasOwnProperty(t)){const r=e[t];Object(c["a"])(r.destroy)&&r.destroy()}return this._shaderCache=this._shaderCache.destroy(),this._textureCache=this._textureCache.destroy(),this._defaultTexture=this._defaultTexture&&this._defaultTexture.destroy(),this._defaultEmissiveTexture=this._defaultEmissiveTexture&&this._defaultEmissiveTexture.destroy(),this._defaultNormalTexture=this._defaultNormalTexture&&this._defaultNormalTexture.destroy(),this._defaultCubeMap=this._defaultCubeMap&&this._defaultCubeMap.destroy(),Object(h["a"])(this)},t["a"]=U},f4c7:function(e,t,r){"use strict";var i=r("1a5d"),n=r("51f2");function a(e){e=Object(i["a"])(e,i["a"].EMPTY_OBJECT),this.vertexArray=e.vertexArray,this.fragmentShaderSource=e.fragmentShaderSource,this.shaderProgram=e.shaderProgram,this.uniformMap=e.uniformMap,this.outputTexture=e.outputTexture,this.preExecute=e.preExecute,this.postExecute=e.postExecute,this.canceled=e.canceled,this.persists=Object(i["a"])(e.persists,!1),this.pass=n["a"].COMPUTE,this.owner=e.owner}a.prototype.execute=function(e){e.execute(this)},t["a"]=a}}]);