(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors~09de6842"],{"06e9":function(e,t,a){"use strict";var n=a("dde0"),i=a("b8b5"),r=a("1a5d"),s=a("c937"),o=a("722e"),u=a("ec1a"),c=a("1197"),d=a("a3cf"),l=a("466f"),f=a("dc6c"),m=a("5f79"),T=a("8676"),E=a("7c8c");const p={name:"PointCloudAttenuationPipelineStage"},h=new n["a"];p.process=function(e,t,a){const n=e.shaderBuilder;n.addVertexLines([d["a"]]),n.addDefine("USE_POINT_CLOUD_ATTENUATION",void 0,c["a"].VERTEX);const i=e.model,s=i.pointCloudShading;let o,m,E;T["a"].is3DTiles(i.type)&&(m=!0,o=i.content,E=o.tile.refine===l["a"].ADD),n.addUniform("vec3","model_pointCloudAttenuation",c["a"].VERTEX),e.uniformMap.model_pointCloudAttenuation=function(){const n=h;let i=1;m&&(i=E?5:o.tileset.maximumScreenSpaceError),n.x=Object(r["a"])(s.maximumAttenuation,i),n.x*=a.pixelRatio;const c=b(e,t,s,o);n.y=c*s.geometricErrorScale;const d=a.context,l=a.camera.frustum;let T;return T=a.mode===f["a"].SCENE2D||l instanceof u["a"]?Number.POSITIVE_INFINITY:d.drawingBufferHeight/a.camera.frustum.sseDenominator,n.z=T,n}};const _=new n["a"];function b(e,t,a,r){if(Object(s["a"])(r)){const e=r.tile.geometricError;if(e>0)return e}if(Object(s["a"])(a.baseResolution))return a.baseResolution;const u=E["a"].getAttributeBySemantic(t,m["a"].POSITION),c=u.count,d=e.runtimeNode.transform;let l=n["a"].subtract(u.max,u.min,_);l=o["a"].multiplyByPointAsVector(d,l,_);const f=l.x*l.y*l.z,T=i["a"].cbrt(f/c);return T}t["a"]=p},"3c3d":function(e,t,a){"use strict";const n={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2,getStyleCommandsNeeded:function(e,t){return 0===t?n.ALL_OPAQUE:t===e?n.ALL_TRANSLUCENT:n.OPAQUE_AND_TRANSLUCENT}};t["a"]=Object.freeze(n)},"3eda":function(e,t,a){"use strict";const n={FLOAT:"float",VEC2:"vec2",VEC3:"vec3",VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",MAT2:"mat2",MAT3:"mat2",MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"};t["a"]=Object.freeze(n)},5263:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a("ae9b"),i=a("44e9"),r=a("2fad"),s=a("c937"),o=a("722e"),u=a("da23"),c=a("0650"),d=a("7c8c"),l=a("d1d9");function f(e,t){n["a"].typeOf.object("nodeRenderResources",e),n["a"].typeOf.object("runtimePrimitive",t),this.model=e.model,this.runtimeNode=e.runtimeNode,this.attributes=e.attributes.slice(),this.attributeIndex=e.attributeIndex,this.featureIdVertexAttributeSetIndex=e.featureIdVertexAttributeSetIndex,this.hasPropertyTable=!1,this.uniformMap=Object(i["a"])(e.uniformMap),this.alphaOptions=Object(i["a"])(e.alphaOptions),this.transform=e.transform,this.shaderBuilder=e.shaderBuilder.clone(),this.instanceCount=e.instanceCount,this.runtimePrimitive=t;const a=t.primitive;this.count=Object(s["a"])(a.indices)?a.indices.count:d["a"].getAttributeBySemantic(a,"POSITION").count,this.indices=a.indices,this.primitiveType=a.primitiveType,this.boundingSphere=d["a"].createBoundingSphere(a,o["a"].IDENTITY,e.instancingTranslationMax,e.instancingTranslationMin),this.lightingOptions=new l["a"],this.pickId=void 0,this.renderStateOptions=Object(r["a"])(e.renderStateOptions,{depthTest:{enabled:!0,func:c["a"].LESS_OR_EQUAL},blending:u["a"].DISABLED}),this.styleCommandsNeeded=void 0}},"6d72":function(e,t,a){"use strict";a.d(t,"a",(function(){return _}));var n=a("da23"),i=a("44e9"),r=a("c937"),s=a("d5cf"),o=a("0b9d"),u=a("0b27"),c=a("51f2"),d=a("5027"),l=a("e2aa"),f=a("8d2f"),m=a("3c3d"),T=a("dc15"),E=a("8656"),p=a("722e"),h=a("ff3a");function _(e,t){const a=e.shaderBuilder;a.addVertexLines([u["a"]]),a.addFragmentLines([o["a"]]);const n=Object(r["a"])(e.indices)?e.indices.buffer:void 0,_=new T["a"]({context:t.context,indexBuffer:n,attributes:e.attributes}),S=e.model;S._resources.push(_);let A=e.renderStateOptions;S.opaquePass===c["a"].CESIUM_3D_TILE&&(A=Object(i["a"])(A,!0),A.stencilTest=f["a"].setCesium3DTileBit(),A.stencilMask=f["a"].CESIUM_3D_TILE_MASK),A=d["a"].fromCache(A);const I=a.buildShaderProgram(t.context);S._resources.push(I);const O=e.alphaOptions.pass,C=S.sceneGraph,N=p["a"].multiply(C.computedModelMatrix,e.transform,new p["a"]);e.boundingSphere=E["a"].transform(e.boundingSphere,N,e.boundingSphere);const L=new s["a"]({boundingVolume:e.boundingSphere,modelMatrix:N,uniformMap:e.uniformMap,renderState:A,vertexArray:_,shaderProgram:I,cull:S.cull,pass:O,count:e.count,pickId:e.pickId,instanceCount:e.instanceCount,primitiveType:e.primitiveType,debugShowBoundingVolume:S.debugShowBoundingVolume,castShadows:h["a"].castShadows(S.shadows),receiveShadows:h["a"].receiveShadows(S.shadows)}),D=e.styleCommandsNeeded,U=[];if(Object(r["a"])(D)){const e=b(L);if(O!==c["a"].TRANSLUCENT)switch(D){case m["a"].ALL_OPAQUE:U.push(L);break;case m["a"].ALL_TRANSLUCENT:U.push(e.translucent);break;case m["a"].OPAQUE_AND_TRANSLUCENT:U.push(L,e.translucent);break;default:throw new l["a"]("styleCommandsNeeded is not a valid value.")}else U.push(L)}else U.push(L);return U}function b(e){const t={};return t.translucent=S(e),t}function S(e){const t=s["a"].shallowClone(e);t.pass=c["a"].TRANSLUCENT;const a=Object(i["a"])(e.renderState,!0);return a.cull.enabled=!1,a.depthTest.enabled=!0,a.depthMask=!1,a.blending=n["a"].ALPHA_BLEND,t.renderState=d["a"].fromCache(a),t}},"7f683":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("c937"),i=a("21b7"),r=a("1a75");function s(){this._defaultTexture=void 0,this._textures={},this._loadedImages=[],this._lastUpdatedFrame=-1}function o(e,t,a){a.resource.fetchImage().then((function(n){e._loadedImages.push({id:t,image:n,textureUniform:a})})).catch((function(){const a=e._textures[t];Object(n["a"])(a)&&a!==e._defaultTexture&&a.destroy(),e._textures[t]=e._defaultTexture}))}function u(e,t,a){const i=t.id,s=t.textureUniform,o=s.typedArray,u=s.sampler;let c;c=Object(n["a"])(o)?new r["a"]({context:a,pixelFormat:s.pixelFormat,pixelDatatype:s.pixelDatatype,source:{arrayBufferView:o,width:s.width,height:s.height},sampler:u,flipY:!1}):new r["a"]({context:a,source:t.image,sampler:u});const d=e._textures[i];Object(n["a"])(d)&&d!==a.defaultTexture&&d.destroy(),e._textures[i]=c}s.prototype.getTexture=function(e){return this._textures[e]},s.prototype.loadTexture2D=function(e,t){Object(n["a"])(t.typedArray)?this._loadedImages.push({id:e,textureUniform:t}):o(this,e,t)},s.prototype.update=function(e){if(e.frameNumber===this._lastUpdatedFrame)return;this._lastUpdatedFrame=e.frameNumber;const t=e.context;this._defaultTexture=t.defaultTexture;const a=this._loadedImages;for(let n=0;n<a.length;n++){const e=a[n];u(this,e,t)}a.length=0},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){const e=this._textures;for(const t in e)if(e.hasOwnProperty(t)){const a=e[t];a!==this._defaultTexture&&a.destroy()}return Object(i["a"])(this)}},8689:function(e,t,a){"use strict";a("1a5d"),a("c937"),a("e2a6"),a("9f38"),a("0238"),a("1494"),a("4d68"),a("2189")},9206:function(e,t,a){"use strict";var n=a("1a5d"),i=a("c937"),r=a("1197"),s=a("4cb2"),o=a("afe9"),u=a("7c8c");const c={};function d(e){return e instanceof o["a"].FeatureIdTexture?"HAS_SELECTED_FEATURE_ID_TEXTURE":"HAS_SELECTED_FEATURE_ID_ATTRIBUTE"}function l(e){return e instanceof o["a"].FeatureIdTexture?r["a"].FRAGMENT:r["a"].BOTH}function f(e,t,a){let r,s;return Object(i["a"])(t.instances)&&(s=u["a"].getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),Object(i["a"])(s))?(r=Object(n["a"])(s.label,s.positionalLabel),{featureIds:s,variableName:r,shaderDestination:l(s),featureIdDefine:d(s)}):(s=u["a"].getFeatureIdsByLabel(a.featureIds,e.featureIdLabel),r=Object(n["a"])(s.label,s.positionalLabel),{featureIds:s,variableName:r,shaderDestination:l(s),featureIdDefine:d(s)})}function m(e){e.addStructField(c.STRUCT_ID_SELECTED_FEATURE,"int","id"),e.addStructField(c.STRUCT_ID_SELECTED_FEATURE,"vec2","st"),e.addStructField(c.STRUCT_ID_SELECTED_FEATURE,"vec4","color")}c.name="SelectedFeatureIdPipelineStage",c.STRUCT_ID_SELECTED_FEATURE="SelectedFeature",c.STRUCT_NAME_SELECTED_FEATURE="SelectedFeature",c.FUNCTION_ID_FEATURE_VARYINGS_VS="updateFeatureStructVS",c.FUNCTION_ID_FEATURE_VARYINGS_FS="updateFeatureStructFS",c.FUNCTION_SIGNATURE_UPDATE_FEATURE="void updateFeatureStruct(inout SelectedFeature feature)",c.process=function(e,t,a){const n=e.shaderBuilder;e.hasPropertyTable=!0;const o=e.model,u=e.runtimeNode.node,c=f(o,u,t),d=c.shaderDestination;n.addDefine("HAS_SELECTED_FEATURE_ID",void 0,d),n.addDefine("SELECTED_FEATURE_ID",c.variableName,d),n.addDefine(c.featureIdDefine,void 0,d),m(n);const l=c.featureIds.nullFeatureId,T=e.uniformMap;Object(i["a"])(l)&&(n.addDefine("HAS_NULL_FEATURE_ID",void 0,d),n.addUniform("int","model_nullFeatureId",d),T.model_nullFeatureId=function(){return l}),c.shaderDestination===r["a"].BOTH&&n.addVertexLines([s["a"]]),n.addFragmentLines([s["a"]])},t["a"]=c},ce69:function(e,t,a){"use strict";const n={FLOAT:"float",VEC2:"vec2",VEC3:"vec3",VEC4:"vec4",MAT2:"mat2",MAT3:"mat2",MAT4:"mat4"};Object.freeze(n)}}]);