(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors~36e09dff"],{"031a":function(e,t,a){"use strict";const n={VARIABLE:0,UNARY:1,BINARY:2,TERNARY:3,CONDITIONAL:4,MEMBER:5,FUNCTION_CALL:6,ARRAY:7,REGEX:8,VARIABLE_IN_STRING:9,LITERAL_NULL:10,LITERAL_BOOLEAN:11,LITERAL_NUMBER:12,LITERAL_STRING:13,LITERAL_COLOR:14,LITERAL_VECTOR:15,LITERAL_REGEX:16,LITERAL_UNDEFINED:17,BUILTIN_VARIABLE:18};t["a"]=Object.freeze(n)},"03cd":function(e,t,a){"use strict";a("dde0"),a("ae9b"),a("4051"),a("1a5d"),a("e2a6")},"0650":function(e,t,a){"use strict";var n=a("cedf");const r={NEVER:n["a"].NEVER,LESS:n["a"].LESS,EQUAL:n["a"].EQUAL,LESS_OR_EQUAL:n["a"].LEQUAL,GREATER:n["a"].GREATER,NOT_EQUAL:n["a"].NOTEQUAL,GREATER_OR_EQUAL:n["a"].GEQUAL,ALWAYS:n["a"].ALWAYS};t["a"]=Object.freeze(r)},"0a84":function(e,t,a){"use strict";var n=a("0e04"),r=a("dde0"),i=a("4051"),o=a("1a5d"),s=a("c937"),u=a("21b7"),c=a("e8ff"),l=a("722e"),h=a("c1cb"),f=a("aa2d"),d=a("5769");function m(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.length=Object(o["a"])(e.length,1e7),this._length=void 0,this.width=Object(o["a"])(e.width,2),this._width=void 0,this.show=Object(o["a"])(e.show,!0),this.modelMatrix=l["a"].clone(Object(o["a"])(e.modelMatrix,l["a"].IDENTITY)),this._modelMatrix=new l["a"],this.id=e.id,this._id=void 0,this._primitive=void 0}m.prototype.update=function(e){if(this.show){if(!Object(s["a"])(this._primitive)||!l["a"].equals(this._modelMatrix,this.modelMatrix)||this._length!==this.length||this._width!==this.width||this._id!==this.id){this._modelMatrix=l["a"].clone(this.modelMatrix,this._modelMatrix),this._length=this.length,this._width=this.width,this._id=this.id,Object(s["a"])(this._primitive)&&this._primitive.destroy(),0===this.modelMatrix[12]&&0===this.modelMatrix[13]&&0===this.modelMatrix[14]&&(this.modelMatrix[14]=.01);const e=new c["a"]({geometry:new h["a"]({positions:[r["a"].ZERO,r["a"].UNIT_X],width:this.width,vertexFormat:f["a"].VERTEX_FORMAT,colors:[i["a"].RED,i["a"].RED],arcType:n["a"].NONE}),modelMatrix:l["a"].multiplyByUniformScale(this.modelMatrix,this.length,new l["a"]),id:this.id,pickPrimitive:this}),t=new c["a"]({geometry:new h["a"]({positions:[r["a"].ZERO,r["a"].UNIT_Y],width:this.width,vertexFormat:f["a"].VERTEX_FORMAT,colors:[i["a"].GREEN,i["a"].GREEN],arcType:n["a"].NONE}),modelMatrix:l["a"].multiplyByUniformScale(this.modelMatrix,this.length,new l["a"]),id:this.id,pickPrimitive:this}),a=new c["a"]({geometry:new h["a"]({positions:[r["a"].ZERO,r["a"].UNIT_Z],width:this.width,vertexFormat:f["a"].VERTEX_FORMAT,colors:[i["a"].BLUE,i["a"].BLUE],arcType:n["a"].NONE}),modelMatrix:l["a"].multiplyByUniformScale(this.modelMatrix,this.length,new l["a"]),id:this.id,pickPrimitive:this});this._primitive=new d["a"]({geometryInstances:[e,t,a],appearance:new f["a"],asynchronous:!1})}this._primitive.update(e)}},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Object(u["a"])(this)},t["a"]=m},"0e39":function(e,t,a){"use strict";var n=a("c937");function r(e){}let i;r.prototype.isReady=function(){return!0},r.prototype.shouldDiscardImage=function(e){return r.EMPTY_IMAGE===e},Object.defineProperties(r,{EMPTY_IMAGE:{get:function(){return Object(n["a"])(i)||(i=new Image,i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),i}}}),t["a"]=r},"2b78":function(e,t,a){"use strict";var n=a("dde0"),r=a("4051"),i=a("ed17"),o=a("1a5d"),s=a("c937"),u=a("21b7"),c=a("e2a6"),l=a("7828"),h=a("41cd"),f=a("e8ff"),d=a("d767"),m=a("ec1a"),_=a("1345"),p=a("3f87"),g=a("a06c"),v=a("1b9c"),b=a("1f21"),y=a("5769");function w(e){if(e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),!Object(s["a"])(e.camera))throw new c["a"]("options.camera is required.");this._camera=e.camera,this._frustumSplits=e.frustumSplits,this._color=Object(o["a"])(e.color,r["a"].CYAN),this._updateOnChange=Object(o["a"])(e.updateOnChange,!0),this.show=Object(o["a"])(e.show,!0),this.id=e.id,this._id=void 0,this._outlinePrimitives=[],this._planesPrimitives=[]}const O=new n["a"],E=new d["a"],x=new v["a"],C=new p["a"],S=new g["a"],A=new m["a"],L=new _["a"],R=new r["a"],T=[1,1e5];w.prototype.update=function(e){if(!this.show)return;const t=this._planesPrimitives,a=this._outlinePrimitives;let o,u;if(this._updateOnChange){for(u=t.length,o=0;o<u;++o)a[o]=a[o]&&a[o].destroy(),t[o]=t[o]&&t[o].destroy();t.length=0,a.length=0}if(0===t.length){const e=this._camera,u=e.frustum;let c,_;c=u instanceof p["a"]?C:u instanceof g["a"]?S:u instanceof m["a"]?A:L,c=u.clone(c);let w=this._frustumSplits;!Object(s["a"])(w)||w.length<=1?(w=T,w[0]=this._camera.frustum.near,w[1]=this._camera.frustum.far,_=1):_=w.length-1;const I=e.positionWC,N=e.directionWC,j=e.upWC;let $=e.rightWC;$=n["a"].negate($,O);const P=E;d["a"].setColumn(P,0,$,P),d["a"].setColumn(P,1,j,P),d["a"].setColumn(P,2,N,P);const M=v["a"].fromRotationMatrix(P,x);for(t.length=a.length=_,o=0;o<_;++o)c.near=w[o],c.far=w[o+1],t[o]=new y["a"]({geometryInstances:new f["a"]({geometry:new l["a"]({origin:I,orientation:M,frustum:c,_drawNearPlane:0===o}),attributes:{color:i["a"].fromColor(r["a"].fromAlpha(this._color,.1,R))},id:this.id,pickPrimitive:this}),appearance:new b["a"]({translucent:!0,flat:!0}),asynchronous:!1}),a[o]=new y["a"]({geometryInstances:new f["a"]({geometry:new h["a"]({origin:I,orientation:M,frustum:c,_drawNearPlane:0===o}),attributes:{color:i["a"].fromColor(this._color)},id:this.id,pickPrimitive:this}),appearance:new b["a"]({translucent:!1,flat:!0}),asynchronous:!1})}for(u=t.length,o=0;o<u;++o)a[o].update(e),t[o].update(e)},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){const e=this._planesPrimitives.length;for(let t=0;t<e;++t)this._outlinePrimitives[t]=this._outlinePrimitives[t]&&this._outlinePrimitives[t].destroy(),this._planesPrimitives[t]=this._planesPrimitives[t]&&this._planesPrimitives[t].destroy();return Object(u["a"])(this)},t["a"]=w},5618:function(e,t,a){"use strict";var n=a("408d"),r=a("cbf0"),i=a("c937"),o=a("8e1f"),s=a("86a0"),u=a("a47e");function c(){}function l(e,t){const a="runtime."+Object.keys(e.createdBufferViews).length,n=e.buffers,r=Object.keys(n).length;return n[r]=t,e.createdBufferViews[a]={buffer:r,byteOffset:0,byteLength:t.byteLength},a}function h(e,t,a){const n=t._loadResources,r=l(n,e);return n.vertexBuffersToCreate.enqueue(r),r}function f(e,t,a){const n=e.typedArray,i=t._loadResources,o=l(i,n);return i.indexBuffersToCreate.enqueue({id:o,componentType:r["a"].fromTypedArray(n)}),{bufferViewId:o,numberOfIndices:e.numberOfIndices}}function d(e,t,a,n){if(!c._taskProcessorReady)return;const r=a.primitivesToDecode.peek();if(!Object(i["a"])(r))return;const o=e.scheduleTask(r,[r.array.buffer]);return Object(i["a"])(o)?(a.activeDecodingTasks++,a.primitivesToDecode.dequeue(),o.then((function(e){a.activeDecodingTasks--;const i=f(e.indexArray,t,n),o={},s=e.attributeData;for(const a in s)if(s.hasOwnProperty(a)){const e=s[a],r=e.array,i=h(r,t,n),u=e.data;u.bufferView=i,o[a]=u}t._decodedData[`${r.mesh}.primitive.${r.primitive}`]={bufferView:i.bufferViewId,numberOfIndices:i.numberOfIndices,attributes:o}}))):void 0}c._maxDecodingConcurrency=Math.max(o["a"].hardwareConcurrency-1,1),c._decoderTaskProcessor=void 0,c._taskProcessorReady=!1,c._getDecoderTaskProcessor=function(){if(!Object(i["a"])(c._decoderTaskProcessor)){const e=new s["a"]("decodeDraco",c._maxDecodingConcurrency);e.initWebAssemblyModule({modulePath:"ThirdParty/Workers/draco_decoder_nodejs.js",wasmBinaryFile:"ThirdParty/draco_decoder.wasm"}).then((function(){c._taskProcessorReady=!0})),c._decoderTaskProcessor=e}return c._decoderTaskProcessor},c.hasExtension=function(e){return Object(i["a"])(e.extensionsRequired.KHR_draco_mesh_compression)||Object(i["a"])(e.extensionsUsed.KHR_draco_mesh_compression)},c._decodedModelResourceCache=void 0,c.parse=function(e,t){if(!c.hasExtension(e))return;const a=e._loadResources,r=e.cacheKey;if(Object(i["a"])(r)){Object(i["a"])(c._decodedModelResourceCache)||(Object(i["a"])(t.cache.modelDecodingCache)||(t.cache.modelDecodingCache={}),c._decodedModelResourceCache=t.cache.modelDecodingCache);const e=c._decodedModelResourceCache[r];if(Object(i["a"])(e))return e.count++,void(a.pendingDecodingCache=!0)}const o=e._dequantizeInShader,s=e.gltf;u["a"].mesh(s,(function(e,t){u["a"].meshPrimitive(e,(function(e,r){if(!Object(i["a"])(e.extensions))return;const u=e.extensions.KHR_draco_mesh_compression;if(!Object(i["a"])(u))return;const c=s.bufferViews[u.bufferView],l=Object(n["a"])(s.buffers[c.buffer].extras._pipeline.source,c.byteOffset,c.byteOffset+c.byteLength);a.primitivesToDecode.enqueue({mesh:t,primitive:r,array:l,bufferView:c,compressedAttributes:u.attributes,dequantizeInShader:o})}))}))},c.decodeModel=function(e,t){if(!c.hasExtension(e))return Promise.resolve();const a=e._loadResources,n=e.cacheKey;if(Object(i["a"])(n)&&Object(i["a"])(c._decodedModelResourceCache)){const t=c._decodedModelResourceCache[n];if(Object(i["a"])(t)&&a.pendingDecodingCache)return Promise.resolve(t.ready).then((function(){e._decodedData=t.data,a.pendingDecodingCache=!1}));c._decodedModelResourceCache[n]={ready:!1,count:1,data:void 0}}if(0===a.primitivesToDecode.length)return Promise.resolve();const r=c._getDecoderTaskProcessor(),o=[];let s=d(r,e,a,t);while(Object(i["a"])(s))o.push(s),s=d(r,e,a,t);return Promise.all(o)},c.decodePointCloud=function(e){const t=c._getDecoderTaskProcessor();if(c._taskProcessorReady)return t.scheduleTask(e,[e.buffer.buffer])},c.decodeBufferView=function(e){const t=c._getDecoderTaskProcessor();if(c._taskProcessorReady)return t.scheduleTask(e,[e.array.buffer])},c.cacheDataForModel=function(e){const t=e.cacheKey;if(Object(i["a"])(t)&&Object(i["a"])(c._decodedModelResourceCache)){const a=c._decodedModelResourceCache[t];Object(i["a"])(a)&&(a.ready=!0,a.data=e._decodedData)}},c.destroyCachedDataForModel=function(e){const t=e.cacheKey;if(Object(i["a"])(t)&&Object(i["a"])(c._decodedModelResourceCache)){const e=c._decodedModelResourceCache[t];Object(i["a"])(e)&&0===--e.count&&delete c._decodedModelResourceCache[t]}},t["a"]=c},"57d5":function(e,t,a){"use strict";var n=a("1a5d"),r=a("c937"),i=a("514d"),o=a("2610"),s=a("ce96"),u=a("50f2"),c=a("46bd");function l(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);const t=Object(n["a"])(e.translucent,!0),a=Object(n["a"])(e.aboveGround,!1);this.material=Object(r["a"])(e.material)?e.material:c["a"].fromType(c["a"].ColorType),this.translucent=Object(n["a"])(e.translucent,!0),this._vertexShaderSource=Object(n["a"])(e.vertexShaderSource,s["a"]),this._fragmentShaderSource=Object(n["a"])(e.fragmentShaderSource,o["a"]),this._renderState=u["a"].getDefaultRenderState(t,!a,e.renderState),this._closed=!1,this._flat=Object(n["a"])(e.flat,!1),this._faceForward=Object(n["a"])(e.faceForward,a),this._aboveGround=a}Object.defineProperties(l.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return l.VERTEX_FORMAT}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}},aboveGround:{get:function(){return this._aboveGround}}}),l.VERTEX_FORMAT=i["a"].POSITION_AND_ST,l.prototype.getFragmentShaderSource=u["a"].prototype.getFragmentShaderSource,l.prototype.isTranslucent=u["a"].prototype.isTranslucent,l.prototype.getRenderState=u["a"].prototype.getRenderState},"6ba9":function(e,t,a){"use strict";var n=a("8656"),r=a("dde0"),i=a("cbf0"),o=a("c937"),s=a("8e1f"),u=a("5a72"),c=a("f3a4"),l=a("ec1a"),h=a("82ba"),f=a("6ba7"),d=a("d5cf"),m=a("51f2"),_=a("5027"),p=a("8f7d"),g=a("b3ce"),v=a("dc15"),b=a("70b2"),y=a("8de3"),w=a("dc6c"),O=a("1a5d"),E=a("e107");function x(e){this._rs=void 0,this._sp=void 0,this._va=void 0,this._command=void 0,this._mode=void 0,this._useLogDepth=!1,this._ellipsoidOffset=Object(O["a"])(e,0)}const C=s["a"].supportsTypedArrays()?new Float32Array(12):[],S=new r["a"],A=new r["a"],L=new r["a"],R=new r["a"],T=new r["a"];function I(e,t){const a=e.radii,n=t.camera;let i,o,s;if(n.frustum instanceof l["a"])i=r["a"].ZERO,o=n.rightWC,s=n.upWC;else{const t=n.positionWC,a=r["a"].multiplyComponents(e.oneOverRadii,t,S),u=r["a"].normalize(a,A),c=r["a"].normalize(r["a"].cross(r["a"].UNIT_Z,a,L),L),l=r["a"].normalize(r["a"].cross(u,c,R),R),h=r["a"].magnitude(a),f=Math.sqrt(h*h-1);i=r["a"].multiplyByScalar(u,1/h,S);const d=f/h;o=r["a"].multiplyByScalar(c,d,A),s=r["a"].multiplyByScalar(l,d,L)}const u=r["a"].add(i,s,T);r["a"].subtract(u,o,u),r["a"].multiplyComponents(a,u,u),r["a"].pack(u,C,0);const c=r["a"].subtract(i,s,T);r["a"].subtract(c,o,c),r["a"].multiplyComponents(a,c,c),r["a"].pack(c,C,3);const h=r["a"].add(i,s,T);r["a"].add(h,o,h),r["a"].multiplyComponents(a,h,h),r["a"].pack(h,C,6);const f=r["a"].subtract(i,s,T);return r["a"].add(f,o,f),r["a"].multiplyComponents(a,f,f),r["a"].pack(f,C,9),C}x.prototype.update=function(e){if(this._mode=e.mode,e.mode!==w["a"].SCENE3D)return;const t=e.context,a=e.mapProjection.ellipsoid.radii,s=new E["a"](a.x+this._ellipsoidOffset,a.y+this._ellipsoidOffset,a.z+this._ellipsoidOffset),l=e.useLogDepth;if(Object(o["a"])(this._command)||(this._rs=_["a"].fromCache({cull:{enabled:!0},depthTest:{enabled:!0},colorMask:{red:!1,green:!1,blue:!1,alpha:!1}}),this._command=new d["a"]({renderState:this._rs,boundingVolume:new n["a"](r["a"].ZERO,s.maximumRadius),pass:m["a"].OPAQUE,owner:this})),!Object(o["a"])(this._sp)||this._useLogDepth!==l){this._useLogDepth=l;const e=new g["a"]({sources:[y["a"]]}),a=new g["a"]({sources:[b["a"]]});if(l){const t="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n";a.sources.push(t),a.defines.push("LOG_DEPTH"),e.defines.push("LOG_DEPTH")}this._sp=p["a"].replaceCache({shaderProgram:this._sp,context:t,vertexShaderSource:e,fragmentShaderSource:a,attributeLocations:{position:0}}),this._command.shaderProgram=this._sp}const O=I(s,e);if(Object(o["a"])(this._va))this._va.getAttribute(0).vertexBuffer.copyFromArrayView(O);else{const e=new u["a"]({attributes:{position:new c["a"]({componentDatatype:i["a"].FLOAT,componentsPerAttribute:3,values:O})},indices:[0,1,2,2,1,3],primitiveType:h["a"].TRIANGLES});this._va=v["a"].fromGeometry({context:t,geometry:e,attributeLocations:{position:0},bufferUsage:f["a"].DYNAMIC_DRAW}),this._command.vertexArray=this._va}},x.prototype.execute=function(e,t){this._mode===w["a"].SCENE3D&&this._command.execute(e,t)},x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){this._sp=this._sp&&this._sp.destroy(),this._va=this._va&&this._va.destroy()},t["a"]=x},"7e09":function(e,t,a){"use strict";var n=a("21b7"),r=a("e2a6");function i(e,t){this._tileset=e,this._tile=t,this.featurePropertiesDirty=!1}Object.defineProperties(i.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(e){throw new r["a"]("Empty3DTileContent cannot have content metadata")}},batchTable:{get:function(){}},group:{get:function(){},set:function(e){throw new r["a"]("Empty3DTileContent cannot have group metadata")}}}),i.prototype.hasProperty=function(e,t){return!1},i.prototype.getFeature=function(e){},i.prototype.applyDebugSettings=function(e,t){},i.prototype.applyStyle=function(e){},i.prototype.update=function(e,t){},i.prototype.isDestroyed=function(){return!1},i.prototype.destroy=function(){return Object(n["a"])(this)},t["a"]=i},"9f50":function(e,t,a){"use strict";var n=a("4051"),r=a("d5cf"),i=a("b3ce"),o=a("8f7d"),s=a("c937");function u(){this._cachedShowFrustumsShaders={}}function c(e){const t={},a=e.vertexAttributes;for(const n in a)a.hasOwnProperty(n)&&(t[n]=a[n].index);return t}function l(e,t){const a=e.context,n=t,r=n.fragmentShaderSource.clone(),s=[];r.sources=r.sources.map((function(e){e=i["a"].replaceMain(e,"czm_Debug_main");const t=/gl_FragData\[(\d+)\]/g;let a;while(null!==(a=t.exec(e)))-1===s.indexOf(a[1])&&s.push(a[1]);return e}));const u=s.length;let l,h="";if(h+="uniform vec3 debugShowCommandsColor;\n",h+="uniform vec3 debugShowFrustumsColor;\n",h+="void main() \n{ \n    czm_Debug_main(); \n",u>0)for(l=0;l<u;++l)h+=`    gl_FragData[${s[l]}].rgb *= debugShowCommandsColor;\n`,h+=`    gl_FragData[${s[l]}].rgb *= debugShowFrustumsColor;\n`;else h+="    gl_FragColor.rgb *= debugShowCommandsColor;\n",h+="    gl_FragColor.rgb *= debugShowFrustumsColor;\n";h+="}",r.sources.push(h);const f=c(n);return o["a"].fromCache({context:a,vertexShaderSource:n.vertexShaderSource,fragmentShaderSource:r,attributeLocations:f})}const h=new n["a"];function f(e,t){let a;return a=Object(s["a"])(t.uniformMap)?t.uniformMap:{},Object(s["a"])(a.debugShowCommandsColor)||Object(s["a"])(a.debugShowFrustumsColor)||(a.debugShowCommandsColor=function(){return e.debugShowCommands?(Object(s["a"])(t._debugColor)||(t._debugColor=n["a"].fromRandom()),t._debugColor):n["a"].WHITE},a.debugShowFrustumsColor=function(){return e.debugShowFrustums?(h.red=1&t.debugOverlappingFrustums?1:0,h.green=2&t.debugOverlappingFrustums?1:0,h.blue=4&t.debugOverlappingFrustums?1:0,h.alpha=1,h):n["a"].WHITE}),a}const d=new r["a"];u.prototype.executeDebugShowFrustumsCommand=function(e,t,a){const n=t.shaderProgram.id;let i=this._cachedShowFrustumsShaders[n];Object(s["a"])(i)||(i=l(e,t.shaderProgram),this._cachedShowFrustumsShaders[n]=i);const o=r["a"].shallowClone(t,d);o.shaderProgram=i,o.uniformMap=f(e,t),o.execute(e.context,a)},t["a"]=u},a8e7:function(e,t,a){"use strict";var n=a("1a5d"),r=a("c937"),i=a("e2a6"),o=a("50f2");function s(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);const t=e.attributeName;let a=e.perInstanceAttribute;if(!Object(r["a"])(t))throw new i["a"]("options.attributeName is required.");Object(r["a"])(a)||(a=!1);let s=Object(n["a"])(e.glslDatatype,"vec3");const u="v_"+t;let c;if("normal"===t||"tangent"===t||"bitangent"===t)c=`vec4 getColor() { return vec4((${u} + vec3(1.0)) * 0.5, 1.0); }\n`;else switch("st"===t&&(s="vec2"),s){case"float":c=`vec4 getColor() { return vec4(vec3(${u}), 1.0); }\n`;break;case"vec2":c=`vec4 getColor() { return vec4(${u}, 0.0, 1.0); }\n`;break;case"vec3":c=`vec4 getColor() { return vec4(${u}, 1.0); }\n`;break;case"vec4":c=`vec4 getColor() { return ${u}; }\n`;break;default:throw new i["a"]("options.glslDatatype must be float, vec2, vec3, or vec4.")}const l=`attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute float batchId;\n${a?"":`attribute ${s} ${t};\n`}varying ${s} ${u};\nvoid main()\n{\nvec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);\n${a?`${u} = czm_batchTable_${t}(batchId);\n`:`${u} = ${t};\n`}gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}`,h=`varying ${s} ${u};\n${c}\nvoid main()\n{\ngl_FragColor = getColor();\n}`;this.material=void 0,this.translucent=Object(n["a"])(e.translucent,!1),this._vertexShaderSource=Object(n["a"])(e.vertexShaderSource,l),this._fragmentShaderSource=Object(n["a"])(e.fragmentShaderSource,h),this._renderState=o["a"].getDefaultRenderState(!1,!1,e.renderState),this._closed=Object(n["a"])(e.closed,!1),this._attributeName=t,this._glslDatatype=s}Object.defineProperties(s.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},attributeName:{get:function(){return this._attributeName}},glslDatatype:{get:function(){return this._glslDatatype}}}),s.prototype.getFragmentShaderSource=o["a"].prototype.getFragmentShaderSource,s.prototype.isTranslucent=o["a"].prototype.isTranslucent,s.prototype.getRenderState=o["a"].prototype.getRenderState},adca:function(e,t,a){"use strict";var n=a("85b2"),r=a("dde0"),i=a("ae9b"),o=a("4051"),s=a("1a5d"),u=a("c937");function c(e,t){if(e=Object(s["a"])(e,s["a"].EMPTY_OBJECT),this._show=Object(s["a"])(e.show,!0),this._position=r["a"].clone(Object(s["a"])(e.position,r["a"].ZERO)),!Object(u["a"])(e.scale)&&Object(u["a"])(e.maximumSize))this._maximumSize=r["a"].clone(e.maximumSize),this._scale=new n["a"](this._maximumSize.x,this._maximumSize.y);else{this._scale=n["a"].clone(Object(s["a"])(e.scale,new n["a"](20,12)));const t=new r["a"](this._scale.x,this._scale.y,Math.min(this._scale.x,this._scale.y)/1.5);this._maximumSize=r["a"].clone(Object(s["a"])(e.maximumSize,t))}this._slice=Object(s["a"])(e.slice,-1),this._color=o["a"].clone(Object(s["a"])(e.color,o["a"].WHITE)),this._brightness=Object(s["a"])(e.brightness,1),this._cloudCollection=t,this._index=-1}const l=c.SHOW_INDEX=0,h=c.POSITION_INDEX=1,f=c.SCALE_INDEX=2,d=c.MAXIMUM_SIZE_INDEX=3,m=c.SLICE_INDEX=4,_=c.BRIGHTNESS_INDEX=5,p=c.COLOR_INDEX=6;function g(e,t){const a=e._cloudCollection;Object(u["a"])(a)&&(a._updateCloud(e,t),e._dirty=!0)}c.NUMBER_OF_PROPERTIES=7,Object.defineProperties(c.prototype,{show:{get:function(){return this._show},set:function(e){i["a"].typeOf.bool("value",e),this._show!==e&&(this._show=e,g(this,l))}},position:{get:function(){return this._position},set:function(e){i["a"].typeOf.object("value",e);const t=this._position;r["a"].equals(t,e)||(r["a"].clone(e,t),g(this,h))}},scale:{get:function(){return this._scale},set:function(e){i["a"].typeOf.object("value",e);const t=this._scale;n["a"].equals(t,e)||(n["a"].clone(e,t),g(this,f))}},maximumSize:{get:function(){return this._maximumSize},set:function(e){i["a"].typeOf.object("value",e);const t=this._maximumSize;r["a"].equals(t,e)||(r["a"].clone(e,t),g(this,d))}},color:{get:function(){return this._color},set:function(e){i["a"].typeOf.object("value",e);const t=this._color;o["a"].equals(t,e)||(o["a"].clone(e,t),g(this,p))}},slice:{get:function(){return this._slice},set:function(e){i["a"].typeOf.number("value",e);const t=this._slice;t!==e&&(this._slice=e,g(this,m))}},brightness:{get:function(){return this._brightness},set:function(e){i["a"].typeOf.number("value",e);const t=this._brightness;t!==e&&(this._brightness=e,g(this,_))}}}),c.prototype._destroy=function(){this._cloudCollection=void 0},t["a"]=c},b1bd:function(e,t,a){"use strict";var n=a("c937"),r=a("21b7"),i=a("e2a6"),o=a("b8b5"),s=a("d767"),u=a("1b9c");function c(e){if(!Object(n["a"])(e))throw new i["a"]("scene is required.");this._scene=e,this._lastAlpha=void 0,this._lastBeta=void 0,this._lastGamma=void 0,this._alpha=void 0,this._beta=void 0,this._gamma=void 0;const t=this;function a(e){const a=e.alpha;if(!Object(n["a"])(a))return t._alpha=void 0,t._beta=void 0,void(t._gamma=void 0);t._alpha=o["a"].toRadians(a),t._beta=o["a"].toRadians(e.beta),t._gamma=o["a"].toRadians(e.gamma)}window.addEventListener("deviceorientation",a,!1),this._removeListener=function(){window.removeEventListener("deviceorientation",a,!1)}}const l=new u["a"],h=new u["a"],f=new s["a"];function d(e,t,a,n){const r=e.direction,i=e.right,o=e.up,c=u["a"].fromAxisAngle(r,a,h),d=u["a"].fromAxisAngle(i,n,l),m=u["a"].multiply(d,c,d),_=u["a"].fromAxisAngle(o,t,h);u["a"].multiply(_,m,m);const p=s["a"].fromQuaternion(m,f);s["a"].multiplyByVector(p,i,i),s["a"].multiplyByVector(p,o,o),s["a"].multiplyByVector(p,r,r)}c.prototype.update=function(){if(!Object(n["a"])(this._alpha))return;Object(n["a"])(this._lastAlpha)||(this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma);const e=this._lastAlpha-this._alpha,t=this._lastBeta-this._beta,a=this._lastGamma-this._gamma;d(this._scene.camera,-e,t,a),this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this._removeListener(),Object(r["a"])(this)},t["a"]=c},ddd8:function(e,t,a){"use strict";var n=a("cedf");const r={FRONT:n["a"].FRONT,BACK:n["a"].BACK,FRONT_AND_BACK:n["a"].FRONT_AND_BACK};t["a"]=Object.freeze(r)},e829:function(e,t,a){"use strict";var n=a("85b2"),r=a("dde0"),i=a("6b82"),o=a("ae9b"),s=a("4051"),u=a("c937"),c=a("e2a6"),l=a("b8b5"),h=a("e2aa"),f=a("49e8"),d=a("031a");function m(e,t){let a;o["a"].typeOf.string("expression",e),this._expression=e,e=B(e,t),e=F(k(e)),f["a"].addBinaryOp("=~",0),f["a"].addBinaryOp("!~",0);try{a=Object(f["a"])(e)}catch(n){throw new h["a"](n)}this._runtimeAst=Z(this,a)}Object.defineProperties(m.prototype,{expression:{get:function(){return this._expression}}});const _={arrayIndex:0,arrayArray:[[]],cartesian2Index:0,cartesian3Index:0,cartesian4Index:0,cartesian2Array:[new n["a"]],cartesian3Array:[new r["a"]],cartesian4Array:[new i["a"]],reset:function(){this.arrayIndex=0,this.cartesian2Index=0,this.cartesian3Index=0,this.cartesian4Index=0},getArray:function(){this.arrayIndex>=this.arrayArray.length&&this.arrayArray.push([]);const e=this.arrayArray[this.arrayIndex++];return e.length=0,e},getCartesian2:function(){return this.cartesian2Index>=this.cartesian2Array.length&&this.cartesian2Array.push(new n["a"]),this.cartesian2Array[this.cartesian2Index++]},getCartesian3:function(){return this.cartesian3Index>=this.cartesian3Array.length&&this.cartesian3Array.push(new r["a"]),this.cartesian3Array[this.cartesian3Index++]},getCartesian4:function(){return this.cartesian4Index>=this.cartesian4Array.length&&this.cartesian4Array.push(new i["a"]),this.cartesian4Array[this.cartesian4Index++]}};m.prototype.evaluate=function(e,t){_.reset();const a=this._runtimeAst.evaluate(e);return t instanceof s["a"]&&a instanceof i["a"]?s["a"].fromCartesian4(a,t):a instanceof n["a"]||a instanceof r["a"]||a instanceof i["a"]?a.clone(t):a},m.prototype.evaluateColor=function(e,t){_.reset();const a=this._runtimeAst.evaluate(e);return s["a"].fromCartesian4(a,t)},m.prototype.getShaderFunction=function(e,t,a,n){let r=this.getShaderExpression(t,a);return r=`${n} ${e}\n{\n    return ${r};\n}\n`,r},m.prototype.getShaderExpression=function(e,t){return this._runtimeAst.getShaderExpression(e,t)},m.prototype.getVariables=function(){let e=[];return this._runtimeAst.getVariables(e),e=e.filter((function(e,t,a){return a.indexOf(e)===t})),e};const p=["!","-","+"],g=["+","-","*","/","%","===","!==",">",">=","<","<=","&&","||","!~","=~"],v=/\${(.*?)}/g,b=/\\/g,y="@#%",w=/@#%/g,O=new s["a"],E={abs:R(Math.abs),sqrt:R(Math.sqrt),cos:R(Math.cos),sin:R(Math.sin),tan:R(Math.tan),acos:R(Math.acos),asin:R(Math.asin),atan:R(Math.atan),radians:R(l["a"].toRadians),degrees:R(l["a"].toDegrees),sign:R(l["a"].sign),floor:R(Math.floor),ceil:R(Math.ceil),round:R(Math.round),exp:R(Math.exp),exp2:R(A),log:R(Math.log),log2:R(L),fract:R(S),length:N,normalize:j},x={atan2:T(Math.atan2,!1),pow:T(Math.pow,!1),min:T(Math.min,!0),max:T(Math.max,!0),distance:$,dot:P,cross:M},C={clamp:I(l["a"].clamp,!0),mix:I(l["a"].lerp,!0)};function S(e){return e-Math.floor(e)}function A(e){return Math.pow(2,e)}function L(e){return l["a"].log2(e)}function R(e){return function(t,a){if("number"===typeof a)return e(a);if(a instanceof n["a"])return n["a"].fromElements(e(a.x),e(a.y),_.getCartesian2());if(a instanceof r["a"])return r["a"].fromElements(e(a.x),e(a.y),e(a.z),_.getCartesian3());if(a instanceof i["a"])return i["a"].fromElements(e(a.x),e(a.y),e(a.z),e(a.w),_.getCartesian4());throw new h["a"](`Function "${t}" requires a vector or number argument. Argument is ${a}.`)}}function T(e,t){return function(a,o,s){if(t&&"number"===typeof s){if("number"===typeof o)return e(o,s);if(o instanceof n["a"])return n["a"].fromElements(e(o.x,s),e(o.y,s),_.getCartesian2());if(o instanceof r["a"])return r["a"].fromElements(e(o.x,s),e(o.y,s),e(o.z,s),_.getCartesian3());if(o instanceof i["a"])return i["a"].fromElements(e(o.x,s),e(o.y,s),e(o.z,s),e(o.w,s),_.getCartesian4())}if("number"===typeof o&&"number"===typeof s)return e(o,s);if(o instanceof n["a"]&&s instanceof n["a"])return n["a"].fromElements(e(o.x,s.x),e(o.y,s.y),_.getCartesian2());if(o instanceof r["a"]&&s instanceof r["a"])return r["a"].fromElements(e(o.x,s.x),e(o.y,s.y),e(o.z,s.z),_.getCartesian3());if(o instanceof i["a"]&&s instanceof i["a"])return i["a"].fromElements(e(o.x,s.x),e(o.y,s.y),e(o.z,s.z),e(o.w,s.w),_.getCartesian4());throw new h["a"](`Function "${a}" requires vector or number arguments of matching types. Arguments are ${o} and ${s}.`)}}function I(e,t){return function(a,o,s,u){if(t&&"number"===typeof u){if("number"===typeof o&&"number"===typeof s)return e(o,s,u);if(o instanceof n["a"]&&s instanceof n["a"])return n["a"].fromElements(e(o.x,s.x,u),e(o.y,s.y,u),_.getCartesian2());if(o instanceof r["a"]&&s instanceof r["a"])return r["a"].fromElements(e(o.x,s.x,u),e(o.y,s.y,u),e(o.z,s.z,u),_.getCartesian3());if(o instanceof i["a"]&&s instanceof i["a"])return i["a"].fromElements(e(o.x,s.x,u),e(o.y,s.y,u),e(o.z,s.z,u),e(o.w,s.w,u),_.getCartesian4())}if("number"===typeof o&&"number"===typeof s&&"number"===typeof u)return e(o,s,u);if(o instanceof n["a"]&&s instanceof n["a"]&&u instanceof n["a"])return n["a"].fromElements(e(o.x,s.x,u.x),e(o.y,s.y,u.y),_.getCartesian2());if(o instanceof r["a"]&&s instanceof r["a"]&&u instanceof r["a"])return r["a"].fromElements(e(o.x,s.x,u.x),e(o.y,s.y,u.y),e(o.z,s.z,u.z),_.getCartesian3());if(o instanceof i["a"]&&s instanceof i["a"]&&u instanceof i["a"])return i["a"].fromElements(e(o.x,s.x,u.x),e(o.y,s.y,u.y),e(o.z,s.z,u.z),e(o.w,s.w,u.w),_.getCartesian4());throw new h["a"](`Function "${a}" requires vector or number arguments of matching types. Arguments are ${o}, ${s}, and ${u}.`)}}function N(e,t){if("number"===typeof t)return Math.abs(t);if(t instanceof n["a"])return n["a"].magnitude(t);if(t instanceof r["a"])return r["a"].magnitude(t);if(t instanceof i["a"])return i["a"].magnitude(t);throw new h["a"](`Function "${e}" requires a vector or number argument. Argument is ${t}.`)}function j(e,t){if("number"===typeof t)return 1;if(t instanceof n["a"])return n["a"].normalize(t,_.getCartesian2());if(t instanceof r["a"])return r["a"].normalize(t,_.getCartesian3());if(t instanceof i["a"])return i["a"].normalize(t,_.getCartesian4());throw new h["a"](`Function "${e}" requires a vector or number argument. Argument is ${t}.`)}function $(e,t,a){if("number"===typeof t&&"number"===typeof a)return Math.abs(t-a);if(t instanceof n["a"]&&a instanceof n["a"])return n["a"].distance(t,a);if(t instanceof r["a"]&&a instanceof r["a"])return r["a"].distance(t,a);if(t instanceof i["a"]&&a instanceof i["a"])return i["a"].distance(t,a);throw new h["a"](`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${a}.`)}function P(e,t,a){if("number"===typeof t&&"number"===typeof a)return t*a;if(t instanceof n["a"]&&a instanceof n["a"])return n["a"].dot(t,a);if(t instanceof r["a"]&&a instanceof r["a"])return r["a"].dot(t,a);if(t instanceof i["a"]&&a instanceof i["a"])return i["a"].dot(t,a);throw new h["a"](`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${a}.`)}function M(e,t,a){if(t instanceof r["a"]&&a instanceof r["a"])return r["a"].cross(t,a,_.getCartesian3());throw new h["a"](`Function "${e}" requires vec3 arguments. Arguments are ${t} and ${a}.`)}function D(e,t,a,n,r){this._type=e,this._value=t,this._left=a,this._right=n,this._test=r,this.evaluate=void 0,J(this)}function B(e,t){if(!Object(u["a"])(t))return e;for(const a in t)if(t.hasOwnProperty(a)){const n=new RegExp(`\\$\\{${a}\\}`,"g"),r=`(${t[a]})`;Object(u["a"])(r)&&(e=e.replace(n,r))}return e}function k(e){return e.replace(b,y)}function U(e){return e.replace(w,"\\")}function F(e){let t=e,a="",n=t.indexOf("${");while(n>=0){const e=t.indexOf("'"),r=t.indexOf('"');let i;if(e>=0&&e<n)i=t.indexOf("'",e+1),a+=t.substr(0,i+1),t=t.substr(i+1),n=t.indexOf("${");else if(r>=0&&r<n)i=t.indexOf('"',r+1),a+=t.substr(0,i+1),t=t.substr(i+1),n=t.indexOf("${");else{a+=t.substr(0,n);const e=t.indexOf("}");if(e<0)throw new h["a"]("Unmatched {.");a+="czm_"+t.substr(n+2,e-(n+2)),t=t.substr(e+1),n=t.indexOf("${")}}return a+=t,a}function z(e){const t=typeof e.value;return null===e.value?new D(d["a"].LITERAL_NULL,null):"boolean"===t?new D(d["a"].LITERAL_BOOLEAN,e.value):"number"===t?new D(d["a"].LITERAL_NUMBER,e.value):"string"===t?e.value.indexOf("${")>=0?new D(d["a"].VARIABLE_IN_STRING,e.value):new D(d["a"].LITERAL_STRING,U(e.value)):void 0}function G(e,t){const a=t.arguments,n=a.length;let r,i,o,s;if("MemberExpression"===t.callee.type){r=t.callee.property.name;const u=t.callee.object;if("test"===r||"exec"===r){if("regExp"!==u.callee.name)throw new h["a"](r+" is not a function.");return 0===n?"test"===r?new D(d["a"].LITERAL_BOOLEAN,!1):new D(d["a"].LITERAL_NULL,null):(o=Z(e,u),s=Z(e,a[0]),new D(d["a"].FUNCTION_CALL,r,o,s))}if("toString"===r)return i=Z(e,u),new D(d["a"].FUNCTION_CALL,r,i);throw new h["a"](`Unexpected function call "${r}".`)}if(r=t.callee.name,"color"===r){if(0===n)return new D(d["a"].LITERAL_COLOR,r);if(i=Z(e,a[0]),Object(u["a"])(a[1])){const t=Z(e,a[1]);return new D(d["a"].LITERAL_COLOR,r,[i,t])}return new D(d["a"].LITERAL_COLOR,r,[i])}if("rgb"===r||"hsl"===r){if(n<3)throw new h["a"](r+" requires three arguments.");return i=[Z(e,a[0]),Z(e,a[1]),Z(e,a[2])],new D(d["a"].LITERAL_COLOR,r,i)}if("rgba"===r||"hsla"===r){if(n<4)throw new h["a"](r+" requires four arguments.");return i=[Z(e,a[0]),Z(e,a[1]),Z(e,a[2]),Z(e,a[3])],new D(d["a"].LITERAL_COLOR,r,i)}if("vec2"===r||"vec3"===r||"vec4"===r){i=new Array(n);for(let t=0;t<n;++t)i[t]=Z(e,a[t]);return new D(d["a"].LITERAL_VECTOR,r,i)}if("isNaN"===r||"isFinite"===r)return 0===n?new D(d["a"].LITERAL_BOOLEAN,"isNaN"===r):(i=Z(e,a[0]),new D(d["a"].UNARY,r,i));if("isExactClass"===r||"isClass"===r){if(n<1||n>1)throw new h["a"](r+" requires exactly one argument.");return i=Z(e,a[0]),new D(d["a"].UNARY,r,i)}if("getExactClassName"===r){if(n>0)throw new h["a"](r+" does not take any argument.");return new D(d["a"].UNARY,r)}if(Object(u["a"])(E[r])){if(1!==n)throw new h["a"](r+" requires exactly one argument.");return i=Z(e,a[0]),new D(d["a"].UNARY,r,i)}if(Object(u["a"])(x[r])){if(2!==n)throw new h["a"](r+" requires exactly two arguments.");return o=Z(e,a[0]),s=Z(e,a[1]),new D(d["a"].BINARY,r,o,s)}if(Object(u["a"])(C[r])){if(3!==n)throw new h["a"](r+" requires exactly three arguments.");o=Z(e,a[0]),s=Z(e,a[1]);const t=Z(e,a[2]);return new D(d["a"].TERNARY,r,o,s,t)}if("Boolean"===r)return 0===n?new D(d["a"].LITERAL_BOOLEAN,!1):(i=Z(e,a[0]),new D(d["a"].UNARY,r,i));if("Number"===r)return 0===n?new D(d["a"].LITERAL_NUMBER,0):(i=Z(e,a[0]),new D(d["a"].UNARY,r,i));if("String"===r)return 0===n?new D(d["a"].LITERAL_STRING,""):(i=Z(e,a[0]),new D(d["a"].UNARY,r,i));if("regExp"===r)return q(e,t);throw new h["a"](`Unexpected function call "${r}".`)}function q(e,t){const a=t.arguments;if(0===a.length)return new D(d["a"].LITERAL_REGEX,new RegExp);const n=Z(e,a[0]);let r;if(a.length>1){const t=Z(e,a[1]);if(W(n)&&W(t)){try{r=new RegExp(U(String(n._value)),t._value)}catch(i){throw new h["a"](i)}return new D(d["a"].LITERAL_REGEX,r)}return new D(d["a"].REGEX,n,t)}if(W(n)){try{r=new RegExp(U(String(n._value)))}catch(i){throw new h["a"](i)}return new D(d["a"].LITERAL_REGEX,r)}return new D(d["a"].REGEX,n)}function V(e){if(Q(e.name)){const t=K(e.name);return"tiles3d_"===t.substr(0,8)?new D(d["a"].BUILTIN_VARIABLE,t):new D(d["a"].VARIABLE,t)}if("NaN"===e.name)return new D(d["a"].LITERAL_NUMBER,NaN);if("Infinity"===e.name)return new D(d["a"].LITERAL_NUMBER,1/0);if("undefined"===e.name)return new D(d["a"].LITERAL_UNDEFINED,void 0);throw new h["a"](e.name+" is not defined.")}function Y(e){const t=e.property.name;return"PI"===t?new D(d["a"].LITERAL_NUMBER,Math.PI):"E"===t?new D(d["a"].LITERAL_NUMBER,Math.E):void 0}function H(e){const t=e.property.name;if("POSITIVE_INFINITY"===t)return new D(d["a"].LITERAL_NUMBER,Number.POSITIVE_INFINITY)}function X(e,t){if("Math"===t.object.name)return Y(t);if("Number"===t.object.name)return H(t);let a;const n=Z(e,t.object);return t.computed?(a=Z(e,t.property),new D(d["a"].MEMBER,"brackets",n,a)):(a=new D(d["a"].LITERAL_STRING,t.property.name),new D(d["a"].MEMBER,"dot",n,a))}function W(e){return e._type>=d["a"].LITERAL_NULL}function Q(e){return"czm_"===e.substr(0,4)}function K(e){return e.substr(4)}function Z(e,t){let a,n,r,i;if("Literal"===t.type)a=z(t);else if("CallExpression"===t.type)a=G(e,t);else if("Identifier"===t.type)a=V(t);else if("UnaryExpression"===t.type){n=t.operator;const r=Z(e,t.argument);if(!(p.indexOf(n)>-1))throw new h["a"](`Unexpected operator "${n}".`);a=new D(d["a"].UNARY,n,r)}else if("BinaryExpression"===t.type){if(n=t.operator,r=Z(e,t.left),i=Z(e,t.right),!(g.indexOf(n)>-1))throw new h["a"](`Unexpected operator "${n}".`);a=new D(d["a"].BINARY,n,r,i)}else if("LogicalExpression"===t.type)n=t.operator,r=Z(e,t.left),i=Z(e,t.right),g.indexOf(n)>-1&&(a=new D(d["a"].BINARY,n,r,i));else if("ConditionalExpression"===t.type){const n=Z(e,t.test);r=Z(e,t.consequent),i=Z(e,t.alternate),a=new D(d["a"].CONDITIONAL,"?",r,i,n)}else if("MemberExpression"===t.type)a=X(e,t);else{if("ArrayExpression"!==t.type)throw"Compound"===t.type?new h["a"]("Provide exactly one expression."):new h["a"]("Cannot parse expression.");{const n=[];for(let a=0;a<t.elements.length;a++)n[a]=Z(e,t.elements[a]);a=new D(d["a"].ARRAY,n)}}return a}function J(e){e._type===d["a"].CONDITIONAL?e.evaluate=e._evaluateConditional:e._type===d["a"].FUNCTION_CALL?"test"===e._value?e.evaluate=e._evaluateRegExpTest:"exec"===e._value?e.evaluate=e._evaluateRegExpExec:"toString"===e._value&&(e.evaluate=e._evaluateToString):e._type===d["a"].UNARY?"!"===e._value?e.evaluate=e._evaluateNot:"-"===e._value?e.evaluate=e._evaluateNegative:"+"===e._value?e.evaluate=e._evaluatePositive:"isNaN"===e._value?e.evaluate=e._evaluateNaN:"isFinite"===e._value?e.evaluate=e._evaluateIsFinite:"isExactClass"===e._value?e.evaluate=e._evaluateIsExactClass:"isClass"===e._value?e.evaluate=e._evaluateIsClass:"getExactClassName"===e._value?e.evaluate=e._evaluateGetExactClassName:"Boolean"===e._value?e.evaluate=e._evaluateBooleanConversion:"Number"===e._value?e.evaluate=e._evaluateNumberConversion:"String"===e._value?e.evaluate=e._evaluateStringConversion:Object(u["a"])(E[e._value])&&(e.evaluate=te(e._value)):e._type===d["a"].BINARY?"+"===e._value?e.evaluate=e._evaluatePlus:"-"===e._value?e.evaluate=e._evaluateMinus:"*"===e._value?e.evaluate=e._evaluateTimes:"/"===e._value?e.evaluate=e._evaluateDivide:"%"===e._value?e.evaluate=e._evaluateMod:"==="===e._value?e.evaluate=e._evaluateEqualsStrict:"!=="===e._value?e.evaluate=e._evaluateNotEqualsStrict:"<"===e._value?e.evaluate=e._evaluateLessThan:"<="===e._value?e.evaluate=e._evaluateLessThanOrEquals:">"===e._value?e.evaluate=e._evaluateGreaterThan:">="===e._value?e.evaluate=e._evaluateGreaterThanOrEquals:"&&"===e._value?e.evaluate=e._evaluateAnd:"||"===e._value?e.evaluate=e._evaluateOr:"=~"===e._value?e.evaluate=e._evaluateRegExpMatch:"!~"===e._value?e.evaluate=e._evaluateRegExpNotMatch:Object(u["a"])(x[e._value])&&(e.evaluate=ae(e._value)):e._type===d["a"].TERNARY?e.evaluate=ne(e._value):e._type===d["a"].MEMBER?"brackets"===e._value?e.evaluate=e._evaluateMemberBrackets:e.evaluate=e._evaluateMemberDot:e._type===d["a"].ARRAY?e.evaluate=e._evaluateArray:e._type===d["a"].VARIABLE?e.evaluate=e._evaluateVariable:e._type===d["a"].VARIABLE_IN_STRING?e.evaluate=e._evaluateVariableString:e._type===d["a"].LITERAL_COLOR?e.evaluate=e._evaluateLiteralColor:e._type===d["a"].LITERAL_VECTOR?e.evaluate=e._evaluateLiteralVector:e._type===d["a"].LITERAL_STRING?e.evaluate=e._evaluateLiteralString:e._type===d["a"].REGEX?e.evaluate=e._evaluateRegExp:e._type===d["a"].BUILTIN_VARIABLE?"tiles3d_tileset_time"===e._value&&(e.evaluate=ee):e.evaluate=e._evaluateLiteral}function ee(e){return Object(u["a"])(e)?e.content.tileset.timeSinceLoad:0}function te(e){const t=E[e];return function(a){const n=this._left.evaluate(a);return t(e,n)}}function ae(e){const t=x[e];return function(a){const n=this._left.evaluate(a),r=this._right.evaluate(a);return t(e,n,r)}}function ne(e){const t=C[e];return function(a){const n=this._left.evaluate(a),r=this._right.evaluate(a),i=this._test.evaluate(a);return t(e,n,r,i)}}function re(e,t){if(Object(u["a"])(e))return e.getPropertyInherited(t)}function ie(e){return"feature"===e._value}function oe(e){const t=e._left,a=t.length;for(let s=0;s<a;++s)if(t[s]._type!==d["a"].LITERAL_NUMBER)return;const n=t[0]._value,r=t[1]._value,i=t[2]._value,o=4===a?t[3]._value:1;return s["a"].fromHsl(n,r,i,o,O)}function se(e){const t=e._left,a=t.length;for(let r=0;r<a;++r)if(t[r]._type!==d["a"].LITERAL_NUMBER)return;const n=O;return n.red=t[0]._value/255,n.green=t[1]._value/255,n.blue=t[2]._value/255,n.alpha=4===a?t[3]._value:1,n}function ue(e){return e%1===0?e.toFixed(1):e.toString()}function ce(e){const t=ue(e.red),a=ue(e.green),n=ue(e.blue);return`vec3(${t}, ${a}, ${n})`}function le(e){const t=ue(e.red),a=ue(e.green),n=ue(e.blue),r=ue(e.alpha);return`vec4(${t}, ${a}, ${n}, ${r})`}function he(e,t,a,n){const r=e.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=e[o].getShaderExpression(t,a,n);return i}function fe(e,t){return Object(u["a"])(t[e])?t[e]:m.NULL_SENTINEL}D.prototype._evaluateLiteral=function(){return this._value},D.prototype._evaluateLiteralColor=function(e){const t=O,a=this._left;if("color"===this._value)Object(u["a"])(a)?a.length>1?(s["a"].fromCssColorString(a[0].evaluate(e),t),t.alpha=a[1].evaluate(e)):s["a"].fromCssColorString(a[0].evaluate(e),t):s["a"].fromBytes(255,255,255,255,t);else if("rgb"===this._value)s["a"].fromBytes(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),255,t);else if("rgba"===this._value){const n=255*a[3].evaluate(e);s["a"].fromBytes(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),n,t)}else"hsl"===this._value?s["a"].fromHsl(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),1,t):"hsla"===this._value&&s["a"].fromHsl(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),a[3].evaluate(e),t);return i["a"].fromColor(t,_.getCartesian4())},D.prototype._evaluateLiteralVector=function(e){const t=_.getArray(),a=this._value,o=this._left,s=o.length;for(let l=0;l<s;++l){const s=o[l].evaluate(e);if("number"===typeof s)t.push(s);else if(s instanceof n["a"])t.push(s.x,s.y);else if(s instanceof r["a"])t.push(s.x,s.y,s.z);else{if(!(s instanceof i["a"]))throw new h["a"](`${a} argument must be a vector or number. Argument is ${s}.`);t.push(s.x,s.y,s.z,s.w)}}const u=t.length,c=parseInt(a.charAt(3));if(0===u)throw new h["a"](`Invalid ${a} constructor. No valid arguments.`);if(u<c&&u>1)throw new h["a"](`Invalid ${a} constructor. Not enough arguments.`);if(u>c&&s>1)throw new h["a"](`Invalid ${a} constructor. Too many arguments.`);if(1===u){const e=t[0];t.push(e,e,e)}return"vec2"===a?n["a"].fromArray(t,0,_.getCartesian2()):"vec3"===a?r["a"].fromArray(t,0,_.getCartesian3()):"vec4"===a?i["a"].fromArray(t,0,_.getCartesian4()):void 0},D.prototype._evaluateLiteralString=function(){return this._value},D.prototype._evaluateVariableString=function(e){let t=this._value,a=v.exec(t);while(null!==a){const n=a[0],r=a[1];let i=re(e,r);Object(u["a"])(i)||(i=""),t=t.replace(n,i),a=v.exec(t)}return t},D.prototype._evaluateVariable=function(e){return re(e,this._value)},D.prototype._evaluateMemberDot=function(e){if(ie(this._left))return re(e,this._right.evaluate(e));const t=this._left.evaluate(e);if(!Object(u["a"])(t))return;const a=this._right.evaluate(e);if(t instanceof n["a"]||t instanceof r["a"]||t instanceof i["a"]){if("r"===a)return t.x;if("g"===a)return t.y;if("b"===a)return t.z;if("a"===a)return t.w}return t[a]},D.prototype._evaluateMemberBrackets=function(e){if(ie(this._left))return re(e,this._right.evaluate(e));const t=this._left.evaluate(e);if(!Object(u["a"])(t))return;const a=this._right.evaluate(e);if(t instanceof n["a"]||t instanceof r["a"]||t instanceof i["a"]){if(0===a||"r"===a)return t.x;if(1===a||"g"===a)return t.y;if(2===a||"b"===a)return t.z;if(3===a||"a"===a)return t.w}return t[a]},D.prototype._evaluateArray=function(e){const t=[];for(let a=0;a<this._value.length;a++)t[a]=this._value[a].evaluate(e);return t},D.prototype._evaluateNot=function(e){const t=this._left.evaluate(e);if("boolean"!==typeof t)throw new h["a"](`Operator "!" requires a boolean argument. Argument is ${t}.`);return!t},D.prototype._evaluateNegative=function(e){const t=this._left.evaluate(e);if(t instanceof n["a"])return n["a"].negate(t,_.getCartesian2());if(t instanceof r["a"])return r["a"].negate(t,_.getCartesian3());if(t instanceof i["a"])return i["a"].negate(t,_.getCartesian4());if("number"===typeof t)return-t;throw new h["a"](`Operator "-" requires a vector or number argument. Argument is ${t}.`)},D.prototype._evaluatePositive=function(e){const t=this._left.evaluate(e);if(!(t instanceof n["a"]||t instanceof r["a"]||t instanceof i["a"]||"number"===typeof t))throw new h["a"](`Operator "+" requires a vector or number argument. Argument is ${t}.`);return t},D.prototype._evaluateLessThan=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new h["a"](`Operator "<" requires number arguments. Arguments are ${t} and ${a}.`);return t<a},D.prototype._evaluateLessThanOrEquals=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new h["a"](`Operator "<=" requires number arguments. Arguments are ${t} and ${a}.`);return t<=a},D.prototype._evaluateGreaterThan=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new h["a"](`Operator ">" requires number arguments. Arguments are ${t} and ${a}.`);return t>a},D.prototype._evaluateGreaterThanOrEquals=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new h["a"](`Operator ">=" requires number arguments. Arguments are ${t} and ${a}.`);return t>=a},D.prototype._evaluateOr=function(e){const t=this._left.evaluate(e);if("boolean"!==typeof t)throw new h["a"](`Operator "||" requires boolean arguments. First argument is ${t}.`);if(t)return!0;const a=this._right.evaluate(e);if("boolean"!==typeof a)throw new h["a"](`Operator "||" requires boolean arguments. Second argument is ${a}.`);return t||a},D.prototype._evaluateAnd=function(e){const t=this._left.evaluate(e);if("boolean"!==typeof t)throw new h["a"](`Operator "&&" requires boolean arguments. First argument is ${t}.`);if(!t)return!1;const a=this._right.evaluate(e);if("boolean"!==typeof a)throw new h["a"](`Operator "&&" requires boolean arguments. Second argument is ${a}.`);return t&&a},D.prototype._evaluatePlus=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].add(t,a,_.getCartesian2());if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].add(t,a,_.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].add(t,a,_.getCartesian4());if("string"===typeof t||"string"===typeof a)return t+a;if("number"===typeof t&&"number"===typeof a)return t+a;throw new h["a"](`Operator "+" requires vector or number arguments of matching types, or at least one string argument. Arguments are ${t} and ${a}.`)},D.prototype._evaluateMinus=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].subtract(t,a,_.getCartesian2());if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].subtract(t,a,_.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].subtract(t,a,_.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t-a;throw new h["a"](`Operator "-" requires vector or number arguments of matching types. Arguments are ${t} and ${a}.`)},D.prototype._evaluateTimes=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].multiplyComponents(t,a,_.getCartesian2());if(a instanceof n["a"]&&"number"===typeof t)return n["a"].multiplyByScalar(a,t,_.getCartesian2());if(t instanceof n["a"]&&"number"===typeof a)return n["a"].multiplyByScalar(t,a,_.getCartesian2());if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].multiplyComponents(t,a,_.getCartesian3());if(a instanceof r["a"]&&"number"===typeof t)return r["a"].multiplyByScalar(a,t,_.getCartesian3());if(t instanceof r["a"]&&"number"===typeof a)return r["a"].multiplyByScalar(t,a,_.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].multiplyComponents(t,a,_.getCartesian4());if(a instanceof i["a"]&&"number"===typeof t)return i["a"].multiplyByScalar(a,t,_.getCartesian4());if(t instanceof i["a"]&&"number"===typeof a)return i["a"].multiplyByScalar(t,a,_.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t*a;throw new h["a"](`Operator "*" requires vector or number arguments. If both arguments are vectors they must be matching types. Arguments are ${t} and ${a}.`)},D.prototype._evaluateDivide=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].divideComponents(t,a,_.getCartesian2());if(t instanceof n["a"]&&"number"===typeof a)return n["a"].divideByScalar(t,a,_.getCartesian2());if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].divideComponents(t,a,_.getCartesian3());if(t instanceof r["a"]&&"number"===typeof a)return r["a"].divideByScalar(t,a,_.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].divideComponents(t,a,_.getCartesian4());if(t instanceof i["a"]&&"number"===typeof a)return i["a"].divideByScalar(t,a,_.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t/a;throw new h["a"](`Operator "/" requires vector or number arguments of matching types, or a number as the second argument. Arguments are ${t} and ${a}.`)},D.prototype._evaluateMod=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].fromElements(t.x%a.x,t.y%a.y,_.getCartesian2());if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].fromElements(t.x%a.x,t.y%a.y,t.z%a.z,_.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].fromElements(t.x%a.x,t.y%a.y,t.z%a.z,t.w%a.w,_.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t%a;throw new h["a"](`Operator "%" requires vector or number arguments of matching types. Arguments are ${t} and ${a}.`)},D.prototype._evaluateEqualsStrict=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);return a instanceof n["a"]&&t instanceof n["a"]||a instanceof r["a"]&&t instanceof r["a"]||a instanceof i["a"]&&t instanceof i["a"]?t.equals(a):t===a},D.prototype._evaluateNotEqualsStrict=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);return a instanceof n["a"]&&t instanceof n["a"]||a instanceof r["a"]&&t instanceof r["a"]||a instanceof i["a"]&&t instanceof i["a"]?!t.equals(a):t!==a},D.prototype._evaluateConditional=function(e){const t=this._test.evaluate(e);if("boolean"!==typeof t)throw new h["a"](`Conditional argument of conditional expression must be a boolean. Argument is ${t}.`);return t?this._left.evaluate(e):this._right.evaluate(e)},D.prototype._evaluateNaN=function(e){return isNaN(this._left.evaluate(e))},D.prototype._evaluateIsFinite=function(e){return isFinite(this._left.evaluate(e))},D.prototype._evaluateIsExactClass=function(e){return!!Object(u["a"])(e)&&e.isExactClass(this._left.evaluate(e))},D.prototype._evaluateIsClass=function(e){return!!Object(u["a"])(e)&&e.isClass(this._left.evaluate(e))},D.prototype._evaluateGetExactClassName=function(e){if(Object(u["a"])(e))return e.getExactClassName()},D.prototype._evaluateBooleanConversion=function(e){return Boolean(this._left.evaluate(e))},D.prototype._evaluateNumberConversion=function(e){return Number(this._left.evaluate(e))},D.prototype._evaluateStringConversion=function(e){return String(this._left.evaluate(e))},D.prototype._evaluateRegExp=function(e){const t=this._value.evaluate(e);let a,n="";Object(u["a"])(this._left)&&(n=this._left.evaluate(e));try{a=new RegExp(t,n)}catch(r){throw new h["a"](r)}return a},D.prototype._evaluateRegExpTest=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"===typeof a))throw new h["a"](`RegExp.test requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${a}.`);return t.test(a)},D.prototype._evaluateRegExpMatch=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(t instanceof RegExp&&"string"===typeof a)return t.test(a);if(a instanceof RegExp&&"string"===typeof t)return a.test(t);throw new h["a"](`Operator "=~" requires one RegExp argument and one string argument. Arguments are ${t} and ${a}.`)},D.prototype._evaluateRegExpNotMatch=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(t instanceof RegExp&&"string"===typeof a)return!t.test(a);if(a instanceof RegExp&&"string"===typeof t)return!a.test(t);throw new h["a"](`Operator "!~" requires one RegExp argument and one string argument. Arguments are ${t} and ${a}.`)},D.prototype._evaluateRegExpExec=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"===typeof a))throw new h["a"](`RegExp.exec requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${a}.`);const n=t.exec(a);return Object(u["a"])(n)?n[1]:null},D.prototype._evaluateToString=function(e){const t=this._left.evaluate(e);if(t instanceof RegExp||t instanceof n["a"]||t instanceof r["a"]||t instanceof i["a"])return String(t);throw new h["a"](`Unexpected function call "${this._value}".`)},m.NULL_SENTINEL="czm_infinity",D.prototype.getShaderExpression=function(e,t,a){let n,r,i,o;const l=this._type;let f,_,p,g=this._value;switch(Object(u["a"])(this._left)&&(r=Array.isArray(this._left)?he(this._left,e,t,this):this._left.getShaderExpression(e,t,this)),Object(u["a"])(this._right)&&(i=this._right.getShaderExpression(e,t,this)),Object(u["a"])(this._test)&&(o=this._test.getShaderExpression(e,t,this)),Array.isArray(this._value)&&(g=he(this._value,e,t,this)),l){case d["a"].VARIABLE:if(ie(this))return;return fe(g,e);case d["a"].UNARY:if("Boolean"===g)return`bool(${r})`;if("Number"===g)return`float(${r})`;if("round"===g)return`floor(${r} + 0.5)`;if(Object(u["a"])(E[g]))return`${g}(${r})`;if("isNaN"===g)return`(${r} != ${r})`;if("isFinite"===g)return`(abs(${r}) < czm_infinity)`;if("String"===g||"isExactClass"===g||"isClass"===g||"getExactClassName"===g)throw new h["a"](`Error generating style shader: "${g}" is not supported.`);return g+r;case d["a"].BINARY:return"%"===g?`mod(${r}, ${i})`:"==="===g?`(${r} == ${i})`:"!=="===g?`(${r} != ${i})`:"atan2"===g?`atan(${r}, ${i})`:Object(u["a"])(x[g])?`${g}(${r}, ${i})`:`(${r} ${g} ${i})`;case d["a"].TERNARY:if(Object(u["a"])(C[g]))return`${g}(${r}, ${i}, ${o})`;break;case d["a"].CONDITIONAL:return`(${o} ? ${r} : ${i})`;case d["a"].MEMBER:return ie(this._left)?fe(i,e):"r"===i||"x"===i||"0.0"===i?r+"[0]":"g"===i||"y"===i||"1.0"===i?r+"[1]":"b"===i||"z"===i||"2.0"===i?r+"[2]":"a"===i||"w"===i||"3.0"===i?r+"[3]":`${r}[int(${i})]`;case d["a"].FUNCTION_CALL:throw new h["a"](`Error generating style shader: "${g}" is not supported.`);case d["a"].ARRAY:if(4===g.length)return`vec4(${g[0]}, ${g[1]}, ${g[2]}, ${g[3]})`;if(3===g.length)return`vec3(${g[0]}, ${g[1]}, ${g[2]})`;if(2===g.length)return`vec2(${g[0]}, ${g[1]})`;throw new h["a"]("Error generating style shader: Invalid array length. Array length should be 2, 3, or 4.");case d["a"].REGEX:throw new h["a"]("Error generating style shader: Regular expressions are not supported.");case d["a"].VARIABLE_IN_STRING:throw new h["a"]("Error generating style shader: Converting a variable to a string is not supported.");case d["a"].LITERAL_NULL:return m.NULL_SENTINEL;case d["a"].LITERAL_BOOLEAN:return g?"true":"false";case d["a"].LITERAL_NUMBER:return ue(g);case d["a"].LITERAL_STRING:if(Object(u["a"])(a)&&a._type===d["a"].MEMBER&&("r"===g||"g"===g||"b"===g||"a"===g||"x"===g||"y"===g||"z"===g||"w"===g||ie(a._left)))return g;if(n=s["a"].fromCssColorString(g,O),Object(u["a"])(n))return ce(n);throw new h["a"]("Error generating style shader: String literals are not supported.");case d["a"].LITERAL_COLOR:if(f=r,"color"===g){if(!Object(u["a"])(f))return"vec4(1.0)";if(f.length>1){const e=f[0],a=f[1];return"1.0"!==a&&(t.translucent=!0),`vec4(${e}, ${a})`}return`vec4(${f[0]}, 1.0)`}if("rgb"===g)return n=se(this),Object(u["a"])(n)?le(n):`vec4(${f[0]} / 255.0, ${f[1]} / 255.0, ${f[2]} / 255.0, 1.0)`;if("rgba"===g)return"1.0"!==f[3]&&(t.translucent=!0),n=se(this),Object(u["a"])(n)?le(n):`vec4(${f[0]} / 255.0, ${f[1]} / 255.0, ${f[2]} / 255.0, ${f[3]})`;if("hsl"===g)return n=oe(this),Object(u["a"])(n)?le(n):`vec4(czm_HSLToRGB(vec3(${f[0]}, ${f[1]}, ${f[2]})), 1.0)`;if("hsla"===g)return n=oe(this),Object(u["a"])(n)?(1!==n.alpha&&(t.translucent=!0),le(n)):("1.0"!==f[3]&&(t.translucent=!0),`vec4(czm_HSLToRGB(vec3(${f[0]}, ${f[1]}, ${f[2]})), ${f[3]})`);break;case d["a"].LITERAL_VECTOR:if(!Object(u["a"])(r))throw new c["a"]("left should always be defined for type ExpressionNodeType.LITERAL_VECTOR");_=r.length,p=g+"(";for(let e=0;e<_;++e)p+=r[e],e<_-1&&(p+=", ");return p+=")",p;case d["a"].LITERAL_REGEX:throw new h["a"]("Error generating style shader: Regular expressions are not supported.");case d["a"].LITERAL_UNDEFINED:return m.NULL_SENTINEL;case d["a"].BUILTIN_VARIABLE:if("tiles3d_tileset_time"===g)return"u_time"}},D.prototype.getVariables=function(e,t){let a,n,r;const i=this._type,o=this._value;if(Object(u["a"])(this._left))if(Array.isArray(this._left))for(a=this._left,n=a.length,r=0;r<n;++r)a[r].getVariables(e,this);else this._left.getVariables(e,this);if(Object(u["a"])(this._right)&&this._right.getVariables(e,this),Object(u["a"])(this._test)&&this._test.getVariables(e,this),Array.isArray(this._value))for(a=this._value,n=a.length,r=0;r<n;++r)a[r].getVariables(e,this);let s;switch(i){case d["a"].VARIABLE:ie(this)||e.push(o);break;case d["a"].VARIABLE_IN_STRING:s=v.exec(o);while(null!==s)e.push(s[1]),s=v.exec(o);break;case d["a"].LITERAL_STRING:Object(u["a"])(t)&&t._type===d["a"].MEMBER&&ie(t._left)&&e.push(o);break}},t["a"]=m},e919:function(e,t,a){"use strict";var n=a("1a5d"),r=a("c937"),i=a("e2a6"),o=a("b9eb"),s=a("9f38");function u(e){if(e=Object(n["a"])(e,n["a"].EMPTY_OBJECT),!Object(r["a"])(e.missingImageUrl))throw new i["a"]("options.missingImageUrl is required.");if(!Object(r["a"])(e.pixelsToCheck))throw new i["a"]("options.pixelsToCheck is required.");this._pixelsToCheck=e.pixelsToCheck,this._missingImagePixels=void 0,this._missingImageByteLength=void 0,this._isReady=!1;const t=s["a"].createIfNeeded(e.missingImageUrl),a=this;function u(t){Object(r["a"])(t.blob)&&(a._missingImageByteLength=t.blob.size);let n=Object(o["a"])(t);if(e.disableCheckIfAllPixelsAreTransparent){let a=!0;const r=t.width,i=e.pixelsToCheck;for(let e=0,t=i.length;a&&e<t;++e){const t=i[e],o=4*t.x+t.y*r,s=n[o+3];s>0&&(a=!1)}a&&(n=void 0)}a._missingImagePixels=n,a._isReady=!0}function c(){a._missingImagePixels=void 0,a._isReady=!0}t.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}).then(u).catch(c)}u.prototype.isReady=function(){return this._isReady},u.prototype.shouldDiscardImage=function(e){if(!this._isReady)throw new i["a"]("shouldDiscardImage must not be called before the discard policy is ready.");const t=this._pixelsToCheck,a=this._missingImagePixels;if(!Object(r["a"])(a))return!1;if(Object(r["a"])(e.blob)&&e.blob.size!==this._missingImageByteLength)return!1;const n=Object(o["a"])(e),s=e.width;for(let r=0,i=t.length;r<i;++r){const e=t[r],i=4*e.x+e.y*s;for(let t=0;t<4;++t){const e=i+t;if(n[e]!==a[e])return!1}}return!0},t["a"]=u},ee78:function(e,t,a){"use strict";var n=a("c937"),r=a("d5cf"),i=a("5027"),o=a("b3ce");function s(){}const u=/\bgl_FragDepthEXT\b/,c=/\bdiscard\b/;function l(e,t){let a=e.shaderCache.getDerivedShaderProgram(t,"depthOnly");if(!Object(n["a"])(a)){const n=t._attributeLocations;let r,i=t.fragmentShaderSource,s=!1;const l=i.sources;let h=l.length;for(r=0;r<h;++r)if(u.test(l[r])||c.test(l[r])){s=!0;break}let f=!1;const d=i.defines;for(h=d.length,r=0;r<h;++r)if("LOG_DEPTH"===d[r]){f=!0;break}let m;s||f?!s&&f&&(m="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\nvoid main() \n{ \n    gl_FragColor = vec4(1.0); \n    czm_writeLogDepth(); \n} \n",i=new o["a"]({defines:["LOG_DEPTH"],sources:[m]})):(m="void main() \n{ \n    gl_FragColor = vec4(1.0); \n} \n",i=new o["a"]({sources:[m]})),a=e.shaderCache.createDerivedShaderProgram(t,"depthOnly",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:i,attributeLocations:n})}return a}function h(e,t){const a=e._depthOnlyRenderStateCache;let r=a[t.id];if(!Object(n["a"])(r)){const e=i["a"].getState(t);e.depthMask=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1},r=i["a"].fromCache(e),a[t.id]=r}return r}s.createDepthOnlyDerivedCommand=function(e,t,a,i){let o,s;return Object(n["a"])(i)||(i={}),Object(n["a"])(i.depthOnlyCommand)&&(o=i.depthOnlyCommand.shaderProgram,s=i.depthOnlyCommand.renderState),i.depthOnlyCommand=r["a"].shallowClone(t,i.depthOnlyCommand),Object(n["a"])(o)&&i.shaderProgramId===t.shaderProgram.id?(i.depthOnlyCommand.shaderProgram=o,i.depthOnlyCommand.renderState=s):(i.depthOnlyCommand.shaderProgram=l(a,t.shaderProgram),i.depthOnlyCommand.renderState=h(e,t.renderState),i.shaderProgramId=t.shaderProgram.id),i};const f=/\s+czm_writeLogDepth\(/,d=/\s+czm_vertexLogDepth\(/,m=/\s*#extension\s+GL_EXT_frag_depth\s*:\s*enable/;function _(e,t){let a=e.shaderCache.getDerivedShaderProgram(t,"logDepth");if(!Object(n["a"])(a)){const r=t._attributeLocations,i=t.vertexShaderSource.clone(),s=t.fragmentShaderSource.clone();let u,c;i.defines=Object(n["a"])(i.defines)?i.defines.slice(0):[],i.defines.push("LOG_DEPTH"),s.defines=Object(n["a"])(s.defines)?s.defines.slice(0):[],s.defines.push("LOG_DEPTH");let l=!1,h=i.sources,_=h.length;for(u=0;u<_;++u)if(d.test(h[u])){l=!0;break}if(!l){for(u=0;u<_;++u)h[u]=o["a"].replaceMain(h[u],"czm_log_depth_main");c="\n\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_vertexLogDepth(); \n} \n",h.push(c)}for(h=s.sources,_=h.length,l=!1,u=0;u<_;++u)f.test(h[u])&&(l=!0);-1!==s.defines.indexOf("LOG_DEPTH_WRITE")&&(l=!0);let p=!0;for(u=0;u<_;++u)m.test(h[u])&&(p=!1);let g="";if(p&&(g+="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n"),!l){for(u=0;u<_;u++)h[u]=o["a"].replaceMain(h[u],"czm_log_depth_main");g+="\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_writeLogDepth(); \n} \n"}h.push(g),a=e.shaderCache.createDerivedShaderProgram(t,"logDepth",{vertexShaderSource:i,fragmentShaderSource:s,attributeLocations:r})}return a}function p(e,t,a){let r=e.shaderCache.getDerivedShaderProgram(t,"pick");if(!Object(n["a"])(r)){const n=t._attributeLocations;let i=t.fragmentShaderSource;const s=i.sources,u=s.length,c=`void main() \n{ \n    czm_non_pick_main(); \n    if (gl_FragColor.a == 0.0) { \n        discard; \n    } \n    gl_FragColor = ${a}; \n} \n`,l=new Array(u+1);for(let e=0;e<u;++e)l[e]=o["a"].replaceMain(s[e],"czm_non_pick_main");l[u]=c,i=new o["a"]({sources:l,defines:i.defines}),r=e.shaderCache.createDerivedShaderProgram(t,"pick",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:i,attributeLocations:n})}return r}function g(e,t){const a=e.picking.pickRenderStateCache;let r=a[t.id];if(!Object(n["a"])(r)){const e=i["a"].getState(t);e.blending.enabled=!1,e.depthMask=!0,r=i["a"].fromCache(e),a[t.id]=r}return r}function v(e,t){let a=e.shaderCache.getDerivedShaderProgram(t,"HDR");if(!Object(n["a"])(a)){const r=t._attributeLocations,i=t.vertexShaderSource.clone(),o=t.fragmentShaderSource.clone();i.defines=Object(n["a"])(i.defines)?i.defines.slice(0):[],i.defines.push("HDR"),o.defines=Object(n["a"])(o.defines)?o.defines.slice(0):[],o.defines.push("HDR"),a=e.shaderCache.createDerivedShaderProgram(t,"HDR",{vertexShaderSource:i,fragmentShaderSource:o,attributeLocations:r})}return a}s.createLogDepthCommand=function(e,t,a){let i;return Object(n["a"])(a)||(a={}),Object(n["a"])(a.command)&&(i=a.command.shaderProgram),a.command=r["a"].shallowClone(e,a.command),Object(n["a"])(i)&&a.shaderProgramId===e.shaderProgram.id?a.command.shaderProgram=i:(a.command.shaderProgram=_(t,e.shaderProgram),a.shaderProgramId=e.shaderProgram.id),a},s.createPickDerivedCommand=function(e,t,a,i){let o,s;return Object(n["a"])(i)||(i={}),Object(n["a"])(i.pickCommand)&&(o=i.pickCommand.shaderProgram,s=i.pickCommand.renderState),i.pickCommand=r["a"].shallowClone(t,i.pickCommand),Object(n["a"])(o)&&i.shaderProgramId===t.shaderProgram.id?(i.pickCommand.shaderProgram=o,i.pickCommand.renderState=s):(i.pickCommand.shaderProgram=p(a,t.shaderProgram,t.pickId),i.pickCommand.renderState=g(e,t.renderState),i.shaderProgramId=t.shaderProgram.id),i},s.createHdrCommand=function(e,t,a){let i;return Object(n["a"])(a)||(a={}),Object(n["a"])(a.command)&&(i=a.command.shaderProgram),a.command=r["a"].shallowClone(e,a.command),Object(n["a"])(i)&&a.shaderProgramId===e.shaderProgram.id?a.command.shaderProgram=i:(a.command.shaderProgram=v(t,e.shaderProgram),a.shaderProgramId=e.shaderProgram.id),a},t["a"]=s},f9d8:function(e,t,a){"use strict";var n=a("8656"),r=a("90c5"),i=a("dde0"),o=a("2fad"),s=a("1a5d"),u=a("c937"),c=a("21b7"),l=a("e2a6"),h=a("722e"),f=a("514d"),d=a("6ba7"),m=a("d5cf"),_=a("51f2"),p=a("5027"),g=a("8f7d"),v=a("b3ce"),b=a("dc15"),y=a("0f7c"),w=a("ea7f"),O=a("da23"),E=a("ddd8"),x=a("46bd"),C=a("dc6c");const S={position:0};function A(e){e=Object(s["a"])(e,s["a"].EMPTY_OBJECT),this.center=i["a"].clone(Object(s["a"])(e.center,i["a"].ZERO)),this._center=new i["a"],this.radii=i["a"].clone(e.radii),this._radii=new i["a"],this._oneOverEllipsoidRadiiSquared=new i["a"],this._boundingSphere=new n["a"],this.modelMatrix=h["a"].clone(Object(s["a"])(e.modelMatrix,h["a"].IDENTITY)),this._modelMatrix=new h["a"],this._computedModelMatrix=new h["a"],this.show=Object(s["a"])(e.show,!0),this.material=Object(s["a"])(e.material,x["a"].fromType(x["a"].ColorType)),this._material=void 0,this._translucent=void 0,this.id=e.id,this._id=void 0,this.debugShowBoundingVolume=Object(s["a"])(e.debugShowBoundingVolume,!1),this.onlySunLighting=Object(s["a"])(e.onlySunLighting,!1),this._onlySunLighting=!1,this._depthTestEnabled=Object(s["a"])(e.depthTestEnabled,!0),this._useLogDepth=!1,this._sp=void 0,this._rs=void 0,this._va=void 0,this._pickSP=void 0,this._pickId=void 0,this._colorCommand=new m["a"]({owner:Object(s["a"])(e._owner,this)}),this._pickCommand=new m["a"]({owner:Object(s["a"])(e._owner,this),pickOnly:!0});const t=this;this._uniforms={u_radii:function(){return t.radii},u_oneOverEllipsoidRadiiSquared:function(){return t._oneOverEllipsoidRadiiSquared}},this._pickUniforms={czm_pickColor:function(){return t._pickId.color}}}function L(e){let t=e.cache.ellipsoidPrimitive_vertexArray;if(Object(u["a"])(t))return t;const a=r["a"].createGeometry(r["a"].fromDimensions({dimensions:new i["a"](2,2,2),vertexFormat:f["a"].POSITION_ONLY}));return t=b["a"].fromGeometry({context:e,geometry:a,attributeLocations:S,bufferUsage:d["a"].STATIC_DRAW,interleave:!0}),e.cache.ellipsoidPrimitive_vertexArray=t,t}const R="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n";A.prototype.update=function(e){if(!this.show||e.mode!==C["a"].SCENE3D||!Object(u["a"])(this.center)||!Object(u["a"])(this.radii))return;if(!Object(u["a"])(this.material))throw new l["a"]("this.material must be defined.");const t=e.context,a=this.material.isTranslucent(),r=this._translucent!==a;Object(u["a"])(this._rs)&&!r||(this._translucent=a,this._rs=p["a"].fromCache({cull:{enabled:!0,face:E["a"].FRONT},depthTest:{enabled:this._depthTestEnabled},depthMask:!a&&t.fragmentDepth,blending:a?O["a"].ALPHA_BLEND:void 0})),Object(u["a"])(this._va)||(this._va=L(t));let s=!1;const c=this.radii;if(!i["a"].equals(this._radii,c)){i["a"].clone(c,this._radii);const e=this._oneOverEllipsoidRadiiSquared;e.x=1/(c.x*c.x),e.y=1/(c.y*c.y),e.z=1/(c.z*c.z),s=!0}h["a"].equals(this.modelMatrix,this._modelMatrix)&&i["a"].equals(this.center,this._center)||(h["a"].clone(this.modelMatrix,this._modelMatrix),i["a"].clone(this.center,this._center),h["a"].multiplyByTranslation(this.modelMatrix,this.center,this._computedModelMatrix),s=!0),s&&(i["a"].clone(i["a"].ZERO,this._boundingSphere.center),this._boundingSphere.radius=i["a"].maximumComponent(c),n["a"].transform(this._boundingSphere,this._computedModelMatrix,this._boundingSphere));const f=this._material!==this.material;this._material=this.material,this._material.update(t);const d=this.onlySunLighting!==this._onlySunLighting;this._onlySunLighting=this.onlySunLighting;const m=e.useLogDepth,b=this._useLogDepth!==m;this._useLogDepth=m;const x=this._colorCommand;let A,T;(f||d||r||b)&&(A=new v["a"]({sources:[w["a"]]}),T=new v["a"]({sources:[this.material.shaderSource,y["a"]]}),this.onlySunLighting&&T.defines.push("ONLY_SUN_LIGHTING"),!a&&t.fragmentDepth&&T.defines.push("WRITE_DEPTH"),this._useLogDepth&&(A.defines.push("LOG_DEPTH"),T.defines.push("LOG_DEPTH"),T.sources.push(R)),this._sp=g["a"].replaceCache({context:t,shaderProgram:this._sp,vertexShaderSource:A,fragmentShaderSource:T,attributeLocations:S}),x.vertexArray=this._va,x.renderState=this._rs,x.shaderProgram=this._sp,x.uniformMap=Object(o["a"])(this._uniforms,this.material._uniforms),x.executeInClosestFrustum=a);const I=e.commandList,N=e.passes;if(N.render&&(x.boundingVolume=this._boundingSphere,x.debugShowBoundingVolume=this.debugShowBoundingVolume,x.modelMatrix=this._computedModelMatrix,x.pass=a?_["a"].TRANSLUCENT:_["a"].OPAQUE,I.push(x)),N.pick){const e=this._pickCommand;Object(u["a"])(this._pickId)&&this._id===this.id||(this._id=this.id,this._pickId=this._pickId&&this._pickId.destroy(),this._pickId=t.createPickId({primitive:this,id:this.id})),(f||d||!Object(u["a"])(this._pickSP)||b)&&(A=new v["a"]({sources:[w["a"]]}),T=new v["a"]({sources:[this.material.shaderSource,y["a"]],pickColorQualifier:"uniform"}),this.onlySunLighting&&T.defines.push("ONLY_SUN_LIGHTING"),!a&&t.fragmentDepth&&T.defines.push("WRITE_DEPTH"),this._useLogDepth&&(A.defines.push("LOG_DEPTH"),T.defines.push("LOG_DEPTH"),T.sources.push(R)),this._pickSP=g["a"].replaceCache({context:t,shaderProgram:this._pickSP,vertexShaderSource:A,fragmentShaderSource:T,attributeLocations:S}),e.vertexArray=this._va,e.renderState=this._rs,e.shaderProgram=this._pickSP,e.uniformMap=Object(o["a"])(Object(o["a"])(this._uniforms,this._pickUniforms),this.material._uniforms),e.executeInClosestFrustum=a),e.boundingVolume=this._boundingSphere,e.modelMatrix=this._computedModelMatrix,e.pass=a?_["a"].TRANSLUCENT:_["a"].OPAQUE,I.push(e)}},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._pickSP=this._pickSP&&this._pickSP.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),Object(c["a"])(this)},t["a"]=A}}]);