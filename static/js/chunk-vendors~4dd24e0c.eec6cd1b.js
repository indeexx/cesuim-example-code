(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors~4dd24e0c"],{"0b24":function(t,e,i){"use strict";var n=i("4051"),o=i("c937");function r(t,e){this._content=t,this._batchId=e,this._color=void 0}Object.defineProperties(r.prototype,{show:{get:function(){return this._content.batchTable.getShow(this._batchId)},set:function(t){this._content.batchTable.setShow(this._batchId,t)}},color:{get:function(){return Object(o["a"])(this._color)||(this._color=new n["a"]),this._content.batchTable.getColor(this._batchId,this._color)},set:function(t){this._content.batchTable.setColor(this._batchId,t)}},polylinePositions:{get:function(){if(Object(o["a"])(this._content.getPolylinePositions))return this._content.getPolylinePositions(this._batchId)}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},featureId:{get:function(){return this._batchId}},pickId:{get:function(){return this._content.batchTable.getPickColor(this._batchId)}}}),r.prototype.hasProperty=function(t){return this._content.batchTable.hasProperty(this._batchId,t)},r.prototype.getPropertyNames=function(t){return this._content.batchTable.getPropertyNames(this._batchId,t)},r.prototype.getProperty=function(t){return this._content.batchTable.getProperty(this._batchId,t)},r.getPropertyInherited=function(t,e,i){const n=t.batchTable;if(Object(o["a"])(n)){if(n.hasPropertyBySemantic(e,i))return n.getPropertyBySemantic(e,i);if(n.hasProperty(e,i))return n.getProperty(e,i)}const r=t.metadata;if(Object(o["a"])(r)){if(r.hasPropertyBySemantic(i))return r.getPropertyBySemantic(i);if(r.hasProperty(i))return r.getProperty(i)}const a=t.tile,s=a.metadata;if(Object(o["a"])(s)){if(s.hasPropertyBySemantic(i))return s.getPropertyBySemantic(i);if(s.hasProperty(i))return s.getProperty(i)}let c;if(Object(o["a"])(a.implicitSubtree)&&(c=a.implicitSubtree.metadata),Object(o["a"])(c)){if(c.hasPropertyBySemantic(i))return c.getPropertyBySemantic(i);if(c.hasProperty(i))return c.getProperty(i)}const l=Object(o["a"])(t.group)?t.group.metadata:void 0;if(Object(o["a"])(l)){if(l.hasPropertyBySemantic(i))return l.getPropertyBySemantic(i);if(l.hasProperty(i))return l.getProperty(i)}const u=t.tileset.metadata;if(Object(o["a"])(u)){if(u.hasPropertyBySemantic(i))return u.getPropertyBySemantic(i);if(u.hasProperty(i))return u.getProperty(i)}},r.prototype.getPropertyInherited=function(t){return r.getPropertyInherited(this._content,this._batchId,t)},r.prototype.setProperty=function(t,e){this._content.batchTable.setProperty(this._batchId,t,e),this._content.featurePropertiesDirty=!0},r.prototype.isExactClass=function(t){return this._content.batchTable.isExactClass(this._batchId,t)},r.prototype.isClass=function(t){return this._content.batchTable.isClass(this._batchId,t)},r.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)},e["a"]=r},"2a3b":function(t,e,i){"use strict";const n={HIGHLIGHT:0,REPLACE:1,MIX:2};e["a"]=Object.freeze(n)},"3b37":function(t,e,i){"use strict";const n={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5};e["a"]=Object.freeze(n)},"466f":function(t,e,i){"use strict";const n={ADD:0,REPLACE:1};e["a"]=Object.freeze(n)},"4b41":function(t,e,i){"use strict";var n=i("8dd9"),o=i("5b3c");const r={RENDER:0,PICK:1,SHADOW:2,PRELOAD:3,PRELOAD_FLIGHT:4,REQUEST_RENDER_MODE_DEFER_CHECK:5,MOST_DETAILED_PRELOAD:6,MOST_DETAILED_PICK:7,NUMBER_OF_PASSES:8},a=new Array(r.NUMBER_OF_PASSES);a[r.RENDER]=Object.freeze({traversal:o["a"],isRender:!0,requestTiles:!0,ignoreCommands:!1}),a[r.PICK]=Object.freeze({traversal:o["a"],isRender:!1,requestTiles:!1,ignoreCommands:!1}),a[r.SHADOW]=Object.freeze({traversal:o["a"],isRender:!1,requestTiles:!0,ignoreCommands:!1}),a[r.PRELOAD]=Object.freeze({traversal:o["a"],isRender:!1,requestTiles:!0,ignoreCommands:!0}),a[r.PRELOAD_FLIGHT]=Object.freeze({traversal:o["a"],isRender:!1,requestTiles:!0,ignoreCommands:!0}),a[r.REQUEST_RENDER_MODE_DEFER_CHECK]=Object.freeze({traversal:o["a"],isRender:!1,requestTiles:!0,ignoreCommands:!0}),a[r.MOST_DETAILED_PRELOAD]=Object.freeze({traversal:n["a"],isRender:!1,requestTiles:!0,ignoreCommands:!0}),a[r.MOST_DETAILED_PICK]=Object.freeze({traversal:n["a"],isRender:!1,requestTiles:!1,ignoreCommands:!1}),r.getPassOptions=function(t){return a[t]},e["a"]=Object.freeze(r)},"5ae5":function(t,e,i){"use strict";var n=i("8d54"),o=i("4051"),r=i("1a5d"),a=i("c937"),s=i("0b24"),c=i("9965");function l(t,e,i,n,o){this._content=t,this._billboard=i,this._label=n,this._polyline=o,this._batchId=e,this._billboardImage=void 0,this._billboardColor=void 0,this._billboardOutlineColor=void 0,this._billboardOutlineWidth=void 0,this._billboardSize=void 0,this._pointSize=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._heightOffset=void 0,this._pickIds=new Array(3),h(this)}const u=new n["a"];function h(t){const e=t._billboard;if(Object(a["a"])(t._billboardImage)&&t._billboardImage!==e.image)return void(e.image=t._billboardImage);if(Object(a["a"])(t._billboardImage))return;const i=Object(r["a"])(t._color,l.defaultColor),n=Object(r["a"])(t._pointOutlineColor,l.defaultPointOutlineColor),s=Object(r["a"])(t._pointOutlineWidth,l.defaultPointOutlineWidth),u=Object(r["a"])(t._pointSize,l.defaultPointSize),h=t._billboardColor,d=t._billboardOutlineColor,_=t._billboardOutlineWidth,f=t._billboardSize;if(o["a"].equals(i,h)&&o["a"].equals(n,d)&&s===_&&u===f)return;t._billboardColor=o["a"].clone(i,t._billboardColor),t._billboardOutlineColor=o["a"].clone(n,t._billboardOutlineColor),t._billboardOutlineWidth=s,t._billboardSize=u;const b=i.alpha,p=i.toCssColorString(),y=n.toCssColorString(),m=JSON.stringify([p,u,y,s]);e.setImage(m,Object(c["a"])(b,p,y,s,u))}Object.defineProperties(l.prototype,{show:{get:function(){return this._label.show},set:function(t){this._label.show=t,this._billboard.show=t,this._polyline.show=t}},color:{get:function(){return this._color},set:function(t){this._color=o["a"].clone(t,this._color),h(this)}},pointSize:{get:function(){return this._pointSize},set:function(t){this._pointSize=t,h(this)}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(t){this._pointOutlineColor=o["a"].clone(t,this._pointOutlineColor),h(this)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(t){this._pointOutlineWidth=t,h(this)}},labelColor:{get:function(){return this._label.fillColor},set:function(t){this._label.fillColor=t,this._polyline.show=this._label.show&&t.alpha>0}},labelOutlineColor:{get:function(){return this._label.outlineColor},set:function(t){this._label.outlineColor=t}},labelOutlineWidth:{get:function(){return this._label.outlineWidth},set:function(t){this._label.outlineWidth=t}},font:{get:function(){return this._label.font},set:function(t){this._label.font=t}},labelStyle:{get:function(){return this._label.style},set:function(t){this._label.style=t}},labelText:{get:function(){return this._label.text},set:function(t){Object(a["a"])(t)||(t=""),this._label.text=t}},backgroundColor:{get:function(){return this._label.backgroundColor},set:function(t){this._label.backgroundColor=t}},backgroundPadding:{get:function(){return this._label.backgroundPadding},set:function(t){this._label.backgroundPadding=t}},backgroundEnabled:{get:function(){return this._label.showBackground},set:function(t){this._label.showBackground=t}},scaleByDistance:{get:function(){return this._label.scaleByDistance},set:function(t){this._label.scaleByDistance=t,this._billboard.scaleByDistance=t}},translucencyByDistance:{get:function(){return this._label.translucencyByDistance},set:function(t){this._label.translucencyByDistance=t,this._billboard.translucencyByDistance=t}},distanceDisplayCondition:{get:function(){return this._label.distanceDisplayCondition},set:function(t){this._label.distanceDisplayCondition=t,this._polyline.distanceDisplayCondition=t,this._billboard.distanceDisplayCondition=t}},heightOffset:{get:function(){return this._heightOffset},set:function(t){const e=Object(r["a"])(this._heightOffset,0),i=this._content.tileset.ellipsoid,n=i.cartesianToCartographic(this._billboard.position,u);n.height=n.height-e+t;const o=i.cartographicToCartesian(n);this._billboard.position=o,this._label.position=this._billboard.position,this._polyline.positions=[this._polyline.positions[0],o],this._heightOffset=t}},anchorLineEnabled:{get:function(){return this._polyline.show},set:function(t){this._polyline.show=t}},anchorLineColor:{get:function(){return this._polyline.material.uniforms.color},set:function(t){this._polyline.material.uniforms.color=o["a"].clone(t,this._polyline.material.uniforms.color)}},image:{get:function(){return this._billboardImage},set:function(t){const e=this._billboardImage!==t;this._billboardImage=t,e&&h(this)}},disableDepthTestDistance:{get:function(){return this._label.disableDepthTestDistance},set:function(t){this._label.disableDepthTestDistance=t,this._billboard.disableDepthTestDistance=t}},horizontalOrigin:{get:function(){return this._billboard.horizontalOrigin},set:function(t){this._billboard.horizontalOrigin=t}},verticalOrigin:{get:function(){return this._billboard.verticalOrigin},set:function(t){this._billboard.verticalOrigin=t}},labelHorizontalOrigin:{get:function(){return this._label.horizontalOrigin},set:function(t){this._label.horizontalOrigin=t}},labelVerticalOrigin:{get:function(){return this._label.verticalOrigin},set:function(t){this._label.verticalOrigin=t}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},pickIds:{get:function(){const t=this._pickIds;return t[0]=this._billboard.pickId,t[1]=this._label.pickId,t[2]=this._polyline.pickId,t}}}),l.defaultColor=o["a"].WHITE,l.defaultPointOutlineColor=o["a"].BLACK,l.defaultPointOutlineWidth=0,l.defaultPointSize=8,l.prototype.hasProperty=function(t){return this._content.batchTable.hasProperty(this._batchId,t)},l.prototype.getPropertyNames=function(t){return this._content.batchTable.getPropertyNames(this._batchId,t)},l.prototype.getProperty=function(t){return this._content.batchTable.getProperty(this._batchId,t)},l.prototype.getPropertyInherited=function(t){return s["a"].getPropertyInherited(this._content,this._batchId,t)},l.prototype.setProperty=function(t,e){this._content.batchTable.setProperty(this._batchId,t,e),this._content.featurePropertiesDirty=!0},l.prototype.isExactClass=function(t){return this._content.batchTable.isExactClass(this._batchId,t)},l.prototype.isClass=function(t){return this._content.batchTable.isClass(this._batchId,t)},l.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)},e["a"]=l},"666e":function(t,e,i){"use strict";var n=i("cbf0"),o=i("1a5d"),r=i("c937");function a(t,e){this.json=t,this.buffer=e,this._cachedTypedArrays={},this.featuresLength=0}function s(t,e,i,o,a,s){const c=t._cachedTypedArrays;let l=c[e];return Object(r["a"])(l)||(l=n["a"].createArrayBufferView(i,t.buffer.buffer,t.buffer.byteOffset+s,a*o),c[e]=l),l}function c(t,e,i,o){const a=t._cachedTypedArrays;let s=a[e];return Object(r["a"])(s)||(s=n["a"].createTypedArray(i,o),a[e]=s),s}a.prototype.getGlobalProperty=function(t,e,i){const a=this.json[t];if(Object(r["a"])(a))return Object(r["a"])(a.byteOffset)?(e=Object(o["a"])(e,n["a"].UNSIGNED_INT),i=Object(o["a"])(i,1),s(this,t,e,i,1,a.byteOffset)):a},a.prototype.hasProperty=function(t){return Object(r["a"])(this.json[t])},a.prototype.getPropertyArray=function(t,e,i){const o=this.json[t];if(Object(r["a"])(o))return Object(r["a"])(o.byteOffset)?(Object(r["a"])(o.componentType)&&(e=n["a"].fromName(o.componentType)),s(this,t,e,i,this.featuresLength,o.byteOffset)):c(this,t,e,o)},a.prototype.getProperty=function(t,e,i,n,o){const a=this.json[t];if(!Object(r["a"])(a))return;const s=this.getPropertyArray(t,e,i);if(1===i)return s[n];for(let r=0;r<i;++r)o[r]=s[i*n+r];return o},e["a"]=a},"67a6":function(t,e,i){"use strict";const n={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0};e["a"]=Object.freeze(n)},"67bc":function(t,e,i){"use strict";const n={BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",COMPOSITE:"cmpt",POINT_CLOUD:"pnts",VECTOR:"vctr",GEOMETRY:"geom",GLTF:"gltf",GLTF_BINARY:"glb",IMPLICIT_SUBTREE:"subt",IMPLICIT_SUBTREE_JSON:"subtreeJson",EXTERNAL_TILESET:"externalTileset",MULTIPLE_CONTENT:"multipleContent",isBinaryFormat:function(t){switch(t){case n.BATCHED_3D_MODEL:case n.INSTANCED_3D_MODEL:case n.COMPOSITE:case n.POINT_CLOUD:case n.VECTOR:case n.GEOMETRY:case n.IMPLICIT_SUBTREE:case n.GLTF_BINARY:return!0;default:return!1}}};e["a"]=Object.freeze(n)},7856:function(t,e,i){"use strict";var n=i("dde0"),o=i("ae9b"),r=i("67a6"),a=i("b743"),s=i("6d96");const c={},l=new n["a"];c.checkChildrenWithinParent=function(t){o["a"].typeOf.object("tile",t);const e=t.children,i=e.length,c=t.boundingVolume;if(c instanceof s["a"]||c instanceof a["a"]){const o=c._orientedBoundingBox;t._optimChildrenWithinParent=r["a"].USE_OPTIMIZATION;for(let c=0;c<i;++c){const i=e[c],u=i.boundingVolume;if(!(u instanceof s["a"]||u instanceof a["a"])){t._optimChildrenWithinParent=r["a"].SKIP_OPTIMIZATION;break}const h=u._orientedBoundingBox,d=n["a"].subtract(h.center,o.center,l),_=n["a"].magnitude(d);n["a"].divideByScalar(d,_,d);const f=Math.abs(o.halfAxes[0]*d.x)+Math.abs(o.halfAxes[1]*d.y)+Math.abs(o.halfAxes[2]*d.z)+Math.abs(o.halfAxes[3]*d.x)+Math.abs(o.halfAxes[4]*d.y)+Math.abs(o.halfAxes[5]*d.z)+Math.abs(o.halfAxes[6]*d.x)+Math.abs(o.halfAxes[7]*d.y)+Math.abs(o.halfAxes[8]*d.z),b=Math.abs(h.halfAxes[0]*d.x)+Math.abs(h.halfAxes[1]*d.y)+Math.abs(h.halfAxes[2]*d.z)+Math.abs(h.halfAxes[3]*d.x)+Math.abs(h.halfAxes[4]*d.y)+Math.abs(h.halfAxes[5]*d.z)+Math.abs(h.halfAxes[6]*d.x)+Math.abs(h.halfAxes[7]*d.y)+Math.abs(h.halfAxes[8]*d.z);if(f<=b+_){t._optimChildrenWithinParent=r["a"].SKIP_OPTIMIZATION;break}}}return t._optimChildrenWithinParent===r["a"].USE_OPTIMIZATION},e["a"]=c},8131:function(t,e,i){"use strict";var n=i("752a"),o=i("6c64"),r=i("91be"),a=i("bc37"),s=i("3293"),c=i("49d8"),l=i("3ca8"),u=i("ac0d"),h=i("e2aa"),d=i("63a1");const _={b3dm:function(t,e,i,o,r){return t.enableModelExperimental?d["a"].fromB3dm(t,e,i,o,r):new n["a"](t,e,i,o,r)},pnts:function(t,e,i,n,o){return t.enableModelExperimental?d["a"].fromPnts(t,e,i,n,o):new c["a"](t,e,i,n,o)},i3dm:function(t,e,i,n,o){return t.enableModelExperimental?d["a"].fromI3dm(t,e,i,n,o):new s["a"](t,e,i,n,o)},cmpt:function(t,e,i,n,r){return new o["a"](t,e,i,n,r,_)},externalTileset:function(t,e,i,n){return new l["a"](t,e,i,n)},geom:function(t,e,i,n,o){return new r["a"](t,e,i,n,o)},vctr:function(t,e,i,n,o){return new u["a"](t,e,i,n,o)},subt:function(t,e,i,n,o){return new a["a"](t,e,i,void 0,n,o)},subtreeJson:function(t,e,i,n){return new a["a"](t,e,i,n)},glb:function(t,e,i,n,o){const r=n.byteLength;if(r<12)throw new h["a"]("Invalid glb content");const a=new DataView(n,o),s=a.getUint32(8,!0),c=new Uint8Array(n,o,s);return d["a"].fromGltf(t,e,i,c)},gltf:function(t,e,i,n){return d["a"].fromGltf(t,e,i,n)}};e["a"]=_},8286:function(t,e,i){"use strict";var n=i("44e9"),o=i("1a5d"),r=i("c937"),a=i("e2a6"),s=i("9f38"),c=i("fff9"),l=i("e829");function u(t){let e;if(this._style={},this._ready=!1,this._show=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._labelColor=void 0,this._labelOutlineColor=void 0,this._labelOutlineWidth=void 0,this._font=void 0,this._labelStyle=void 0,this._labelText=void 0,this._backgroundColor=void 0,this._backgroundPadding=void 0,this._backgroundEnabled=void 0,this._scaleByDistance=void 0,this._translucencyByDistance=void 0,this._distanceDisplayCondition=void 0,this._heightOffset=void 0,this._anchorLineEnabled=void 0,this._anchorLineColor=void 0,this._image=void 0,this._disableDepthTestDistance=void 0,this._horizontalOrigin=void 0,this._verticalOrigin=void 0,this._labelHorizontalOrigin=void 0,this._labelVerticalOrigin=void 0,this._meta=void 0,this._colorShaderFunction=void 0,this._showShaderFunction=void 0,this._pointSizeShaderFunction=void 0,this._colorShaderFunctionReady=!1,this._showShaderFunctionReady=!1,this._pointSizeShaderFunctionReady=!1,this._colorShaderTranslucent=!1,"string"===typeof t||t instanceof s["a"]){const i=s["a"].createIfNeeded(t);e=i.fetchJson(t)}else e=Promise.resolve(t);const i=this;this._readyPromise=e.then((function(t){return h(i,t),i}))}function h(t,e){e=Object(o["a"])(Object(n["a"])(e,!0),t._style),t._style=e,t.show=e.show,t.color=e.color,t.pointSize=e.pointSize,t.pointOutlineColor=e.pointOutlineColor,t.pointOutlineWidth=e.pointOutlineWidth,t.labelColor=e.labelColor,t.labelOutlineColor=e.labelOutlineColor,t.labelOutlineWidth=e.labelOutlineWidth,t.labelStyle=e.labelStyle,t.font=e.font,t.labelText=e.labelText,t.backgroundColor=e.backgroundColor,t.backgroundPadding=e.backgroundPadding,t.backgroundEnabled=e.backgroundEnabled,t.scaleByDistance=e.scaleByDistance,t.translucencyByDistance=e.translucencyByDistance,t.distanceDisplayCondition=e.distanceDisplayCondition,t.heightOffset=e.heightOffset,t.anchorLineEnabled=e.anchorLineEnabled,t.anchorLineColor=e.anchorLineColor,t.image=e.image,t.disableDepthTestDistance=e.disableDepthTestDistance,t.horizontalOrigin=e.horizontalOrigin,t.verticalOrigin=e.verticalOrigin,t.labelHorizontalOrigin=e.labelHorizontalOrigin,t.labelVerticalOrigin=e.labelVerticalOrigin;const i={};if(Object(r["a"])(e.meta)){const t=e.defines,n=Object(o["a"])(e.meta,o["a"].EMPTY_OBJECT);for(const e in n)n.hasOwnProperty(e)&&(i[e]=new l["a"](n[e],t))}t._meta=i,t._ready=!0}function d(t,e){const i=Object(o["a"])(t._style,o["a"].EMPTY_OBJECT).defines;if(Object(r["a"])(e))return"boolean"===typeof e||"number"===typeof e?new l["a"](String(e)):"string"===typeof e?new l["a"](e,i):Object(r["a"])(e.conditions)?new c["a"](e,i):e}function _(t){if(Object(r["a"])(t))return Object(r["a"])(t.expression)?t.expression:Object(r["a"])(t.conditionsExpression)?Object(n["a"])(t.conditionsExpression,!0):t}Object.defineProperties(u.prototype,{style:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._style}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},show:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._show},set:function(t){this._show=d(this,t),this._style.show=_(this._show),this._showShaderFunctionReady=!1}},color:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._color},set:function(t){this._color=d(this,t),this._style.color=_(this._color),this._colorShaderFunctionReady=!1}},pointSize:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._pointSize},set:function(t){this._pointSize=d(this,t),this._style.pointSize=_(this._pointSize),this._pointSizeShaderFunctionReady=!1}},pointOutlineColor:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._pointOutlineColor},set:function(t){this._pointOutlineColor=d(this,t),this._style.pointOutlineColor=_(this._pointOutlineColor)}},pointOutlineWidth:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._pointOutlineWidth},set:function(t){this._pointOutlineWidth=d(this,t),this._style.pointOutlineWidth=_(this._pointOutlineWidth)}},labelColor:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._labelColor},set:function(t){this._labelColor=d(this,t),this._style.labelColor=_(this._labelColor)}},labelOutlineColor:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._labelOutlineColor},set:function(t){this._labelOutlineColor=d(this,t),this._style.labelOutlineColor=_(this._labelOutlineColor)}},labelOutlineWidth:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._labelOutlineWidth},set:function(t){this._labelOutlineWidth=d(this,t),this._style.labelOutlineWidth=_(this._labelOutlineWidth)}},font:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._font},set:function(t){this._font=d(this,t),this._style.font=_(this._font)}},labelStyle:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._labelStyle},set:function(t){this._labelStyle=d(this,t),this._style.labelStyle=_(this._labelStyle)}},labelText:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._labelText},set:function(t){this._labelText=d(this,t),this._style.labelText=_(this._labelText)}},backgroundColor:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._backgroundColor},set:function(t){this._backgroundColor=d(this,t),this._style.backgroundColor=_(this._backgroundColor)}},backgroundPadding:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._backgroundPadding},set:function(t){this._backgroundPadding=d(this,t),this._style.backgroundPadding=_(this._backgroundPadding)}},backgroundEnabled:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._backgroundEnabled},set:function(t){this._backgroundEnabled=d(this,t),this._style.backgroundEnabled=_(this._backgroundEnabled)}},scaleByDistance:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._scaleByDistance},set:function(t){this._scaleByDistance=d(this,t),this._style.scaleByDistance=_(this._scaleByDistance)}},translucencyByDistance:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._translucencyByDistance},set:function(t){this._translucencyByDistance=d(this,t),this._style.translucencyByDistance=_(this._translucencyByDistance)}},distanceDisplayCondition:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._distanceDisplayCondition},set:function(t){this._distanceDisplayCondition=d(this,t),this._style.distanceDisplayCondition=_(this._distanceDisplayCondition)}},heightOffset:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._heightOffset},set:function(t){this._heightOffset=d(this,t),this._style.heightOffset=_(this._heightOffset)}},anchorLineEnabled:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._anchorLineEnabled},set:function(t){this._anchorLineEnabled=d(this,t),this._style.anchorLineEnabled=_(this._anchorLineEnabled)}},anchorLineColor:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._anchorLineColor},set:function(t){this._anchorLineColor=d(this,t),this._style.anchorLineColor=_(this._anchorLineColor)}},image:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._image},set:function(t){this._image=d(this,t),this._style.image=_(this._image)}},disableDepthTestDistance:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._disableDepthTestDistance},set:function(t){this._disableDepthTestDistance=d(this,t),this._style.disableDepthTestDistance=_(this._disableDepthTestDistance)}},horizontalOrigin:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._horizontalOrigin},set:function(t){this._horizontalOrigin=d(this,t),this._style.horizontalOrigin=_(this._horizontalOrigin)}},verticalOrigin:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._verticalOrigin},set:function(t){this._verticalOrigin=d(this,t),this._style.verticalOrigin=_(this._verticalOrigin)}},labelHorizontalOrigin:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._labelHorizontalOrigin},set:function(t){this._labelHorizontalOrigin=d(this,t),this._style.labelHorizontalOrigin=_(this._labelHorizontalOrigin)}},labelVerticalOrigin:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._labelVerticalOrigin},set:function(t){this._labelVerticalOrigin=d(this,t),this._style.labelVerticalOrigin=_(this._labelVerticalOrigin)}},meta:{get:function(){if(!this._ready)throw new a["a"]("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._meta},set:function(t){this._meta=t}}}),u.prototype.getColorShaderFunction=function(t,e,i){return this._colorShaderFunctionReady?(i.translucent=this._colorShaderTranslucent,this._colorShaderFunction):(this._colorShaderFunctionReady=!0,Object(r["a"])(this.color)&&Object(r["a"])(this.color.getShaderFunction)?this._colorShaderFunction=this.color.getShaderFunction(t,e,i,"vec4"):this._colorShaderFunction=void 0,this._colorShaderTranslucent=i.translucent,this._colorShaderFunction)},u.prototype.getShowShaderFunction=function(t,e,i){return this._showShaderFunctionReady||(this._showShaderFunctionReady=!0,Object(r["a"])(this.show)&&Object(r["a"])(this.show.getShaderFunction)?this._showShaderFunction=this.show.getShaderFunction(t,e,i,"bool"):this._showShaderFunction=void 0),this._showShaderFunction},u.prototype.getPointSizeShaderFunction=function(t,e,i){return this._pointSizeShaderFunctionReady||(this._pointSizeShaderFunctionReady=!0,Object(r["a"])(this.pointSize)&&Object(r["a"])(this.pointSize.getShaderFunction)?this._pointSizeShaderFunction=this.pointSize.getShaderFunction(t,e,i,"float"):this._pointSizeShaderFunction=void 0),this._pointSizeShaderFunction},u.prototype.getVariables=function(){let t=[];return Object(r["a"])(this.color)&&Object(r["a"])(this.color.getVariables)&&t.push.apply(t,this.color.getVariables()),Object(r["a"])(this.show)&&Object(r["a"])(this.show.getVariables)&&t.push.apply(t,this.show.getVariables()),Object(r["a"])(this.pointSize)&&Object(r["a"])(this.pointSize.getVariables)&&t.push.apply(t,this.pointSize.getVariables()),t=t.filter((function(t,e,i){return i.indexOf(t)===e})),t},e["a"]=u},"8fcb":function(t,e,i){"use strict";var n=i("85b2"),o=i("ae9b"),r=i("44e9"),a=i("4051"),s=i("2fad"),c=i("1a5d"),l=i("c937"),u=i("44c1"),h=i("21b7"),d=i("e2a6"),_=i("b8b5"),f=i("e2aa"),b=i("2341"),p=i("d5cf"),y=i("51f2"),m=i("5027"),g=i("b3ce"),O=i("2013"),S=i("46af"),T=i("da23"),C=i("2a3b"),E=i("ddd8"),D=i("f2c1"),P=i("8d2f"),w=i("79a2"),v=i("20f8");const I=O["a"].DEFAULT_COLOR_VALUE,j=O["a"].DEFAULT_SHOW_VALUE;function x(t,e,i,n,o){let r;this.featuresLength=e,Object(l["a"])(i)&&(r=i.extensions),this._extensions=Object(c["a"])(r,{});const a=R(i);this._properties=a,this._batchTableHierarchy=L(this,i,n),this._batchTableBinaryProperties=V(e,a,n),this._content=t,this._batchTexture=new O["a"]({featuresLength:e,colorChangedCallback:o,owner:t,statistics:t.tileset.statistics})}function R(t){const e={};if(!Object(l["a"])(t))return e;for(const i in t)t.hasOwnProperty(i)&&"HIERARCHY"!==i&&"extensions"!==i&&"extras"!==i&&(e[i]=Object(r["a"])(t[i],!0));return e}function L(t,e,i){if(!Object(l["a"])(e))return;let n=t._extensions["3DTILES_batch_table_hierarchy"];const o=e.HIERARCHY;return Object(l["a"])(o)&&(x._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),t._extensions["3DTILES_batch_table_hierarchy"]=o,n=o),Object(l["a"])(n)?new S["a"]({extension:n,binaryBody:i}):void 0}function V(t,e,i){let n;for(const o in e)if(e.hasOwnProperty(o)){const r=e[o],a=r.byteOffset;if(Object(l["a"])(a)){const e=r.componentType,s=r.type;if(!Object(l["a"])(e))throw new f["a"]("componentType is required.");if(!Object(l["a"])(s))throw new f["a"]("type is required.");if(!Object(l["a"])(i))throw new f["a"](`Property ${o} requires a batch table binary.`);const c=Object(D["a"])(r),u=c.componentsPerAttribute,h=c.classType,d=c.createArrayBufferView(i.buffer,i.byteOffset+a,t);Object(l["a"])(n)||(n={}),n[o]={typedArray:d,componentCount:u,type:h}}}return n}x._deprecationWarning=u["a"],Object.defineProperties(x.prototype,{memorySizeInBytes:{get:function(){return this._batchTexture.memorySizeInBytes}}}),x.getBinaryProperties=function(t,e,i){return V(t,e,i)},x.prototype.setShow=function(t,e){this._batchTexture.setShow(t,e)},x.prototype.setAllShow=function(t){this._batchTexture.setAllShow(t)},x.prototype.getShow=function(t){return this._batchTexture.getShow(t)},x.prototype.setColor=function(t,e){this._batchTexture.setColor(t,e)},x.prototype.setAllColor=function(t){this._batchTexture.setAllColor(t)},x.prototype.getColor=function(t,e){return this._batchTexture.getColor(t,e)},x.prototype.getPickColor=function(t){return this._batchTexture.getPickColor(t)};const A=new a["a"];function B(t,e){const i=t.typedArray,n=t.componentCount;return 1===n?i[e]:t.type.unpack(i,e*n)}function M(t,e,i){const n=t.typedArray,o=t.componentCount;1===o?n[e]=i:t.type.pack(i,n,e*o)}function N(t,e){if(!Object(l["a"])(t)||t<0||t>=e)throw new d["a"]("batchId is required and between zero and featuresLength - 1 ("+e-NaN)}function z(t){return 1===t._batchTexture.textureDimensions.y?"uniform vec4 tile_textureStep; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    return vec2(centerX + (batchId * stepX), 0.5); \n} \n":"uniform vec4 tile_textureStep; \nuniform vec2 tile_textureDimensions; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    float stepY = tile_textureStep.z; \n    float centerY = tile_textureStep.w; \n    float xId = mod(batchId, tile_textureDimensions.x); \n    float yId = floor(batchId / tile_textureDimensions.x); \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); \n} \n"}function F(t,e){return t=g["a"].replaceMain(t,"tile_main"),e?t+"uniform float tile_colorBlend; \nvoid tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    gl_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    gl_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n} \n":t+"void tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n} \n"}function U(t,e){const i="texture2D("+e;let n,o=0,r=t.indexOf(i,o);while(r>-1){let e=0;for(let i=r;i<t.length;++i){const o=t.charAt(i);if("("===o)++e;else if(")"===o&&(--e,0===e)){n=i+1;break}}const a=t.slice(r,n),s=`tile_diffuse_final(${a}, tile_diffuse)`;t=t.slice(0,r)+s+t.slice(n),o=r+s.length,r=t.indexOf(i,o)}return t}function k(t,e,i){if(!Object(l["a"])(e))return F(t,i);let n=new RegExp(`(uniform|attribute|in)\\s+(vec[34]|sampler2D)\\s+${e};`);const o=t.match(n);if(!Object(l["a"])(o))return F(t,i);const r=o[0],a=o[2];t=g["a"].replaceMain(t,"tile_main"),t=t.replace(r,"");const s="bool isWhite(vec3 color) \n{ \n    return all(greaterThan(color, vec3(1.0 - czm_epsilon3))); \n} \nvec4 tile_diffuse_final(vec4 sourceDiffuse, vec4 tileDiffuse) \n{ \n    vec4 blendDiffuse = mix(sourceDiffuse, tileDiffuse, tile_colorBlend); \n    vec4 diffuse = isWhite(tileDiffuse.rgb) ? sourceDiffuse : blendDiffuse; \n    return vec4(diffuse.rgb, sourceDiffuse.a); \n} \n",c="    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    gl_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    gl_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n";let u;if("vec3"===a||"vec4"===a){const i="vec3"===a?`vec4(${e}, 1.0)`:e,o="vec3"===a?"tile_diffuse.xyz":"tile_diffuse";n=new RegExp(e,"g"),t=t.replace(n,o),u=`    vec4 source = ${i}; \n    tile_diffuse = tile_diffuse_final(source, tile_featureColor); \n    tile_main(); \n`}else"sampler2D"===a&&(t=U(t,e),u="    tile_diffuse = tile_featureColor; \n    tile_main(); \n");return t=`uniform float tile_colorBlend; \nvec4 tile_diffuse = vec4(1.0); \n${s}${r}\n${t}\nvoid tile_color(vec4 tile_featureColor) \n{ \n`+u,i&&(t+=c),t+="} \n",t}function q(t){const e=t._content.tileset,i=e.colorBlendMode,n=e.colorBlendAmount;if(i===C["a"].HIGHLIGHT)return 0;if(i===C["a"].REPLACE)return 1;if(i===C["a"].MIX)return _["a"].clamp(n,_["a"].EPSILON4,1);throw new d["a"](`Invalid color blend mode "${i}".`)}x.prototype.applyStyle=function(t){if(!Object(l["a"])(t))return this.setAllColor(I),void this.setAllShow(j);const e=this._content,i=this.featuresLength;for(let n=0;n<i;++n){const i=e.getFeature(n),o=Object(l["a"])(t.color)?Object(c["a"])(t.color.evaluateColor(i,A),I):I,r=Object(l["a"])(t.show)?Object(c["a"])(t.show.evaluate(i),j):j;this.setColor(n,o),this.setShow(n,r)}},x.prototype.isClass=function(t,e){N(t,this.featuresLength),o["a"].typeOf.string("className",e);const i=this._batchTableHierarchy;return!!Object(l["a"])(i)&&i.isClass(t,e)},x.prototype.isExactClass=function(t,e){return o["a"].typeOf.string("className",e),this.getExactClassName(t)===e},x.prototype.getExactClassName=function(t){N(t,this.featuresLength);const e=this._batchTableHierarchy;if(Object(l["a"])(e))return e.getClassName(t)},x.prototype.hasProperty=function(t,e){return N(t,this.featuresLength),o["a"].typeOf.string("name",e),Object(l["a"])(this._properties[e])||Object(l["a"])(this._batchTableHierarchy)&&this._batchTableHierarchy.hasProperty(t,e)},x.prototype.hasPropertyBySemantic=function(){return!1},x.prototype.getPropertyNames=function(t,e){N(t,this.featuresLength),e=Object(l["a"])(e)?e:[],e.length=0;const i=Object.keys(this._properties);return e.push.apply(e,i),Object(l["a"])(this._batchTableHierarchy)&&e.push.apply(e,this._batchTableHierarchy.getPropertyIds(t,i)),e},x.prototype.getPropertyBySemantic=function(t,e){},x.prototype.getProperty=function(t,e){if(N(t,this.featuresLength),o["a"].typeOf.string("name",e),Object(l["a"])(this._batchTableBinaryProperties)){const i=this._batchTableBinaryProperties[e];if(Object(l["a"])(i))return B(i,t)}const i=this._properties[e];if(Object(l["a"])(i))return Object(r["a"])(i[t],!0);if(Object(l["a"])(this._batchTableHierarchy)){const i=this._batchTableHierarchy.getProperty(t,e);if(Object(l["a"])(i))return i}},x.prototype.setProperty=function(t,e,i){const n=this.featuresLength;if(N(t,n),o["a"].typeOf.string("name",e),Object(l["a"])(this._batchTableBinaryProperties)){const n=this._batchTableBinaryProperties[e];if(Object(l["a"])(n))return void M(n,t,i)}if(Object(l["a"])(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(t,e,i))return;let a=this._properties[e];Object(l["a"])(a)||(this._properties[e]=new Array(n),a=this._properties[e]),a[t]=Object(r["a"])(i,!0)},x.prototype.getVertexShaderCallback=function(t,e,i){if(0===this.featuresLength)return;const n=this;return function(o){const r=k(o,i,!1);let a;return b["a"].maximumVertexTextureImageUnits>0?(a="",t&&(a+="uniform bool tile_translucentCommand; \n"),a+=`uniform sampler2D tile_batchTexture; \nvarying vec4 tile_featureColor; \nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    vec2 st = computeSt(${e}); \n    vec4 featureProperties = texture2D(tile_batchTexture, st); \n    tile_color(featureProperties); \n    float show = ceil(featureProperties.a); \n    gl_Position *= show; \n`,t&&(a+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n"),a+="    tile_featureColor = featureProperties; \n    tile_featureSt = st; \n}"):a=`varying vec2 tile_featureSt; \nvoid main() \n{ \n    tile_color(vec4(1.0)); \n    tile_featureSt = computeSt(${e}); \n}`,`${r}\n${z(n)}${a}`}},x.prototype.getFragmentShaderCallback=function(t,e,i){if(0!==this.featuresLength)return function(n){return n=k(n,e,!0),b["a"].maximumVertexTextureImageUnits>0?(n+="uniform sampler2D tile_pickTexture; \nvarying vec2 tile_featureSt; \nvarying vec4 tile_featureColor; \nvoid main() \n{ \n    tile_color(tile_featureColor); \n",i&&(n+="    gl_FragColor.rgb *= gl_FragColor.a; \n"),n+="}"):(t&&(n+="uniform bool tile_translucentCommand; \n"),n+="uniform sampler2D tile_pickTexture; \nuniform sampler2D tile_batchTexture; \nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    vec4 featureProperties = texture2D(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n",t&&(n+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            discard; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            discard; \n        } \n    } \n"),n+="    tile_color(featureProperties); \n",i&&(n+="    gl_FragColor.rgb *= gl_FragColor.a; \n"),n+="} \n"),n}},x.prototype.getClassificationFragmentShaderCallback=function(){if(0!==this.featuresLength)return function(t){return t=g["a"].replaceMain(t,"tile_main"),b["a"].maximumVertexTextureImageUnits>0?t+="uniform sampler2D tile_pickTexture;\nvarying vec2 tile_featureSt; \nvarying vec4 tile_featureColor; \nvoid main() \n{ \n    tile_main(); \n    gl_FragColor = tile_featureColor; \n    gl_FragColor.rgb *= gl_FragColor.a; \n}":t+="uniform sampler2D tile_batchTexture; \nuniform sampler2D tile_pickTexture;\nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    tile_main(); \n    vec4 featureProperties = texture2D(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n    gl_FragColor = featureProperties; \n    gl_FragColor.rgb *= gl_FragColor.a; \n} \n",t}},x.prototype.getUniformMapCallback=function(){if(0===this.featuresLength)return;const t=this;return function(e){const i={tile_batchTexture:function(){return Object(c["a"])(t._batchTexture.batchTexture,t._batchTexture.defaultTexture)},tile_textureDimensions:function(){return t._batchTexture.textureDimensions},tile_textureStep:function(){return t._batchTexture.textureStep},tile_colorBlend:function(){return q(t)},tile_pickTexture:function(){return t._batchTexture.pickTexture}};return Object(s["a"])(e,i)}},x.prototype.getPickId=function(){return"texture2D(tile_pickTexture, tile_featureSt)"};const W={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2};function H(t){const e=t._batchTexture.translucentFeaturesLength;return 0===e?W.ALL_OPAQUE:e===t.featuresLength?W.ALL_TRANSLUCENT:W.OPAQUE_AND_TRANSLUCENT}function G(t){const e=p["a"].shallowClone(t),i=e.pass===y["a"].TRANSLUCENT;return e.uniformMap=Object(l["a"])(e.uniformMap)?e.uniformMap:{},e.uniformMap.tile_translucentCommand=function(){return i},e}function K(t){const e=p["a"].shallowClone(t);return e.pass=y["a"].TRANSLUCENT,e.renderState=Z(t.renderState),e}function Y(t){const e=p["a"].shallowClone(t);return e.renderState=tt(t.renderState),e}function $(t,e){let i=t.shaderCache.getDerivedShaderProgram(e,"zBackfaceLogDepth");if(!Object(l["a"])(i)){const n=e.fragmentShaderSource.clone();n.defines=Object(l["a"])(n.defines)?n.defines.slice(0):[],n.defines.push("POLYGON_OFFSET"),n.sources.unshift("#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n"),i=t.shaderCache.createDerivedShaderProgram(e,"zBackfaceLogDepth",{vertexShaderSource:e.vertexShaderSource,fragmentShaderSource:n,attributeLocations:e._attributeLocations})}return i}function X(t,e){const i=p["a"].shallowClone(e),o=Object(r["a"])(i.renderState,!0);o.cull.enabled=!0,o.cull.face=E["a"].FRONT,o.colorMask={red:!1,green:!1,blue:!1,alpha:!1},o.polygonOffset={enabled:!0,factor:5,units:5},o.stencilTest=P["a"].setCesium3DTileBit(),o.stencilMask=P["a"].CESIUM_3D_TILE_MASK,i.renderState=m["a"].fromCache(o),i.castShadows=!1,i.receiveShadows=!1,i.uniformMap=Object(r["a"])(e.uniformMap);const a=new n["a"](5,5);return i.uniformMap.u_polygonOffset=function(){return a},i.shaderProgram=$(t,e.shaderProgram),i}function Q(t,e){const i=p["a"].shallowClone(t),n=Object(r["a"])(i.renderState,!0);return n.stencilTest.enabled=!0,n.stencilTest.mask=P["a"].SKIP_LOD_MASK,n.stencilTest.reference=P["a"].CESIUM_3D_TILE_MASK|e<<P["a"].SKIP_LOD_BIT_SHIFT,n.stencilTest.frontFunction=w["a"].GREATER_OR_EQUAL,n.stencilTest.frontOperation.zPass=v["a"].REPLACE,n.stencilTest.backFunction=w["a"].GREATER_OR_EQUAL,n.stencilTest.backOperation.zPass=v["a"].REPLACE,n.stencilMask=P["a"].CESIUM_3D_TILE_MASK|P["a"].SKIP_LOD_MASK,i.renderState=m["a"].fromCache(n),i}function J(t){const e=t.renderState.stencilTest.reference;return(e&P["a"].SKIP_LOD_MASK)>>>P["a"].SKIP_LOD_BIT_SHIFT}function Z(t){const e=Object(r["a"])(t,!0);return e.cull.enabled=!1,e.depthTest.enabled=!0,e.depthMask=!1,e.blending=T["a"].ALPHA_BLEND,e.stencilTest=P["a"].setCesium3DTileBit(),e.stencilMask=P["a"].CESIUM_3D_TILE_MASK,m["a"].fromCache(e)}function tt(t){const e=Object(r["a"])(t,!0);return e.stencilTest=P["a"].setCesium3DTileBit(),e.stencilMask=P["a"].CESIUM_3D_TILE_MASK,m["a"].fromCache(e)}x.prototype.addDerivedCommands=function(t,e){const i=t.commandList,n=i.length,o=this._content._tile,r=o._finalResolution,a=o.tileset,s=a._skipLevelOfDetail&&a._hasMixedContent&&t.context.stencilBuffer,c=H(this);for(let u=e;u<n;++u){const e=i[u];if(e.pass===y["a"].COMPUTE)continue;let n=e.derivedCommands.tileset;Object(l["a"])(n)&&!e.dirty||(n={},e.derivedCommands.tileset=n,n.originalCommand=G(e),e.dirty=!1);const h=n.originalCommand;c!==W.ALL_OPAQUE&&e.pass!==y["a"].TRANSLUCENT&&(Object(l["a"])(n.translucent)||(n.translucent=K(h))),c!==W.ALL_TRANSLUCENT&&e.pass!==y["a"].TRANSLUCENT&&(Object(l["a"])(n.opaque)||(n.opaque=Y(h)),s&&(r||(Object(l["a"])(n.zback)||(n.zback=X(t.context,h)),a._backfaceCommands.push(n.zback)),Object(l["a"])(n.stencil)&&o._selectionDepth===J(n.stencil)||(e.renderState.depthMask?n.stencil=Q(h,o._selectionDepth):n.stencil=n.opaque)));const d=s?n.stencil:n.opaque,_=n.translucent;e.pass!==y["a"].TRANSLUCENT?(c===W.ALL_OPAQUE&&(i[u]=d),c===W.ALL_TRANSLUCENT&&(i[u]=_),c===W.OPAQUE_AND_TRANSLUCENT&&(i[u]=d,i.push(_))):i[u]=h}},x.prototype.update=function(t,e){this._batchTexture.update(t,e)},x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){return this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),Object(h["a"])(this)},e["a"]=x},b429:function(t,e,i){"use strict";var n=i("ae9b");function o(t){n["a"].typeOf.object("options",t),n["a"].typeOf.number("options.pass",t.pass),this.pass=t.pass,this.commandList=t.commandList,this.camera=t.camera,this.cullingVolume=t.cullingVolume,this.ready=!1}e["a"]=o},c6a4:function(t,e,i){"use strict";var n=i("e2a6");function o(){this.featurePropertiesDirty=!1}Object.defineProperties(o.prototype,{featuresLength:{get:function(){n["a"].throwInstantiationError()}},pointsLength:{get:function(){n["a"].throwInstantiationError()}},trianglesLength:{get:function(){n["a"].throwInstantiationError()}},geometryByteLength:{get:function(){n["a"].throwInstantiationError()}},texturesByteLength:{get:function(){n["a"].throwInstantiationError()}},batchTableByteLength:{get:function(){n["a"].throwInstantiationError()}},innerContents:{get:function(){n["a"].throwInstantiationError()}},readyPromise:{get:function(){n["a"].throwInstantiationError()}},tileset:{get:function(){n["a"].throwInstantiationError()}},tile:{get:function(){n["a"].throwInstantiationError()}},url:{get:function(){n["a"].throwInstantiationError()}},batchTable:{get:function(){n["a"].throwInstantiationError()}},metadata:{get:function(){n["a"].throwInstantiationError()},set:function(t){n["a"].throwInstantiationError()}},group:{get:function(){n["a"].throwInstantiationError()},set:function(t){n["a"].throwInstantiationError()}}}),o.prototype.hasProperty=function(t,e){n["a"].throwInstantiationError()},o.prototype.getFeature=function(t){n["a"].throwInstantiationError()},o.prototype.applyDebugSettings=function(t,e){n["a"].throwInstantiationError()},o.prototype.applyStyle=function(t){n["a"].throwInstantiationError()},o.prototype.update=function(t,e){n["a"].throwInstantiationError()},o.prototype.isDestroyed=function(){n["a"].throwInstantiationError()},o.prototype.destroy=function(){n["a"].throwInstantiationError()}},d2f5:function(t,e,i){"use strict";var n=i("c937");function o(){this._style=void 0,this._styleDirty=!1,this._lastStyleTime=0}Object.defineProperties(o.prototype,{style:{get:function(){return this._style},set:function(t){t!==this._style&&(this._style=t,this._styleDirty=!0)}}}),o.prototype.makeDirty=function(){this._styleDirty=!0},o.prototype.resetDirty=function(){this._styleDirty=!1},o.prototype.applyStyle=function(t){if(!t.ready)return;if(Object(n["a"])(this._style)&&!this._style.ready)return;const e=this._styleDirty;e&&++this._lastStyleTime;const i=this._lastStyleTime,o=t._statistics,r=e?t._selectedTiles:t._selectedTilesToStyle,a=r.length;for(let n=0;n<a;++n){const t=r[n];if(t.lastStyleTime!==i){const e=t.content;t.lastStyleTime=i,e.applyStyle(this._style),o.numberOfFeaturesStyled+=e.featuresLength,++o.numberOfTilesStyled}}},e["a"]=o},e86c:function(t,e,i){"use strict";var n=i("8656"),o=i("dde0"),r=i("4051"),a=i("ed17"),s=i("c76f"),c=i("1a5d"),l=i("61ad"),u=i("c937"),h=i("44c1"),d=i("21b7"),_=i("e107"),f=i("a61d"),b=i("6247"),p=i("b8b5"),y=i("d767"),m=i("722e"),g=i("22d6"),O=i("ec1a"),S=i("4a63"),T=i("035e"),C=i("d828"),E=i("06d8"),D=i("bb9e"),P=i("9f38"),w=i("e2aa"),v=i("1a92"),I=i("8131"),j=i("3b37"),x=i("67bc"),R=i("67a6"),L=i("4b41"),V=i("466f"),A=i("7e09"),B=i("bbab"),M=i("08a9"),N=i("7c72"),z=i("a3b5"),F=i("5a89"),U=i("46b0"),k=i("dc6c"),q=i("b743"),W=i("ee5f"),H=i("2239"),G=i("6d96"),K=i("51f2");function Y(t,e,i,n){this._tileset=t,this._header=i;const o=Object(u["a"])(i.contents),a=o&&i.contents.length>1||Object(z["a"])(i,"3DTILES_multiple_contents"),s=o&&!a?i.contents[0]:i.content;this.transform=Object(u["a"])(i.transform)?m["a"].unpack(i.transform):m["a"].clone(m["a"].IDENTITY);const c=Object(u["a"])(n)?n.computedTransform:t.modelMatrix,l=m["a"].multiply(c,this.transform,new m["a"]),h=Object(u["a"])(n)?n._initialTransform:m["a"].IDENTITY;let d,_,f,p;this._initialTransform=m["a"].multiply(h,this.transform,new m["a"]),this.computedTransform=l,this._boundingVolume=this.createBoundingVolume(i.boundingVolume,l),this._boundingVolume2D=void 0,Object(u["a"])(s)&&Object(u["a"])(s.boundingVolume)&&(d=this.createBoundingVolume(s.boundingVolume,l)),this._contentBoundingVolume=d,this._contentBoundingVolume2D=void 0,Object(u["a"])(i.viewerRequestVolume)&&(_=this.createBoundingVolume(i.viewerRequestVolume,l)),this._viewerRequestVolume=_,this.geometricError=i.geometricError,this._geometricError=i.geometricError,Object(u["a"])(this._geometricError)||(this._geometricError=Object(u["a"])(n)?n.geometricError:t._geometricError,Y._deprecationWarning("geometricErrorUndefined","Required property geometricError is undefined for this tile. Using parent's geometric error instead.")),this.updateGeometricErrorScale(),Object(u["a"])(i.refine)?("replace"!==i.refine&&"add"!==i.refine||Y._deprecationWarning("lowercase-refine",`This tile uses a lowercase refine "${i.refine}". Instead use "${i.refine.toUpperCase()}".`),f="REPLACE"===i.refine.toUpperCase()?V["a"].REPLACE:V["a"].ADD):f=Object(u["a"])(n)?n.refine:V["a"].REPLACE,this.refine=f,this.children=[],this.parent=n;let y,g,O,S=!1;if(e=P["a"].createIfNeeded(e),a)y=j["a"].UNLOADED,g=e.clone();else if(Object(u["a"])(s)){let t=s.uri;Object(u["a"])(s.url)&&(Y._deprecationWarning("contentUrl",'This tileset JSON uses the "content.url" property which has been deprecated. Use "content.uri" instead.'),t=s.url),y=j["a"].UNLOADED,g=e.getDerivedResource({url:t}),O=C["a"].getServerKey(g.getUrlComponent())}else p=new A["a"](t,this),S=!0,y=j["a"].READY;this._content=p,this._contentResource=g,this._contentState=y,this._contentReadyToProcessPromise=void 0,this._contentReadyPromise=void 0,this._expiredContent=void 0,this._serverKey=O,this.hasEmptyContent=S,this.hasTilesetContent=!1,this.hasImplicitContent=!1,this.hasImplicitContentMetadata=!1,this.hasMultipleContents=a,this.metadata=Object(N["a"])(t,i),this.cacheNode=void 0;const T=i.expire;let E,D;Object(u["a"])(T)&&(E=T.duration,Object(u["a"])(T.date)&&(D=b["a"].fromIso8601(T.date))),this.expireDuration=E,this.expireDate=D,this.lastStyleTime=0,this._optimChildrenWithinParent=R["a"].NOT_COMPUTED,this.clippingPlanesDirty=!1,this.priorityDeferred=!1,this.implicitTileset=void 0,this.implicitCoordinates=void 0,this.implicitSubtree=void 0,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._screenSpaceErrorProgressiveResolution=0,this._visibilityPlaneMask=0,this._visible=!1,this._inRequestVolume=!1,this._finalResolution=!0,this._depth=0,this._stackLength=0,this._selectionDepth=0,this._updatedVisibilityFrame=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._ancestorWithContent=void 0,this._ancestorWithContentAvailable=void 0,this._refines=!1,this._shouldSelect=!1,this._isClipped=!0,this._clippingPlanesState=0,this._debugBoundingVolume=void 0,this._debugContentBoundingVolume=void 0,this._debugViewerRequestVolume=void 0,this._debugColor=r["a"].fromRandom({alpha:1}),this._debugColorizeTiles=!1,this._priority=0,this._priorityHolder=this,this._priorityProgressiveResolution=!1,this._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1,this._priorityReverseScreenSpaceError=0,this._foveatedFactor=0,this._wasMinPriorityChild=!1,this._loadTimestamp=new b["a"],this._commandsLength=0,this._color=void 0,this._colorDirty=!1,this._request=void 0}Y._deprecationWarning=h["a"],Object.defineProperties(Y.prototype,{tileset:{get:function(){return this._tileset}},content:{get:function(){return this._content}},boundingVolume:{get:function(){return this._boundingVolume}},contentBoundingVolume:{get:function(){return Object(c["a"])(this._contentBoundingVolume,this._boundingVolume)}},boundingSphere:{get:function(){return this._boundingVolume.boundingSphere}},extras:{get:function(){return this._header.extras}},color:{get:function(){return Object(u["a"])(this._color)||(this._color=new r["a"]),r["a"].clone(this._color)},set:function(t){this._color=r["a"].clone(t,this._color),this._colorDirty=!0}},contentAvailable:{get:function(){return this.contentReady&&!this.hasEmptyContent&&!this.hasTilesetContent&&!this.hasImplicitContent||Object(u["a"])(this._expiredContent)&&!this.contentFailed}},contentReady:{get:function(){return this._contentState===j["a"].READY}},contentUnloaded:{get:function(){return this._contentState===j["a"].UNLOADED}},contentExpired:{get:function(){return this._contentState===j["a"].EXPIRED}},contentFailed:{get:function(){return this._contentState===j["a"].FAILED}},contentReadyToProcessPromise:{get:function(){if(Object(u["a"])(this._contentReadyToProcessPromise))return this._contentReadyToProcessPromise.promise}},contentReadyPromise:{get:function(){if(Object(u["a"])(this._contentReadyPromise))return this._contentReadyPromise.promise}},commandsLength:{get:function(){return this._commandsLength}}});const $=new o["a"];function X(t,e){const i=t._tileset,n=e.camera,r=t.boundingSphere,a=r.radius,s=o["a"].multiplyByScalar(n.directionWC,t._centerZDepth,$),c=o["a"].add(n.positionWC,s,$),l=o["a"].subtract(c,r.center,$),h=o["a"].magnitude(l),d=h>a;if(d){const e=o["a"].normalize(l,$),i=o["a"].multiplyByScalar(e,a,$),s=o["a"].add(r.center,i,$),c=o["a"].subtract(s,n.positionWC,$),u=o["a"].normalize(c,$);t._foveatedFactor=1-Math.abs(o["a"].dot(n.directionWC,u))}else t._foveatedFactor=0;const _=t.refine===V["a"].REPLACE,f=i._skipLevelOfDetail;if(_&&!f||!i.foveatedScreenSpaceError||1===i.foveatedConeSize||t._priorityProgressiveResolution&&_&&f||i._pass===L["a"].PRELOAD_FLIGHT||i._pass===L["a"].PRELOAD)return!1;const b=1-Math.cos(.5*n.frustum.fov),y=i.foveatedConeSize*b;if(t._foveatedFactor<=y)return!1;const m=b-y,g=p["a"].clamp((t._foveatedFactor-y)/m,0,1),O=i.foveatedInterpolationCallback(i.foveatedMinimumScreenSpaceErrorRelaxation,i.maximumScreenSpaceError,g),S=0===t._screenSpaceError&&Object(u["a"])(t.parent)?.5*t.parent._screenSpaceError:t._screenSpaceError;return i.maximumScreenSpaceError-O<=S}const Q=new b["a"];function J(t,e){if(t.progressiveResolutionHeightFraction<=0||t.progressiveResolutionHeightFraction>.5)return!1;let i=e._screenSpaceErrorProgressiveResolution>t._maximumScreenSpaceError;e._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1;const n=e.parent,o=t._maximumScreenSpaceError,r=e._screenSpaceErrorProgressiveResolution<=o,a=Object(u["a"])(n)&&n._screenSpaceErrorProgressiveResolution>o;return r&&a&&(e._priorityProgressiveResolutionScreenSpaceErrorLeaf=!0,i=!0),i}function Z(t,e){const i=e.parent,n=Object(u["a"])(i)&&(!t._skipLevelOfDetail||0===e._screenSpaceError||i.hasTilesetContent||i.hasImplicitContent),o=n?i._screenSpaceError:e._screenSpaceError;return t.root._screenSpaceError-o}function tt(t){if(Object(u["a"])(t.expireDuration)){const e=b["a"].now(Q);b["a"].addSeconds(e,t.expireDuration,e),Object(u["a"])(t.expireDate)?b["a"].lessThan(t.expireDate,e)&&b["a"].clone(e,t.expireDate):t.expireDate=b["a"].clone(e)}}function et(t){return function(){return t._priority}}function it(t){let e=t._content;const i=t._tileset;if(!Object(u["a"])(e)){const n=Object(z["a"])(t._header,"3DTILES_multiple_contents")?t._header.extensions["3DTILES_multiple_contents"]:t._header;e=new F["a"](i,t,t._contentResource.clone(),n),t._content=e}const n=e.requestInnerContents();return n>0?n:(t._contentState=j["a"].LOADING,t._contentReadyToProcessPromise=Object(l["a"])(),t._contentReadyPromise=Object(l["a"])(),e.contentsFetchedPromise.then((function(){if(t._contentState===j["a"].LOADING){if(!t.isDestroyed())return t._contentState=j["a"].PROCESSING,t._contentReadyToProcessPromise.resolve(e),e.readyPromise.then((function(e){t.isDestroyed()?nt(t,i,"Tile was unloaded while content was processing"):(t._selectedFrame=0,t.lastStyleTime=0,b["a"].now(t._loadTimestamp),t._contentState=j["a"].READY,t._contentReadyPromise.resolve(e))}));nt(t,i,"Tile was unloaded while content was loading")}})).catch((function(e){nt(t,i,e)})),0)}function nt(t,e,i){t._contentState===j["a"].PROCESSING&&--e.statistics.numberOfTilesProcessing,t._contentState=j["a"].FAILED,t._contentReadyPromise.reject(i),t._contentReadyToProcessPromise.reject(i)}function ot(t){const e=t._contentResource.clone(),i=t.contentExpired;i&&e.setQueryParameters({expired:t.expireDate.toString()});const n=new T["a"]({throttle:!0,throttleByServer:!0,type:D["a"].TILES3D,priorityFunction:et(t),serverKey:t._serverKey});t._request=n,e.request=n;const o=e.fetchArrayBuffer();if(!Object(u["a"])(o))return 1;const r=t._contentState,a=t._tileset;return t._contentState=j["a"].LOADING,t._contentReadyToProcessPromise=Object(l["a"])(),t._contentReadyPromise=Object(l["a"])(),++a.statistics.numberOfPendingRequests,o.then((function(e){if(t.isDestroyed())return void rt(t,a);const n=at(t,e);return i&&(t.expireDate=void 0),t._content=n,t._contentState=j["a"].PROCESSING,t._contentReadyToProcessPromise.resolve(n),--a.statistics.numberOfPendingRequests,n.readyPromise.then((function(e){t.isDestroyed()?rt(t,a):(tt(t),t._selectedFrame=0,t.lastStyleTime=0,b["a"].now(t._loadTimestamp),t._contentState=j["a"].READY,t._contentReadyPromise.resolve(e))}))})).catch((function(e){if(n.state===E["a"].CANCELLED)return t._contentState=r,--a.statistics.numberOfPendingRequests,void++a.statistics.numberOfAttemptedRequests;rt(t,a,e)})),0}function rt(t,e,i){t._contentState===j["a"].PROCESSING?--e.statistics.numberOfTilesProcessing:--e.statistics.numberOfPendingRequests,t._contentState=j["a"].FAILED,t._contentReadyPromise.reject(i),t._contentReadyToProcessPromise.reject(i)}function at(t,e){const i=Object(U["a"])(e),n=t._tileset;let o;n._disableSkipLevelOfDetail=n._disableSkipLevelOfDetail||i.contentType===x["a"].GEOMETRY||i.contentType===x["a"].VECTOR,i.contentType!==x["a"].IMPLICIT_SUBTREE&&i.contentType!==x["a"].IMPLICIT_SUBTREE_JSON||(t.hasImplicitContent=!0),i.contentType===x["a"].EXTERNAL_TILESET&&(t.hasTilesetContent=!0);const r=I["a"][i.contentType];o=Object(u["a"])(i.binaryPayload)?r(n,t,t._contentResource,i.binaryPayload.buffer,0):r(n,t,t._contentResource,i.jsonPayload);const a=Object(u["a"])(t._header.contents)?t._header.contents[0]:t._header.content;if(t.hasImplicitContentMetadata){const e=t.implicitSubtree,i=t.implicitCoordinates;o.metadata=e.getContentMetadataView(i,0)}else t.hasImplicitContent||(o.metadata=Object(B["a"])(n,a));const s=Object(M["a"])(n,a);return Object(u["a"])(s)&&(o.group=new v["a"]({metadata:s})),o}Y.prototype.getScreenSpaceError=function(t,e,i){const n=this._tileset,o=Object(c["a"])(i,1),r=Object(u["a"])(this.parent)?this.parent.geometricError:n._geometricError,a=e?r:this.geometricError;if(0===a)return 0;const s=t.camera;let l=s.frustum;const h=t.context,d=h.drawingBufferWidth,_=h.drawingBufferHeight*o;let f;if(t.mode===k["a"].SCENE2D||l instanceof O["a"]){Object(u["a"])(l._offCenterFrustum)&&(l=l._offCenterFrustum);const t=Math.max(l.top-l.bottom,l.right-l.left)/Math.max(d,_);f=a/t}else{const t=Math.max(this._distanceToCamera,p["a"].EPSILON7),e=s.frustum.sseDenominator;if(f=a*_/(t*e),n.dynamicScreenSpaceError){const e=n._dynamicScreenSpaceErrorComputedDensity,i=n.dynamicScreenSpaceErrorFactor,o=p["a"].fog(t,e)*i;f-=o}}return f/=t.pixelRatio,f},Y.prototype.updateVisibility=function(t){const e=this.parent,i=this._tileset,n=Object(u["a"])(e)?e.computedTransform:i.modelMatrix,o=Object(u["a"])(e)?e._visibilityPlaneMask:s["a"].MASK_INDETERMINATE;this.updateTransform(n),this._distanceToCamera=this.distanceToTile(t),this._centerZDepth=this.distanceToTileCenter(t),this._screenSpaceError=this.getScreenSpaceError(t,!1),this._screenSpaceErrorProgressiveResolution=this.getScreenSpaceError(t,!1,i.progressiveResolutionHeightFraction),this._visibilityPlaneMask=this.visibility(t,o),this._visible=this._visibilityPlaneMask!==s["a"].MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(t),this._priorityReverseScreenSpaceError=Z(i,this),this._priorityProgressiveResolution=J(i,this),this.priorityDeferred=X(this,t)},Y.prototype.updateExpiration=function(){if(Object(u["a"])(this.expireDate)&&this.contentReady&&!this.hasEmptyContent&&!this.hasMultipleContents){const t=b["a"].now(Q);b["a"].lessThan(this.expireDate,t)&&(this._contentState=j["a"].EXPIRED,this._expiredContent=this._content)}},Y.prototype.requestContent=function(){return this.hasEmptyContent?0:this.hasMultipleContents?it(this):ot(this)},Y.prototype.cancelRequests=function(){this.hasMultipleContents?this._content.cancelRequests():this._request.cancel()},Y.prototype.unloadContent=function(){this.hasEmptyContent||this.hasTilesetContent||this.hasImplicitContent||(this._content=this._content&&this._content.destroy(),this._contentState=j["a"].UNLOADED,this._contentReadyToProcessPromise=void 0,this._contentReadyPromise=void 0,this.lastStyleTime=0,this.clippingPlanesDirty=0===this._clippingPlanesState,this._clippingPlanesState=0,this._debugColorizeTiles=!1,this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy())};const st=new n["a"];function ct(t,e){if(e.mode!==k["a"].SCENE3D&&!Object(u["a"])(t._boundingVolume2D)){const i=t._boundingVolume.boundingSphere,o=n["a"].projectTo2D(i,e.mapProjection,st);t._boundingVolume2D=new H["a"](o.center,o.radius)}return e.mode!==k["a"].SCENE3D?t._boundingVolume2D:t._boundingVolume}function lt(t,e){if(e.mode!==k["a"].SCENE3D&&!Object(u["a"])(t._contentBoundingVolume2D)){const i=t._contentBoundingVolume.boundingSphere,o=n["a"].projectTo2D(i,e.mapProjection,st);t._contentBoundingVolume2D=new H["a"](o.center,o.radius)}return e.mode!==k["a"].SCENE3D?t._contentBoundingVolume2D:t._contentBoundingVolume}Y.prototype.visibility=function(t,e){const i=t.cullingVolume,n=ct(this,t),o=this._tileset,r=o.clippingPlanes;if(Object(u["a"])(r)&&r.enabled){const t=r.computeIntersectionWithBoundingVolume(n,o.clippingPlanesOriginMatrix);if(this._isClipped=t!==f["a"].INSIDE,t===f["a"].OUTSIDE)return s["a"].MASK_OUTSIDE}return i.computeVisibilityWithPlaneMask(n,e)},Y.prototype.contentVisibility=function(t){if(!Object(u["a"])(this._contentBoundingVolume))return f["a"].INSIDE;if(this._visibilityPlaneMask===s["a"].MASK_INSIDE)return f["a"].INSIDE;const e=t.cullingVolume,i=lt(this,t),n=this._tileset,o=n.clippingPlanes;if(Object(u["a"])(o)&&o.enabled){const t=o.computeIntersectionWithBoundingVolume(i,n.clippingPlanesOriginMatrix);if(this._isClipped=t!==f["a"].INSIDE,t===f["a"].OUTSIDE)return f["a"].OUTSIDE}return e.computeVisibility(i)},Y.prototype.distanceToTile=function(t){const e=ct(this,t);return e.distanceToCamera(t)};const ut=new o["a"];Y.prototype.distanceToTileCenter=function(t){const e=ct(this,t),i=e.boundingVolume,n=o["a"].subtract(i.center,t.camera.positionWC,ut);return o["a"].dot(t.camera.directionWC,n)},Y.prototype.insideViewerRequestVolume=function(t){const e=this._viewerRequestVolume;return!Object(u["a"])(e)||0===e.distanceToCamera(t)};const ht=new y["a"],dt=new o["a"],_t=new y["a"],ft=new o["a"],bt=new S["a"],pt=new g["a"],yt=new m["a"];function mt(t,e,i){let n=o["a"].fromElements(t[0],t[1],t[2],ft),r=y["a"].fromArray(t,3,_t);n=m["a"].multiplyByPoint(e,n,n);const a=m["a"].getMatrix3(e,ht);return r=y["a"].multiply(a,r,r),Object(u["a"])(i)?(i.update(n,r),i):new G["a"](n,r)}function gt(t,e,i,n){const o=S["a"].unpack(t,0,bt),r=t[4],a=t[5],s=g["a"].fromRectangle(o,r,a,_["a"].WGS84,pt);let c=s.center,l=s.halfAxes;e=m["a"].multiplyTransformation(e,m["a"].inverseTransformation(i,yt),yt),c=m["a"].multiplyByPoint(e,c,c);const h=m["a"].getMatrix3(e,ht);return l=y["a"].multiply(h,l,l),Object(u["a"])(n)&&n instanceof G["a"]?(n.update(c,l),n):new G["a"](c,l)}function Ot(t,e,i,n){if(!m["a"].equalsEpsilon(e,i,p["a"].EPSILON8))return gt(t,e,i,n);if(Object(u["a"])(n))return n;const o=S["a"].unpack(t,0,bt);return new q["a"]({rectangle:o,minimumHeight:t[4],maximumHeight:t[5]})}function St(t,e,i){let n=o["a"].fromElements(t[0],t[1],t[2],ft),r=t[3];n=m["a"].multiplyByPoint(e,n,n);const a=m["a"].getScale(e,dt),s=o["a"].maximumComponent(a);return r*=s,Object(u["a"])(i)?(i.update(n,r),i):new H["a"](n,r)}function Tt(t,e,i,n){if(!n.isRender)return;const o=Object(u["a"])(t._header.content)&&Object(u["a"])(t._header.content.boundingVolume),s=t.hasEmptyContent||t.hasTilesetContent||t.hasImplicitContent,c=e.debugShowBoundingVolume||e.debugShowContentBoundingVolume&&!o;if(c){let e;e=t._finalResolution?s?r["a"].DARKGRAY:r["a"].WHITE:r["a"].YELLOW,Object(u["a"])(t._debugBoundingVolume)||(t._debugBoundingVolume=t._boundingVolume.createDebugVolume(e)),t._debugBoundingVolume.update(i);const n=t._debugBoundingVolume.getGeometryInstanceAttributes("outline");n.color=a["a"].toValue(e,n.color)}else!c&&Object(u["a"])(t._debugBoundingVolume)&&(t._debugBoundingVolume=t._debugBoundingVolume.destroy());e.debugShowContentBoundingVolume&&o?(Object(u["a"])(t._debugContentBoundingVolume)||(t._debugContentBoundingVolume=t._contentBoundingVolume.createDebugVolume(r["a"].BLUE)),t._debugContentBoundingVolume.update(i)):!e.debugShowContentBoundingVolume&&Object(u["a"])(t._debugContentBoundingVolume)&&(t._debugContentBoundingVolume=t._debugContentBoundingVolume.destroy()),e.debugShowViewerRequestVolume&&Object(u["a"])(t._viewerRequestVolume)?(Object(u["a"])(t._debugViewerRequestVolume)||(t._debugViewerRequestVolume=t._viewerRequestVolume.createDebugVolume(r["a"].YELLOW)),t._debugViewerRequestVolume.update(i)):!e.debugShowViewerRequestVolume&&Object(u["a"])(t._debugViewerRequestVolume)&&(t._debugViewerRequestVolume=t._debugViewerRequestVolume.destroy());const l=e.debugColorizeTiles&&!t._debugColorizeTiles||Object(u["a"])(e._heatmap.tilePropertyName),h=!e.debugColorizeTiles&&t._debugColorizeTiles;l?(e._heatmap.colorize(t,i),t._debugColorizeTiles=!0,t.color=t._debugColor):h&&(t._debugColorizeTiles=!1,t.color=r["a"].WHITE),t._colorDirty&&(t._colorDirty=!1,t._content.applyDebugSettings(!0,t._color)),h&&e.makeStyleDirty()}function Ct(t,e,i){const n=t._content,o=t._expiredContent;if(!t.hasMultipleContents&&Object(u["a"])(o)){if(!t.contentReady)return void o.update(e,i);t._expiredContent.destroy(),t._expiredContent=void 0}n.update(e,i)}function Et(t,e){const i=e.clippingPlanes;let n=0;Object(u["a"])(i)&&t._isClipped&&i.enabled&&(n=i.clippingPlanesState),n!==t._clippingPlanesState&&(t._clippingPlanesState=n,t.clippingPlanesDirty=!0)}Y.prototype.createBoundingVolume=function(t,e,i){if(!Object(u["a"])(t))throw new w["a"]("boundingVolume must be defined");if(Object(z["a"])(t,"3DTILES_bounding_volume_S2"))return new W["a"](t.extensions["3DTILES_bounding_volume_S2"]);if(Object(u["a"])(t.box))return mt(t.box,e,i);if(Object(u["a"])(t.region))return Ot(t.region,e,this._initialTransform,i);if(Object(u["a"])(t.sphere))return St(t.sphere,e,i);throw new w["a"]("boundingVolume must contain a sphere, region, or box")},Y.prototype.updateTransform=function(t){t=Object(c["a"])(t,m["a"].IDENTITY);const e=m["a"].multiply(t,this.transform,yt),i=!m["a"].equals(e,this.computedTransform);if(!i)return;m["a"].clone(e,this.computedTransform);const n=this._header,o=this._header.content;this._boundingVolume=this.createBoundingVolume(n.boundingVolume,this.computedTransform,this._boundingVolume),Object(u["a"])(this._contentBoundingVolume)&&(this._contentBoundingVolume=this.createBoundingVolume(o.boundingVolume,this.computedTransform,this._contentBoundingVolume)),Object(u["a"])(this._viewerRequestVolume)&&(this._viewerRequestVolume=this.createBoundingVolume(n.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)),this.updateGeometricErrorScale(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy()},Y.prototype.updateGeometricErrorScale=function(){const t=m["a"].getScale(this.computedTransform,dt),e=o["a"].maximumComponent(t);this.geometricError=this._geometricError*e},Y.prototype.update=function(t,e,i){const n=e.commandList.length;Et(this,t),Tt(this,t,e,i),Ct(this,t,e);const o=e.commandList.length,r=o-n;this._commandsLength=r;for(let a=0;a<r;++a){const t=e.commandList[n+a],i=t.pass===K["a"].TRANSLUCENT;t.depthForTranslucentClassification=i}this.clippingPlanesDirty=!1};const Dt=[];function Pt(t,e,i){const n=t*Math.pow(10,e),o=parseInt(n);return o*Math.pow(10,i)}function wt(t,e,i){return Math.max(p["a"].normalize(t,e,i)-p["a"].EPSILON7,0)}Y.prototype.process=function(t,e){const i=e.commandList;e.commandList=Dt,this._content.update(t,e),Dt.length=0,e.commandList=i},Y.prototype.updatePriority=function(){const t=this.tileset,e=t.preferLeaves,i=t._minimumPriority,n=t._maximumPriority,o=4,r=1,a=0,s=o,c=a+s,l=o,u=c+l,h=r,d=Math.pow(10,u),_=u+h,f=r,b=Math.pow(10,_),p=_+f,y=Math.pow(10,p);let m=wt(this._depth,i.depth,n.depth);m=e?1-m:m;const g=!t._skipLevelOfDetail&&this.refine===V["a"].REPLACE,O=g?wt(this._priorityHolder._distanceToCamera,i.distance,n.distance):wt(this._priorityReverseScreenSpaceError,i.reverseScreenSpaceError,n.reverseScreenSpaceError),S=Pt(O,s,a),T=this._priorityProgressiveResolution?0:d,C=wt(this._priorityHolder._foveatedFactor,i.foveatedFactor,n.foveatedFactor),E=Pt(C,l,c),D=this.priorityDeferred?b:0,P=t._pass===L["a"].PRELOAD_FLIGHT?0:y;this._priority=m+S+T+E+D+P},Y.prototype.isDestroyed=function(){return!1},Y.prototype.destroy=function(){return this._content=this._content&&this._content.destroy(),this._expiredContent=this._expiredContent&&!this._expiredContent.isDestroyed()&&this._expiredContent.destroy(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy(),Object(d["a"])(this)},e["a"]=Y}}]);