(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors~ac0e8059"],{"1d6b":function(e,t,n){"use strict";var i=n("8656"),a=n("dde0"),r=n("6b82"),o=n("8d54"),s=n("ae9b"),c=n("44e9"),u=n("4051"),l=n("2fad"),d=n("0b4a"),h=n("3736"),m=n("1a5d"),f=n("61ad"),g=n("c937"),_=n("44c1"),p=n("21b7"),b=n("e2a6"),x=n("aecc"),O=n("8e1f"),y=n("3a5d"),S=n("7526"),C=n("7525"),w=n("ac4e"),R=n("2642"),j=n("a1a1"),E=n("21b0"),M=n("0dea"),v=n("b8b5"),T=n("d767"),L=n("722e"),A=n("0238"),P=n("82ba"),B=n("1b9c"),I=n("9f38"),N=n("6f7c"),D=n("cedf"),U=n("6f54"),F=n("6ba7"),k=n("d5cf"),z=n("51f2"),V=n("5027"),q=n("4d68"),H=n("8f7d"),G=n("b3ce"),W=n("1a75"),K=n("518b"),Z=n("2189"),$=n("dc15"),J=n("235f"),Y=n("5ecd"),X=n("a47e"),Q=n("7a95"),ee=n("c949"),te=n("3ba0"),ne=n("3e8a"),ie=n("4a2d"),ae=n("77df"),re=n("da23"),oe=n("bd5e"),se=n("ce1c"),ce=n("0650"),ue=n("5618"),le=n("0959"),de=n("1aeb"),he=n("3522"),me=n("0c68"),fe=n("701f"),ge=n("e575"),_e=n("f00f"),pe=n("434f"),be=n("9d83"),xe=n("8c69"),Oe=n("e81a"),ye=n("8289"),Se=n("5ef1"),Ce=n("f73c"),we=n("97be"),Re=n("dc6c"),je=n("ff3a"),Ee=n("66a6"),Me=n("4d91"),ve=n("8d2f");const Te=new a["a"],Le=ye["a"].ModelState,Ae="model/gltf-binary,model/gltf+json;q=0.8,application/json;q=0.2,*/*;q=0.01",Pe=v["a"].EPSILON16;function Be(e,t){e._cachedGltf=t}function Ie(e){this._gltf=e.gltf,this.ready=e.ready,this.modelsToLoad=[],this.count=0}Object.defineProperties(Ie.prototype,{gltf:{set:function(e){this._gltf=e},get:function(){return this._gltf}}}),Ie.prototype.makeReady=function(e){this.gltf=e;const t=this.modelsToLoad,n=t.length;for(let i=0;i<n;++i){const e=t[i];e.isDestroyed()||Be(e,this)}this.modelsToLoad=void 0,this.ready=!0};const Ne={},De={};function Ue(e){e=Object(m["a"])(e,m["a"].EMPTY_OBJECT);const t=e.cacheKey;let n;if(this._cacheKey=t,this._cachedGltf=void 0,this._releaseGltfJson=Object(m["a"])(e.releaseGltfJson,!1),Object(g["a"])(t)&&Object(g["a"])(Ne[t])&&Ne[t].ready)n=Ne[t],++n.count;else{let i=e.gltf;if(Object(g["a"])(i)){if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),i instanceof Uint8Array){const e=Object(ne["a"])(i);n=new Ie({gltf:e,ready:!0})}else n=new Ie({gltf:e.gltf,ready:!0});n.count=1,Object(g["a"])(t)&&(Ne[t]=n)}}Be(this,n);const r=Object(m["a"])(e.basePath,"");this._resource=I["a"].createIfNeeded(r);let o=e.credit;"string"===typeof o&&(o=new h["a"](o)),this._credit=o,this._resourceCredits=[],this._gltfCredits=[],this._showCreditsOnScreen=Object(m["a"])(e.showCreditsOnScreen,!1),this.show=Object(m["a"])(e.show,!0),this.silhouetteColor=Object(m["a"])(e.silhouetteColor,u["a"].RED),this._silhouetteColor=new u["a"],this._silhouetteColorPreviousAlpha=1,this._normalAttributeName=void 0,this.silhouetteSize=Object(m["a"])(e.silhouetteSize,0),this.modelMatrix=L["a"].clone(Object(m["a"])(e.modelMatrix,L["a"].IDENTITY)),this._modelMatrix=L["a"].clone(this.modelMatrix),this._clampedModelMatrix=void 0,this.scale=Object(m["a"])(e.scale,1),this._scale=this.scale,this.minimumPixelSize=Object(m["a"])(e.minimumPixelSize,0),this._minimumPixelSize=this.minimumPixelSize,this.maximumScale=e.maximumScale,this._maximumScale=this.maximumScale,this.id=e.id,this._id=e.id,this.heightReference=Object(m["a"])(e.heightReference,he["a"].NONE),this._heightReference=this.heightReference,this._heightChanged=!1,this._removeUpdateHeightCallback=void 0;const s=e.scene;this._scene=s,Object(g["a"])(s)&&Object(g["a"])(s.terrainProviderChanged)&&(this._terrainProviderChangedCallback=s.terrainProviderChanged.addEventListener((function(){this._heightChanged=!0}),this)),this._pickObject=e.pickObject,this._allowPicking=Object(m["a"])(e.allowPicking,!0),this._ready=!1,this._readyPromise=Object(f["a"])(),this.activeAnimations=new ge["a"](this),this.clampAnimations=Object(m["a"])(e.clampAnimations,!0),this._defaultTexture=void 0,this._incrementallyLoadTextures=Object(m["a"])(e.incrementallyLoadTextures,!0),this._asynchronous=Object(m["a"])(e.asynchronous,!0),this.shadows=Object(m["a"])(e.shadows,je["a"].ENABLED),this._shadows=this.shadows,this.color=u["a"].clone(Object(m["a"])(e.color,u["a"].WHITE)),this._colorPreviousAlpha=1,this.colorBlendMode=Object(m["a"])(e.colorBlendMode,se["a"].HIGHLIGHT),this.colorBlendAmount=Object(m["a"])(e.colorBlendAmount,.5),this._colorShadingEnabled=!1,this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,this._clippingPlanesState=0,this.referenceMatrix=void 0,this.backFaceCulling=Object(m["a"])(e.backFaceCulling,!0),this.showOutline=Object(m["a"])(e.showOutline,!0),this.splitDirection=Object(m["a"])(e.splitDirection,Ee["a"].NONE),this._splittingEnabled=!1,this.debugShowBoundingVolume=Object(m["a"])(e.debugShowBoundingVolume,!1),this._debugShowBoundingVolume=!1,this.debugWireframe=Object(m["a"])(e.debugWireframe,!1),this._debugWireframe=!1,this._distanceDisplayCondition=e.distanceDisplayCondition,this._addBatchIdToGeneratedShaders=e.addBatchIdToGeneratedShaders,this._precreatedAttributes=e.precreatedAttributes,this._vertexShaderLoaded=e.vertexShaderLoaded,this._fragmentShaderLoaded=e.fragmentShaderLoaded,this._uniformMapLoaded=e.uniformMapLoaded,this._pickIdLoaded=e.pickIdLoaded,this._ignoreCommands=Object(m["a"])(e.ignoreCommands,!1),this._requestType=e.requestType,this._upAxis=Object(m["a"])(e.upAxis,ae["a"].Y),this._gltfForwardAxis=ae["a"].Z,this._forwardAxis=e.forwardAxis,this.cull=Object(m["a"])(e.cull,!0),this.opaquePass=Object(m["a"])(e.opaquePass,z["a"].OPAQUE),this._computedModelMatrix=new L["a"],this._clippingPlanesMatrix=L["a"].clone(L["a"].IDENTITY),this._iblReferenceFrameMatrix=T["a"].clone(T["a"].IDENTITY),this._initialRadius=void 0,this._boundingSphere=void 0,this._scaledBoundingSphere=new i["a"],this._state=Le.NEEDS_LOAD,this._loadResources=void 0,this._mode=void 0,this._perNodeShowDirty=!1,this._cesiumAnimationsDirty=!1,this._dirty=!1,this._maxDirtyNumber=0,this._runtime={animations:void 0,articulationsByName:void 0,articulationsByStageKey:void 0,stagesByKey:void 0,rootNodes:void 0,nodes:void 0,nodesByName:void 0,skinnedNodes:void 0,meshesByName:void 0,materialsByName:void 0,materialsById:void 0},this._uniformMaps={},this._extensionsUsed=void 0,this._extensionsRequired=void 0,this._quantizedUniforms={},this._programPrimitives={},this._rendererResources={buffers:{},vertexArrays:{},programs:{},sourceShaders:{},silhouettePrograms:{},textures:{},samplers:{},renderStates:{}},this._cachedRendererResources=void 0,this._loadRendererResourcesFromCache=!1,this._dequantizeInShader=Object(m["a"])(e.dequantizeInShader,!0),this._decodedData={},this._cachedGeometryByteLength=0,this._cachedTexturesByteLength=0,this._geometryByteLength=0,this._texturesByteLength=0,this._trianglesLength=0,this._pointsLength=0,this._sourceTechniques={},this._sourcePrograms={},this._quantizedVertexShaders={},this._nodeCommands=[],this._pickIds=[],this._rtcCenter=void 0,this._rtcCenterEye=void 0,this._rtcCenter3D=void 0,this._rtcCenter2D=void 0,this._sourceVersion=void 0,this._sourceKHRTechniquesWebGL=void 0,this._lightColor=a["a"].clone(e.lightColor);const c=Object(g["a"])(e.imageBasedLightingFactor)||Object(g["a"])(e.luminanceAtZenith)||Object(g["a"])(e.sphericalHarmonicCoefficients)||Object(g["a"])(e.specularEnvironmentMaps);Object(g["a"])(e.imageBasedLighting)?(this._imageBasedLighting=e.imageBasedLighting,this._shouldDestroyImageBasedLighting=!1):c?(Object(_["a"])("ImageBasedLightingConstructor","Individual image-based lighting parameters were deprecated in Cesium 1.92. They will be removed in version 1.94. Use options.imageBasedLighting instead."),this._imageBasedLighting=new j["a"]({imageBasedLightingFactor:e.imageBasedLightingFactor,luminanceAtZenith:e.luminanceAtZenith,sphericalHarmonicCoefficients:e.sphericalHarmonicCoefficients,specularEnvironmentMaps:e.specularEnvironmentMaps}),this._shouldDestroyImageBasedLighting=!0):(this._imageBasedLighting=new j["a"],this._shouldDestroyImageBasedLighting=!0),this._shouldRegenerateShaders=!1}function Fe(e){return e.stencilBuffer}function ke(e){return!u["a"].equals(e.color,u["a"].WHITE)||e.colorBlendMode!==se["a"].HIGHLIGHT}function ze(e){const t=e._clippingPlanes;return Object(g["a"])(t)&&t.enabled&&0!==t.length}function Ve(e){const t=Object(C["a"])(e);return"glTF"===t}function qe(e,t,n){if(e._state!==Le.LOADED)throw new b["a"]("The model is not loaded.  Use Model.readyPromise or wait for Model.ready to be true.");if(!Object(g["a"])(n))throw new b["a"]("name is required.");return e._runtime[t][n]}Object.defineProperties(Ue.prototype,{gltf:{get:function(){return Object(g["a"])(this._cachedGltf)?this._cachedGltf.gltf:void 0}},releaseGltfJson:{get:function(){return this._releaseGltfJson}},cacheKey:{get:function(){return this._cacheKey}},basePath:{get:function(){return this._resource.url}},boundingSphere:{get:function(){if(this._state!==Le.LOADED)throw new b["a"]("The model is not loaded.  Use Model.readyPromise or wait for Model.ready to be true.");let e=this.modelMatrix;this.heightReference!==he["a"].NONE&&this._clampedModelMatrix&&(e=this._clampedModelMatrix);const t=L["a"].getScale(e,Te),n=Object(g["a"])(this.maximumScale)?Math.min(this.maximumScale,this.scale):this.scale;a["a"].multiplyByScalar(t,n,t);const i=this._scaledBoundingSphere;return i.center=a["a"].multiplyComponents(this._boundingSphere.center,t,i.center),i.radius=a["a"].maximumComponent(t)*this._initialRadius,Object(g["a"])(this._rtcCenter)&&a["a"].add(this._rtcCenter,i.center,i.center),i}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},asynchronous:{get:function(){return this._asynchronous}},allowPicking:{get:function(){return this._allowPicking}},incrementallyLoadTextures:{get:function(){return this._incrementallyLoadTextures}},pendingTextureLoads:{get:function(){return Object(g["a"])(this._loadResources)?this._loadResources.pendingTextureLoads:0}},dirty:{get:function(){return this._dirty}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if(Object(g["a"])(e)&&e.far<=e.near)throw new b["a"]("far must be greater than near");this._distanceDisplayCondition=x["a"].clone(e,this._distanceDisplayCondition)}},extensionsUsed:{get:function(){return Object(g["a"])(this._extensionsUsed)||(this._extensionsUsed=ye["a"].getUsedExtensions(this.gltf)),this._extensionsUsed}},extensionsRequired:{get:function(){return Object(g["a"])(this._extensionsRequired)||(this._extensionsRequired=ye["a"].getRequiredExtensions(this.gltf)),this._extensionsRequired}},upAxis:{get:function(){return this._upAxis}},forwardAxis:{get:function(){return Object(g["a"])(this._forwardAxis)?this._forwardAxis:this._gltfForwardAxis}},trianglesLength:{get:function(){return this._trianglesLength}},pointsLength:{get:function(){return this._pointsLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},texturesByteLength:{get:function(){return this._texturesByteLength}},cachedGeometryByteLength:{get:function(){return this._cachedGeometryByteLength}},cachedTexturesByteLength:{get:function(){return this._cachedTexturesByteLength}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){e!==this._clippingPlanes&&oe["a"].setOwner(e,this,"_clippingPlanes")}},pickIds:{get:function(){return this._pickIds}},lightColor:{get:function(){return this._lightColor},set:function(e){const t=this._lightColor;e===t||a["a"].equals(e,t)||(this._shouldRegenerateShaders=this._shouldRegenerateShaders||Object(g["a"])(t)&&!Object(g["a"])(e)||Object(g["a"])(e)&&!Object(g["a"])(t),this._lightColor=a["a"].clone(e,t))}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){s["a"].typeOf.object("imageBasedLighting",this._imageBasedLighting),e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1,this._shouldRegenerateShaders=!0)}},imageBasedLightingFactor:{get:function(){return this._imageBasedLighting.imageBasedLightingFactor},set:function(e){this._imageBasedLighting.imageBasedLightingFactor=e}},luminanceAtZenith:{get:function(){return this._imageBasedLighting.luminanceAtZenith},set:function(e){this._imageBasedLighting.luminanceAtZenith=e}},sphericalHarmonicCoefficients:{get:function(){return this._imageBasedLighting.sphericalHarmonicCoefficients},set:function(e){this._imageBasedLighting.sphericalHarmonicCoefficients=e}},specularEnvironmentMaps:{get:function(){return this._imageBasedLighting.specularEnvironmentMaps},set:function(e){this._imageBasedLighting.specularEnvironmentMaps=e}},credit:{get:function(){return this._credit}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){if(this._showCreditsOnScreen!==e){Object(g["a"])(this._credit)&&(this._credit.showOnScreen=e);const t=this._resourceCredits.length;for(let i=0;i<t;i++)this._resourceCredits[i].showOnScreen=e;const n=this._gltfCredits.length;for(let i=0;i<n;i++)this._gltfCredits[i].showOnScreen=e}this._showCreditsOnScreen=e}}}),Ue.silhouetteSupported=function(e){return Fe(e.context)},Ue.fromGltf=function(e){if(!Object(g["a"])(e)||!Object(g["a"])(e.url))throw new b["a"]("options.url is required");const t=e.url;e=Object(c["a"])(e);const n=I["a"].createIfNeeded(t),i=Object(m["a"])(e.basePath,n.clone()),a=I["a"].createIfNeeded(i);let r=Object(m["a"])(e.cacheKey,De[Object(y["a"])(n.url)]);Object(g["a"])(r)||(r=Object(d["a"])(),De[Object(y["a"])(n.url)]=r),Object(g["a"])(e.basePath)&&!Object(g["a"])(e.cacheKey)&&(r+=a.url),e.cacheKey=r,e.basePath=a;const o=new Ue(e);let s=Ne[r];return Object(g["a"])(s)?s.ready||(++s.count,s.modelsToLoad.push(o)):(s=new Ie({ready:!1}),s.count=1,s.modelsToLoad.push(o),Be(o,s),Ne[r]=s,Object(g["a"])(n.headers.Accept)||(n.headers.Accept=Ae),n.fetchArrayBuffer().then((function(e){const t=new Uint8Array(e);if(Ve(t)){const e=Object(ne["a"])(t);s.makeReady(e)}else{const e=Object(S["a"])(t);s.makeReady(e)}const i=o._resourceCredits,a=n.credits;if(Object(g["a"])(a)){const e=a.length;for(let t=0;t<e;t++)i.push(a[t])}})).catch(ye["a"].getFailedLoadFunction(o,"model",n.url))),o},Ue._gltfCache=Ne,Ue.prototype.getNode=function(e){const t=qe(this,"nodesByName",e);return Object(g["a"])(t)?t.publicNode:void 0},Ue.prototype.getMesh=function(e){return qe(this,"meshesByName",e)},Ue.prototype.getMaterial=function(e){return qe(this,"materialsByName",e)},Ue.prototype.setArticulationStage=function(e,t){s["a"].typeOf.number("value",t);const n=qe(this,"stagesByKey",e),i=qe(this,"articulationsByStageKey",e);Object(g["a"])(n)&&Object(g["a"])(i)&&(t=v["a"].clamp(t,n.minimumValue,n.maximumValue),v["a"].equalsEpsilon(n.currentValue,t,Pe)||(n.currentValue=t,i.isDirty=!0))};const He=new a["a"],Ge=new T["a"];function We(e,t){s["a"].typeOf.object("stage",e),s["a"].typeOf.object("result",t);const n=e.currentValue,i=He;let a;switch(e.type){case"xRotate":a=T["a"].fromRotationX(v["a"].toRadians(n),Ge),L["a"].multiplyByMatrix3(t,a,t);break;case"yRotate":a=T["a"].fromRotationY(v["a"].toRadians(n),Ge),L["a"].multiplyByMatrix3(t,a,t);break;case"zRotate":a=T["a"].fromRotationZ(v["a"].toRadians(n),Ge),L["a"].multiplyByMatrix3(t,a,t);break;case"xTranslate":i.x=n,i.y=0,i.z=0,L["a"].multiplyByTranslation(t,i,t);break;case"yTranslate":i.x=0,i.y=n,i.z=0,L["a"].multiplyByTranslation(t,i,t);break;case"zTranslate":i.x=0,i.y=0,i.z=n,L["a"].multiplyByTranslation(t,i,t);break;case"xScale":i.x=n,i.y=1,i.z=1,L["a"].multiplyByScale(t,i,t);break;case"yScale":i.x=1,i.y=n,i.z=1,L["a"].multiplyByScale(t,i,t);break;case"zScale":i.x=1,i.y=1,i.z=n,L["a"].multiplyByScale(t,i,t);break;case"uniformScale":L["a"].multiplyByUniformScale(t,n,t);break;default:break}return t}const Ke=new L["a"];function Ze(e){const t=e.gltf,n=e._loadResources;X["a"].buffer(t,(function(e,t){n.buffers[t]=e.extras._pipeline.source}))}function $e(e,t){return function(n){const i=e._loadResources,a=new Uint8Array(n);--i.pendingBufferLoads,e.gltf.buffers[t].extras._pipeline.source=a}}function Je(e){const t=e.gltf.bufferViews,n=e._loadResources.vertexBuffersToCreate;X["a"].bufferView(e.gltf,(function(e,t){e.target===D["a"].ARRAY_BUFFER&&n.enqueue(t)}));const i=e._loadResources.indexBuffersToCreate,a={};X["a"].accessor(e.gltf,(function(e){const n=e.bufferView;if(!Object(g["a"])(n))return;const r=t[n];r.target!==D["a"].ELEMENT_ARRAY_BUFFER||Object(g["a"])(a[n])||(a[n]=!0,i.enqueue({id:n,componentType:e.componentType}))}))}function Ye(e){const t=e.gltf;if(!Object(ee["a"])(t,"KHR_techniques_webgl"))return;const n=e._sourcePrograms,i=e._sourceTechniques,a=t.extensions.KHR_techniques_webgl.programs;X["a"].technique(t,(function(e,t){i[t]=Object(c["a"])(e);const r=e.program;Object(g["a"])(n[r])||(n[r]=Object(c["a"])(a[r]))}))}function Xe(e,t,n){return function(i){const a=e._loadResources;a.shaders[n]={source:i,type:t,bufferView:void 0},--a.pendingShaderLoads,e._rendererResources.sourceShaders[n]=i}}function Qe(e){const t=e.gltf,n=t.buffers,i=t.bufferViews,a=e._rendererResources.sourceShaders;X["a"].shader(t,(function(t,r){if(Object(g["a"])(t.bufferView)){const e=t.bufferView,o=i[e],s=o.buffer,c=n[s],u=Object(w["a"])(c.extras._pipeline.source,o.byteOffset,o.byteLength);a[r]=u}else if(Object(g["a"])(t.extras._pipeline.source))a[r]=t.extras._pipeline.source;else{++e._loadResources.pendingShaderLoads;const n=e._resource.getDerivedResource({url:t.uri});n.fetchText().then(Xe(e,t.type,r)).catch(ye["a"].getFailedLoadFunction(e,"shader",n.url))}}))}function et(e){const t=e._sourceTechniques;for(const n in t)if(t.hasOwnProperty(n)){const i=t[n];e._loadResources.programsToCreate.enqueue({programId:i.program,techniqueId:n})}}function tt(e){const t={},n={},i={};e._runtime.articulationsByName=t,e._runtime.articulationsByStageKey=n,e._runtime.stagesByKey=i;const a=e.gltf;if(!Object(ee["a"])(a,"AGI_articulations")||!Object(g["a"])(a.extensions)||!Object(g["a"])(a.extensions.AGI_articulations))return;const r=a.extensions.AGI_articulations.articulations;if(!Object(g["a"])(r))return;const o=r.length;for(let s=0;s<o;++s){const e=Object(c["a"])(r[s]);e.nodes=[],e.isDirty=!0,t[e.name]=e;const a=e.stages.length;for(let t=0;t<a;++t){const a=e.stages[t];a.currentValue=a.initialValue;const r=`${e.name} ${a.name}`;n[r]=e,i[r]=a}}}function nt(e,t){return function(n){const i=e._loadResources;let a;--i.pendingTextureLoads,Array.isArray(n)&&(a=n.slice(1,n.length).map((function(e){return e.bufferView})),n=n[0]),i.texturesToCreate.enqueue({id:t,image:n,bufferView:n.bufferView,width:n.width,height:n.height,internalFormat:n.internalFormat,mipLevels:a})}}Ue.prototype.applyArticulations=function(){const e=this._runtime.articulationsByName;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];if(n.isDirty){n.isDirty=!1;const e=n.nodes.length;for(let t=0;t<e;++t){const e=n.nodes[t];let i=L["a"].clone(e.originalMatrix,Ke);const a=n.stages.length;for(let t=0;t<a;++t){const e=n.stages[t];i=We(e,i)}e.matrix=i}}}};const it=/(^data:image\/ktx2)|(\.ktx2$)/i;function at(e,t,n){const i=e.gltf,a=i.images;let r;X["a"].texture(i,(function(i,o){let s=i.source;Object(g["a"])(i.extensions)&&Object(g["a"])(i.extensions.EXT_texture_webp)&&n?s=i.extensions.EXT_texture_webp.source:Object(g["a"])(i.extensions)&&Object(g["a"])(i.extensions.KHR_texture_basisu)&&t.supportsBasis&&(s=i.extensions.KHR_texture_basisu.source);const c=a[s],u=c.bufferView,l=c.mimeType;if(r=c.uri,Object(g["a"])(u))e._loadResources.texturesToCreateFromBufferView.enqueue({id:o,image:void 0,bufferView:u,mimeType:l});else{++e._loadResources.pendingTextureLoads;const t=e._resource.getDerivedResource({url:r});let n;n=it.test(r)?Object(M["a"])(t):t.fetchImage({skipColorSpaceConversion:!0,preferImageBitmap:!0}),n.then(nt(e,o,s)).catch(ye["a"].getFailedLoadFunction(e,"image",t.url))}}))}const rt=new L["a"];function ot(e){const t={},n={},i=[],a=e._loadResources.skinnedNodesIds,r=e._runtime.articulationsByName;X["a"].node(e.gltf,(function(o,s){const c={matrix:void 0,translation:void 0,rotation:void 0,scale:void 0,computedShow:!0,transformToRoot:new L["a"],computedMatrix:new L["a"],dirtyNumber:0,commands:[],inverseBindMatrices:void 0,bindShapeMatrix:void 0,joints:[],computedJointMatrices:[],jointName:o.jointName,weights:[],children:[],parents:[],publicNode:void 0};if(c.publicNode=new xe["a"](e,o,c,s,ye["a"].getTransform(o)),t[s]=c,n[o.name]=c,Object(g["a"])(o.skin)&&(a.push(s),i.push(c)),Object(g["a"])(o.extensions)&&Object(g["a"])(o.extensions.AGI_articulations)){const e=o.extensions.AGI_articulations.articulationName;if(Object(g["a"])(e)){let t=L["a"].clone(c.publicNode.originalMatrix,rt);const n=r[e];n.nodes.push(c.publicNode);const i=n.stages.length;for(let e=0;e<i;++e){const i=n.stages[e];t=We(i,t)}c.publicNode.matrix=t}}})),e._runtime.nodes=t,e._runtime.nodesByName=n,e._runtime.skinnedNodes=i}function st(e){const t=e.gltf,n=e._sourceTechniques,i={},a={},r=e._uniformMaps;X["a"].material(t,(function(t,o){r[o]={uniformMap:void 0,values:void 0,jointMatrixUniformName:void 0,morphWeightsUniformName:void 0};const s=new pe["a"](e,t,o);if(Object(g["a"])(t.extensions)&&Object(g["a"])(t.extensions.KHR_techniques_webgl)){const e=t.extensions.KHR_techniques_webgl.technique;s._technique=e,s._program=n[e].program,X["a"].materialValue(t,(function(e,t){Object(g["a"])(s._values)||(s._values={}),s._values[t]=Object(c["a"])(e)}))}i[t.name]=s,a[o]=s})),e._runtime.materialsByName=i,e._runtime.materialsById=a}function ct(e){const t={},n=e._runtime.materialsById;X["a"].mesh(e.gltf,(function(i,a){t[i.name]=new be["a"](i,n,a),(Object(g["a"])(e.extensionsUsed.WEB3D_quantized_attributes)||e._dequantizeInShader)&&X["a"].meshPrimitive(i,(function(t,n){const i=pt(e,t);let r=e._programPrimitives[i];Object(g["a"])(r)||(r={},e._programPrimitives[i]=r),r[`${a}.primitive.${n}`]=t}))})),e._runtime.meshesByName=t}function ut(e){const t=e.gltf.asset,n=t.copyright;if(!Object(g["a"])(n))return;const i=e._showCreditsOnScreen,a=n.split(";").map((function(e){return new h["a"](e.trim(),i)}));e._gltfCredits=a}const lt=function(){this.id=void 0,this.model=void 0,this.context=void 0};function dt(e,t,n){const i=t._loadResources,a=t.gltf.bufferViews;let r=a[e];Object(g["a"])(r)||(r=i.createdBufferViews[e]);const o=U["a"].createVertexBuffer({context:n,typedArray:i.getBuffer(r),usage:F["a"].STATIC_DRAW});o.vertexArrayDestroyable=!1,t._rendererResources.buffers[e]=o,t._geometryByteLength+=o.sizeInBytes}lt.prototype.set=function(e,t,n){this.id=e,this.model=t,this.context=n},lt.prototype.execute=function(){dt(this.id,this.model,this.context)};const ht=function(){this.id=void 0,this.componentType=void 0,this.model=void 0,this.context=void 0};function mt(e,t,n,i){const a=n._loadResources,r=n.gltf.bufferViews;let o=r[e];Object(g["a"])(o)||(o=a.createdBufferViews[e]);const s=U["a"].createIndexBuffer({context:i,typedArray:a.getBuffer(o),usage:F["a"].STATIC_DRAW,indexDatatype:t});s.vertexArrayDestroyable=!1,n._rendererResources.buffers[e]=s,n._geometryByteLength+=s.sizeInBytes}ht.prototype.set=function(e,t,n,i){this.id=e,this.componentType=t,this.model=n,this.context=i},ht.prototype.execute=function(){mt(this.id,this.componentType,this.model,this.context)};const ft=new lt,gt=new ht;function _t(e,t){const n=e._loadResources;if(0!==n.pendingBufferLoads)return;const i=t.context,a=n.vertexBuffersToCreate,r=n.indexBuffersToCreate;let o;if(e.asynchronous){while(a.length>0){if(ft.set(a.peek(),e,i),!t.jobScheduler.execute(ft,me["a"].BUFFER))break;a.dequeue()}while(r.length>0){if(o=r.peek(),gt.set(o.id,o.componentType,e,i),!t.jobScheduler.execute(gt,me["a"].BUFFER))break;r.dequeue()}}else{while(a.length>0)dt(a.dequeue(),e,i);while(r.length>0)o=r.dequeue(),mt(o.id,o.componentType,e,i)}}function pt(e,t){const n=e._runtime.materialsById[t.material];if(Object(g["a"])(n))return n._program}function bt(e,t,n){let i;const a=n._programPrimitives[t];if(!Object(g["a"])(a))return e;let r,o;for(r in a)if(a.hasOwnProperty(r)&&(i=a[r],pt(n,i)===t))break;if(n._programPrimitives[t]=void 0,n.extensionsUsed.WEB3D_quantized_attributes)o=ye["a"].modifyShaderForQuantizedAttributes(n.gltf,i,e),n._quantizedUniforms[t]=o.uniforms;else{const t=n._decodedData[r];if(!Object(g["a"])(t))return e;o=ye["a"].modifyShaderForDracoQuantizedAttributes(n.gltf,i,e,t.attributes)}return o.shader}function xt(e){return e=G["a"].replaceMain(e,"gltf_blend_main"),e+="uniform vec4 gltf_color; \nuniform float gltf_colorBlend; \nvoid main() \n{ \n    gltf_blend_main(); \n    gl_FragColor.rgb = mix(gl_FragColor.rgb, gltf_color.rgb, gltf_colorBlend); \n    float highlight = ceil(gltf_colorBlend); \n    gl_FragColor.rgb *= mix(gltf_color.rgb, vec3(1.0), highlight); \n    gl_FragColor.a *= gltf_color.a; \n} \n",e}function Ot(e,t,n){return Object(g["a"])(n)&&(e=n(e,t)),e}const yt=function(){this.programToCreate=void 0,this.model=void 0,this.context=void 0};function St(e,t,n){const i=e.programId,a=e.techniqueId,r=t._sourcePrograms[i],o=t._rendererResources.sourceShaders;let s=o[r.vertexShader];const c=o[r.fragmentShader],u=t._quantizedVertexShaders;if(t.extensionsUsed.WEB3D_quantized_attributes||t._dequantizeInShader){let e=u[i];Object(g["a"])(e)||(e=bt(s,i,t),u[i]=e),s=e}const l=Ot(s,i,t._vertexShaderLoaded);let d=Ot(c,i,t._fragmentShaderLoaded);Object(g["a"])(t._uniformMapLoaded)||(d="uniform vec4 czm_pickColor;\n"+d);const h=t._imageBasedLighting,m=h.enabled;if(m&&(d="#define USE_IBL_LIGHTING \n\n"+d),Object(g["a"])(t._lightColor)&&(d="#define USE_CUSTOM_LIGHT_COLOR \n\n"+d),("2.0"!==t._sourceVersion||t._sourceKHRTechniquesWebGL)&&(d=G["a"].replaceMain(d,"non_gamma_corrected_main"),d+="\nvoid main() { \n    non_gamma_corrected_main(); \n    gl_FragColor = czm_gammaCorrect(gl_FragColor); \n} \n"),Se["a"].isSupported(n)){const e=h.useSphericalHarmonicCoefficients,t=h.useSpecularEnvironmentMaps,n=e||t||m;n&&(d="uniform mat3 gltf_iblReferenceFrameMatrix; \n"+d),Object(g["a"])(h.sphericalHarmonicCoefficients)?d="#define DIFFUSE_IBL \n#define CUSTOM_SPHERICAL_HARMONICS \nuniform vec3 gltf_sphericalHarmonicCoefficients[9]; \n"+d:h.useDefaultSphericalHarmonics&&(d="#define DIFFUSE_IBL \n"+d),Object(g["a"])(h.specularEnvironmentMapAtlas)&&h.specularEnvironmentMapAtlas.ready?d="#define SPECULAR_IBL \n#define CUSTOM_SPECULAR_IBL \nuniform sampler2D gltf_specularMap; \nuniform vec2 gltf_specularMapSize; \nuniform float gltf_maxSpecularLOD; \n"+d:h.useDefaultSpecularMaps&&(d="#define SPECULAR_IBL \n"+d)}Object(g["a"])(h.luminanceAtZenith)&&(d="#define USE_SUN_LUMINANCE \nuniform float gltf_luminanceAtZenith;\n"+d),wt(i,a,d,l,t,n)}function Ct(e,t,n){const i=e.programId,a=e.techniqueId,r=t._sourcePrograms[i],o=t._rendererResources.sourceShaders,s=t._quantizedVertexShaders,c=t.clippingPlanes,u=ze(t);let l=o[r.vertexShader];const d=o[r.fragmentShader];(t.extensionsUsed.WEB3D_quantized_attributes||t._dequantizeInShader)&&(l=s[i]);let h=d;ke(t)&&(h=Ue._modifyShaderForColor(h)),u&&(h=Wn(h,c,n)),t.splitDirection!==Ee["a"].NONE&&(h=Me["a"].modifyFragmentShader(h));const m=Ot(l,i,t._vertexShaderLoaded);let f=Ot(h,i,t._fragmentShaderLoaded);Object(g["a"])(t._uniformMapLoaded)||(f="uniform vec4 czm_pickColor;\n"+f);const _=t._imageBasedLighting,p=_.enabled;if(p&&(f="#define USE_IBL_LIGHTING \n\n"+f),Object(g["a"])(t._lightColor)&&(f="#define USE_CUSTOM_LIGHT_COLOR \n\n"+f),("2.0"!==t._sourceVersion||t._sourceKHRTechniquesWebGL)&&(f=G["a"].replaceMain(f,"non_gamma_corrected_main"),f+="\nvoid main() { \n    non_gamma_corrected_main(); \n    gl_FragColor = czm_gammaCorrect(gl_FragColor); \n} \n"),Se["a"].isSupported(n)){const e=_.useSphericalHarmonicCoefficients,t=_.useSpecularEnvironmentMaps,n=e||t||p;n&&(f="uniform mat3 gltf_iblReferenceFrameMatrix; \n"+f),Object(g["a"])(_.sphericalHarmonicCoefficients)?f="#define DIFFUSE_IBL \n#define CUSTOM_SPHERICAL_HARMONICS \nuniform vec3 gltf_sphericalHarmonicCoefficients[9]; \n"+f:_.useDefaultSphericalHarmonics&&(f="#define DIFFUSE_IBL \n"+f),Object(g["a"])(_.specularEnvironmentMapAtlas)&&_.specularEnvironmentMapAtlas.ready?f="#define SPECULAR_IBL \n#define CUSTOM_SPECULAR_IBL \nuniform sampler2D gltf_specularMap; \nuniform vec2 gltf_specularMapSize; \nuniform float gltf_maxSpecularLOD; \n"+f:_.useDefaultSpecularMaps&&(f="#define SPECULAR_IBL \n"+f)}Object(g["a"])(_.luminanceAtZenith)&&(f="#define USE_SUN_LUMINANCE \nuniform float gltf_luminanceAtZenith;\n"+f),wt(i,a,f,m,t,n)}function wt(e,t,n,i,a,r){const o=a._sourceTechniques[t],s=ye["a"].createAttributeLocations(o,a._precreatedAttributes);a._rendererResources.programs[e]=H["a"].fromCache({context:r,vertexShaderSource:i,fragmentShaderSource:n,attributeLocations:s})}yt.prototype.set=function(e,t,n){this.programToCreate=e,this.model=t,this.context=n},yt.prototype.execute=function(){St(this.programToCreate,this.model,this.context)};const Rt=new yt;function jt(e,t){const n=e._loadResources,i=n.programsToCreate;if(0!==n.pendingShaderLoads)return;if(0!==n.pendingBufferLoads)return;const a=t.context;if(e.asynchronous)while(i.length>0){if(Rt.set(i.peek(),e,a),!t.jobScheduler.execute(Rt,me["a"].PROGRAM))break;i.dequeue()}else while(i.length>0)St(i.dequeue(),e,a)}function Et(e,t){return function(n){e.texturesToCreate.enqueue({id:t.id,image:n,bufferView:void 0}),--e.pendingBufferViewToImage}}function Mt(e){const t=e._loadResources;if(0===t.pendingBufferLoads)while(t.texturesToCreateFromBufferView.length>0){const n=t.texturesToCreateFromBufferView.dequeue(),i=e.gltf,a=i.bufferViews[n.bufferView],r=i.textures[n.id].source,o=ye["a"].getFailedLoadFunction(e,"image",`id: ${n.id}, bufferView: ${n.bufferView}`);if("image/ktx2"===n.mimeType){const i=new Uint8Array(t.getBuffer(a));Object(M["a"])(i).then(nt(e,n.id,r)).catch(o),++e._loadResources.pendingTextureLoads}else{const e=Et(t,n);Object(E["a"])({uint8Array:t.getBuffer(a),format:n.mimeType,flipY:!1,skipColorSpaceConversion:!0}).then(e).catch(o),++t.pendingBufferViewToImage}}}function vt(e){const t=e._loadResources;if(t.createSamplers){t.createSamplers=!1;const n=e._rendererResources.samplers;X["a"].sampler(e.gltf,(function(e,t){n[t]=new q["a"]({wrapS:e.wrapS,wrapT:e.wrapT,minificationFilter:e.minFilter,magnificationFilter:e.magFilter})}))}}const Tt=function(){this.gltfTexture=void 0,this.model=void 0,this.context=void 0};function Lt(e,t,n){const i=t.gltf.textures,a=i[e.id],r=t._rendererResources.samplers;let o=r[a.sampler];Object(g["a"])(o)||(o=new q["a"]({wrapS:Z["a"].REPEAT,wrapT:Z["a"].REPEAT}));let s=!1;const c=t.gltf.materials,u=c.length;for(let O=0;O<u;++O){const t=c[O];if(Object(g["a"])(t.extensions)&&Object(g["a"])(t.extensions.KHR_techniques_webgl)){const n=t.extensions.KHR_techniques_webgl.values;for(const t in n)if(n.hasOwnProperty(t)&&-1!==t.indexOf("Texture")){const i=n[t];if(i.index===e.id&&Object(g["a"])(i.extensions)&&Object(g["a"])(i.extensions.KHR_texture_transform)){s=!0;break}}}if(s)break}const l=o.wrapS,d=o.wrapT;let h=o.minificationFilter;s&&h!==K["a"].LINEAR&&h!==K["a"].NEAREST&&(h=h===K["a"].NEAREST_MIPMAP_NEAREST||h===K["a"].NEAREST_MIPMAP_LINEAR?K["a"].NEAREST:K["a"].LINEAR,o=new q["a"]({wrapS:o.wrapS,wrapT:o.wrapT,minificationFilter:h,magnificationFilter:o.magnificationFilter}));const m=e.internalFormat,f=!(Object(g["a"])(m)&&A["a"].isCompressedFormat(m))&&(h===K["a"].NEAREST_MIPMAP_NEAREST||h===K["a"].NEAREST_MIPMAP_LINEAR||h===K["a"].LINEAR_MIPMAP_NEAREST||h===K["a"].LINEAR_MIPMAP_LINEAR),_=f||l===Z["a"].REPEAT||l===Z["a"].MIRRORED_REPEAT||d===Z["a"].REPEAT||d===Z["a"].MIRRORED_REPEAT;let p,b,x=e.image;if(Object(g["a"])(m)){p=!v["a"].isPowerOfTwo(e.width)||!v["a"].isPowerOfTwo(e.height),!n.webgl2&&A["a"].isCompressedFormat(m)&&p&&_&&console.warn("Compressed texture uses REPEAT or MIRRORED_REPEAT texture wrap mode and dimensions are not powers of two. The texture may be rendered incorrectly. See the Model.js constructor documentation for more information.");let t=o.minificationFilter;Object(g["a"])(e.mipLevels)||h!==K["a"].NEAREST_MIPMAP_NEAREST&&h!==K["a"].NEAREST_MIPMAP_LINEAR?Object(g["a"])(e.mipLevels)||h!==K["a"].LINEAR_MIPMAP_NEAREST&&h!==K["a"].LINEAR_MIPMAP_LINEAR||(t=K["a"].LINEAR):t=K["a"].NEAREST,o=new q["a"]({wrapS:o.wrapS,wrapT:o.wrapT,minificationFilter:t,magnificationFilter:o.magnificationFilter}),b=new W["a"]({context:n,source:{arrayBufferView:e.bufferView,mipLevels:e.mipLevels},width:e.width,height:e.height,pixelFormat:m,sampler:o})}else if(Object(g["a"])(x)){if(p=!v["a"].isPowerOfTwo(x.width)||!v["a"].isPowerOfTwo(x.height),_&&p){const e=document.createElement("canvas");e.width=v["a"].nextPowerOfTwo(x.width),e.height=v["a"].nextPowerOfTwo(x.height);const t=e.getContext("2d");t.drawImage(x,0,0,x.width,x.height,0,0,e.width,e.height),x=e}b=new W["a"]({context:n,source:x,pixelFormat:a.internalFormat,pixelDatatype:a.type,sampler:o,flipY:!1,skipColorSpaceConversion:!0}),f&&b.generateMipmap()}Object(g["a"])(b)&&(t._rendererResources.textures[e.id]=b,t._texturesByteLength+=b.sizeInBytes)}Tt.prototype.set=function(e,t,n){this.gltfTexture=e,this.model=t,this.context=n},Tt.prototype.execute=function(){Lt(this.gltfTexture,this.model,this.context)};const At=new Tt;function Pt(e,t){const n=t.context,i=e._loadResources.texturesToCreate;if(e.asynchronous)while(i.length>0){if(At.set(i.peek(),e,n),!t.jobScheduler.execute(At,me["a"].TEXTURE))break;i.dequeue()}else while(i.length>0)Lt(i.dequeue(),e,n)}function Bt(e,t){const n=e._sourceTechniques,i={};let a,r;const o=e._runtime.materialsById[t.material];if(!Object(g["a"])(o))return i;const s=n[o._technique];if(!Object(g["a"])(s))return i;const c=s.attributes,u=e._rendererResources.programs[s.program],l=u._attributeLocations;for(a in l)if(l.hasOwnProperty(a)){const e=c[a];Object(g["a"])(e)&&(r=l[a],i[e.semantic]=r)}const d=e._precreatedAttributes;if(Object(g["a"])(d))for(a in d)d.hasOwnProperty(a)&&(r=l[a],i[a]=r);return i}function It(e,t){const n=e.gltf,i=n.skins,a=n.nodes,r=e._runtime.nodes,o=e._loadResources.skinnedNodesIds,s=o.length;for(let c=0;c<s;++c){const e=o[c],n=r[e],s=a[e],u=t[s.skin];n.inverseBindMatrices=u.inverseBindMatrices,n.bindShapeMatrix=u.bindShapeMatrix;const l=i[s.skin].joints,d=l.length;for(let t=0;t<d;++t){const e=l[t],i=r[e];n.joints.push(i)}}}function Nt(e){const t=e._loadResources;if(0!==t.pendingBufferLoads)return;if(!t.createSkins)return;t.createSkins=!1;const n=e.gltf,i=n.accessors,a={};X["a"].skin(n,(function(t,n){const r=i[t.inverseBindMatrices];let o;L["a"].equals(t.bindShapeMatrix,L["a"].IDENTITY)||(o=L["a"].clone(t.bindShapeMatrix)),a[n]={inverseBindMatrices:fe["a"].getSkinInverseBindMatrices(e,r),bindShapeMatrix:o}})),It(e,a)}function Dt(e,t,n,i){return function(a){Object(g["a"])(i)&&(a=e.clampAnimations?i.clampTime(a):i.wrapTime(a),t[n]=i.evaluate(a,t[n]),t.dirtyNumber=e._maxDirtyNumber)}}function Ut(e){const t=e._loadResources;if(!t.finishedPendingBufferLoads())return;if(!t.createRuntimeAnimations)return;t.createRuntimeAnimations=!1,e._runtime.animations=[];const n=e._runtime.nodes,i=e.gltf.accessors;X["a"].animation(e.gltf,(function(t,a){const r=t.channels,o=t.samplers;let s=Number.MAX_VALUE,c=-Number.MAX_VALUE;const u=r.length,l=new Array(u);for(let d=0;d<u;++d){const u=r[d],h=u.target,m=h.path,f=o[u.sampler],g=fe["a"].getAnimationParameterValues(e,i[f.input]),_=fe["a"].getAnimationParameterValues(e,i[f.output]);s=Math.min(s,g[0]),c=Math.max(c,g[g.length-1]);const p=fe["a"].getAnimationSpline(e,a,t,u.sampler,f,g,m,_);l[d]=Dt(e,n[h.node],h.path,p)}e._runtime.animations[a]={name:t.name,startTime:s,stopTime:c,channelEvaluators:l}}))}function Ft(e,t){const n=e._loadResources;if(!n.finishedBuffersCreation()||!n.finishedProgramCreation()||!n.createVertexArrays)return;n.createVertexArrays=!1;const i=e._rendererResources.buffers,a=e._rendererResources.vertexArrays,r=e.gltf,o=r.accessors;X["a"].mesh(r,(function(n,s){X["a"].meshPrimitive(n,(function(n,c){const u=[];let l;const d=Bt(e,n),h=e._decodedData[`${s}.primitive.${c}`];let m,f;X["a"].meshPrimitiveAttribute(n,(function(e,t){if(l=d[t],Object(g["a"])(l)){if(Object(g["a"])(h)){const e=h.attributes;if(e.hasOwnProperty(t)){const n=e[t];return void u.push({index:l,vertexBuffer:i[n.bufferView],componentsPerAttribute:n.componentsPerAttribute,componentDatatype:n.componentDatatype,normalize:n.normalized,offsetInBytes:n.byteOffset,strideInBytes:n.byteStride})}}const n=o[e],a=Object(g["a"])(n.normalized)&&n.normalized;u.push({index:l,vertexBuffer:i[n.bufferView],componentsPerAttribute:Object(te["a"])(n.type),componentDatatype:n.componentType,normalize:a,offsetInBytes:n.byteOffset,strideInBytes:Object(Q["a"])(r,n)})}}));const _=e._precreatedAttributes;if(Object(g["a"])(_))for(f in _)_.hasOwnProperty(f)&&(l=d[f],Object(g["a"])(l)&&(m=_[f],m.index=l,u.push(m)));let p;if(Object(g["a"])(n.indices)){const e=o[n.indices];let t=e.bufferView;Object(g["a"])(h)&&(t=h.bufferView),p=i[t]}a[`${s}.primitive.${c}`]=new $["a"]({context:t,attributes:u,indexBuffer:p})}))}))}function kt(e){const t=e._loadResources;t.createRenderStates&&(t.createRenderStates=!1,X["a"].material(e.gltf,(function(t,n){zt(e,t,n)})))}function zt(e,t,n){const i=e._rendererResources.renderStates;let a=[D["a"].FUNC_ADD,D["a"].FUNC_ADD],r=[D["a"].ONE,D["a"].ONE_MINUS_SRC_ALPHA,D["a"].ONE,D["a"].ONE_MINUS_SRC_ALPHA];Object(g["a"])(t.extensions)&&Object(g["a"])(t.extensions.KHR_blend)&&(a=t.extensions.KHR_blend.blendEquation,r=t.extensions.KHR_blend.blendFactors);const o=!t.doubleSided,s="BLEND"===t.alphaMode;i[n]=V["a"].fromCache({cull:{enabled:o},depthTest:{enabled:!0,func:ce["a"].LESS_OR_EQUAL},depthMask:!s,blending:{enabled:s,equationRgb:a[0],equationAlpha:a[1],functionSourceRgb:r[0],functionDestinationRgb:r[1],functionSourceAlpha:r[2],functionDestinationAlpha:r[3]}})}const Vt={MODEL:function(e,t,n){return function(){return n.computedMatrix}},VIEW:function(e,t,n){return function(){return e.view}},PROJECTION:function(e,t,n){return function(){return e.projection}},MODELVIEW:function(e,t,n){const i=new L["a"];return function(){return L["a"].multiplyTransformation(e.view,n.computedMatrix,i)}},CESIUM_RTC_MODELVIEW:function(e,t,n){const i=new L["a"];return function(){return L["a"].multiplyTransformation(e.view,n.computedMatrix,i),L["a"].setTranslation(i,t._rtcCenterEye,i)}},MODELVIEWPROJECTION:function(e,t,n){const i=new L["a"];return function(){return L["a"].multiplyTransformation(e.view,n.computedMatrix,i),L["a"].multiply(e._projection,i,i)}},MODELINVERSE:function(e,t,n){const i=new L["a"];return function(){return L["a"].inverse(n.computedMatrix,i)}},VIEWINVERSE:function(e,t){return function(){return e.inverseView}},PROJECTIONINVERSE:function(e,t,n){return function(){return e.inverseProjection}},MODELVIEWINVERSE:function(e,t,n){const i=new L["a"],a=new L["a"];return function(){return L["a"].multiplyTransformation(e.view,n.computedMatrix,i),L["a"].inverse(i,a)}},MODELVIEWPROJECTIONINVERSE:function(e,t,n){const i=new L["a"],a=new L["a"];return function(){return L["a"].multiplyTransformation(e.view,n.computedMatrix,i),L["a"].multiply(e._projection,i,i),L["a"].inverse(i,a)}},MODELINVERSETRANSPOSE:function(e,t,n){const i=new L["a"],a=new T["a"];return function(){return L["a"].inverse(n.computedMatrix,i),L["a"].getMatrix3(i,a),T["a"].transpose(a,a)}},MODELVIEWINVERSETRANSPOSE:function(e,t,n){const i=new L["a"],a=new L["a"],r=new T["a"];return function(){return L["a"].multiplyTransformation(e.view,n.computedMatrix,i),L["a"].inverse(i,a),L["a"].getMatrix3(a,r),T["a"].transpose(r,r)}},VIEWPORT:function(e,t,n){return function(){return e.viewportCartesian4}}};function qt(e,t,n,i){const a=t._runtime.nodes[e];return Vt[n](i,t,a)}function Ht(e,t,n,i,a,r,o){const s={},c={};let u,l;return X["a"].techniqueUniform(n,(function(n,d){let h;if(Object(g["a"])(i)&&Object(g["a"])(i[d]))h=ye["a"].createUniformFunction(n.type,i[d],r,o),s[d]=h.func,c[d]=h;else if(Object(g["a"])(n.node))s[d]=qt(n.node,e,n.semantic,a.uniformState);else if(Object(g["a"])(n.semantic))if("JOINTMATRIX"===n.semantic)u=d;else if("MORPHWEIGHTS"===n.semantic)l=d;else if("ALPHACUTOFF"===n.semantic){const e=t.alphaMode;if(Object(g["a"])(e)&&"MASK"===e){const e=Object(m["a"])(t.alphaCutoff,.5);h=ye["a"].createUniformFunction(n.type,e,r,o),s[d]=h.func,c[d]=h}}else s[d]=ye["a"].getGltfSemanticUniforms()[n.semantic](a.uniformState,e);else if(Object(g["a"])(n.value)){const e=ye["a"].createUniformFunction(n.type,n.value,r,o);s[d]=e.func,c[d]=e}})),{map:s,values:c,jointMatrixUniformName:u,morphWeightsUniformName:l}}function Gt(e,t){const n=e._loadResources;if(!n.finishedProgramCreation())return;if(!n.createUniformMaps)return;n.createUniformMaps=!1;const i=e.gltf,a=e._sourceTechniques,r=e._uniformMaps,o=e._rendererResources.textures,s=e._defaultTexture;X["a"].material(i,(function(n,i){const c=e._runtime.materialsById[i],u=a[c._technique],l=c._values,d=Ht(e,n,u,l,t,o,s),h=r[i];if(h.uniformMap=d.map,h.values=d.values,h.jointMatrixUniformName=d.jointMatrixUniformName,h.morphWeightsUniformName=d.morphWeightsUniformName,Object(g["a"])(u.attributes.a_outlineCoordinates)){const n=Oe["a"].createTexture(e,t);h.uniformMap.u_outlineTexture=function(){return n}}}))}function Wt(e){return ye["a"].createUniformsForDracoQuantizedAttributes(e.attributes)}function Kt(e,t){const n=pt(e,t),i=e._quantizedUniforms[n];return ye["a"].createUniformsForQuantizedAttributes(e.gltf,t,i)}function Zt(e){return function(){return e}}function $t(e){return function(){return e.computedJointMatrices}}function Jt(e){return function(){return e.weights}}function Yt(e){return function(){return e.silhouetteColor}}function Xt(e){return function(){return e.silhouetteSize}}function Qt(e){return function(){return e.color}}function en(e){return function(){return e._clippingPlanesMatrix}}function tn(e){return function(){return e._iblReferenceFrameMatrix}}function nn(e){return function(){const t=e.clippingPlanes;return Object(g["a"])(t)&&t.enabled?t.texture:e._defaultTexture}}function an(e){return function(){const t=e.clippingPlanes;if(!Object(g["a"])(t))return u["a"].WHITE.withAlpha(0);const n=u["a"].clone(t.edgeColor);return n.alpha=t.edgeWidth,n}}function rn(e){return function(){return se["a"].getColorBlend(e.colorBlendMode,e.colorBlendAmount)}}function on(e){return function(){return e._imageBasedLighting.imageBasedLightingFactor}}function sn(e){return function(){return e._lightColor}}function cn(e){return function(){return e._imageBasedLighting.luminanceAtZenith}}function un(e){return function(){return e._imageBasedLighting.sphericalHarmonicCoefficients}}function ln(e){return function(){return e._imageBasedLighting.specularEnvironmentMapAtlas.texture}}function dn(e){return function(){return e._imageBasedLighting.specularEnvironmentMapAtlas.texture.dimensions}}function hn(e){return function(){return e._imageBasedLighting.specularEnvironmentMapAtlas.maximumMipmapLevel}}function mn(e,t){switch(e.mode){case P["a"].TRIANGLES:return t/3;case P["a"].TRIANGLE_STRIP:case P["a"].TRIANGLE_FAN:return Math.max(t-2,0);default:return 0}}function fn(e,t,n,r,o){const s=e._nodeCommands,c=e._pickIds,u=e.allowPicking,d=e._runtime.meshesByName,h=e._rendererResources,m=h.vertexArrays,f=h.programs,_=h.renderStates,p=e._uniformMaps,b=e.gltf,x=b.accessors,O=b.meshes,y=t.mesh,S=O[y],C=S.primitives,w=C.length;for(let j=0;j<w;++j){const t=C[j],h=x[t.indices],O=e._runtime.materialsById[t.material],w=O._program,E=e._decodedData[`${y}.primitive.${j}`];let M;const v=t.attributes.POSITION;if(Object(g["a"])(v)){const e=ye["a"].getAccessorMinMax(b,v);M=i["a"].fromCornerPoints(a["a"].fromArray(e.min),a["a"].fromArray(e.max))}const T=m[`${y}.primitive.${j}`];let A,B;if(Object(g["a"])(E))B=E.numberOfIndices,A=0;else if(Object(g["a"])(h))B=h.count,A=h.byteOffset/R["a"].getSizeInBytes(h.componentType);else{const e=x[t.attributes.POSITION];B=e.count,A=0}e._trianglesLength+=mn(t,B),t.mode===P["a"].POINTS&&(e._pointsLength+=B);const I=p[t.material];let N=I.uniformMap;if(Object(g["a"])(I.jointMatrixUniformName)){const e={};e[I.jointMatrixUniformName]=$t(n),N=Object(l["a"])(N,e)}if(Object(g["a"])(I.morphWeightsUniformName)){const e={};e[I.morphWeightsUniformName]=Jt(n),N=Object(l["a"])(N,e)}N=Object(l["a"])(N,{gltf_color:Qt(e),gltf_colorBlend:rn(e),gltf_clippingPlanes:nn(e),gltf_clippingPlanesEdgeStyle:an(e),gltf_clippingPlanesMatrix:en(e),gltf_iblReferenceFrameMatrix:tn(e),gltf_iblFactor:on(e),gltf_lightColor:sn(e),gltf_sphericalHarmonicCoefficients:un(e),gltf_specularMap:ln(e),gltf_specularMapSize:dn(e),gltf_maxSpecularLOD:hn(e),gltf_luminanceAtZenith:cn(e)}),Me["a"].addUniforms(e,N),Object(g["a"])(e._uniformMapLoaded)&&(N=e._uniformMapLoaded(N,w,n));let D={};e.extensionsUsed.WEB3D_quantized_attributes?D=Kt(e,t):e._dequantizeInShader&&Object(g["a"])(E)&&(D=Wt(E)),N=Object(l["a"])(N,D);const U=_[t.material],F=U.blending.enabled;let V=e._pickObject;Object(g["a"])(V)||(V={primitive:e,id:e.id,node:n.publicNode,mesh:d[S.name]});const q=je["a"].castShadows(e._shadows),H=je["a"].receiveShadows(e._shadows);let G;if(u&&!Object(g["a"])(e._uniformMapLoaded)){G=r.createPickId(V),c.push(G);const e={czm_pickColor:Zt(G.color)};N=Object(l["a"])(N,e)}u&&(G=Object(g["a"])(e._pickIdLoaded)&&Object(g["a"])(e._uniformMapLoaded)?e._pickIdLoaded():"czm_pickColor");const W=new k["a"]({boundingVolume:new i["a"],cull:e.cull,modelMatrix:new L["a"],primitiveType:t.mode,vertexArray:T,count:B,offset:A,shaderProgram:f[w],castShadows:q,receiveShadows:H,uniformMap:N,renderState:U,owner:V,pass:F?z["a"].TRANSLUCENT:e.opaquePass,pickId:G});let K;o||(K=k["a"].shallowClone(W),K.boundingVolume=new i["a"],K.modelMatrix=new L["a"]);const Z={show:!0,boundingSphere:M,command:W,command2D:K,silhouetteModelCommand:void 0,silhouetteModelCommand2D:void 0,silhouetteColorCommand:void 0,silhouetteColorCommand2D:void 0,translucentCommand:void 0,translucentCommand2D:void 0,disableCullingCommand:void 0,disableCullingCommand2D:void 0,programId:w};n.commands.push(Z),s.push(Z)}}function gn(e,t,n){const i=e._loadResources;if(!i.finishedEverythingButTextureCreation())return;if(!i.createRuntimeNodes)return;i.createRuntimeNodes=!1;const r=[],o=e._runtime.nodes,s=e.gltf,c=s.nodes,u=s.scenes[s.scene],l=u.nodes,d=l.length,h=[],m={};for(let f=0;f<d;++f){h.push({parentRuntimeNode:void 0,gltfNode:c[l[f]],id:l[f]});while(h.length>0){const i=h.pop();m[i.id]=!0;const s=i.parentRuntimeNode,u=i.gltfNode,l=o[i.id];if(0===l.parents.length)if(Object(g["a"])(u.matrix))l.matrix=L["a"].fromColumnMajorArray(u.matrix);else{const e=u.rotation;l.translation=a["a"].fromArray(u.translation),l.rotation=B["a"].unpack(e),l.scale=a["a"].fromArray(u.scale)}Object(g["a"])(s)?(s.children.push(l),l.parents.push(s)):r.push(l),Object(g["a"])(u.mesh)&&fn(e,u,l,t,n);const d=u.children;if(Object(g["a"])(d)){const e=d.length;for(let t=0;t<e;t++){const e=d[t];m[e]||h.push({parentRuntimeNode:l,gltfNode:c[e],id:d[t]})}}}}e._runtime.rootNodes=r,e._runtime.nodes=o}function _n(e){let t=0;for(const n in e)e.hasOwnProperty(n)&&(t+=e[n].sizeInBytes);return t}function pn(e){let t=0;for(const n in e)e.hasOwnProperty(n)&&(t+=e[n].sizeInBytes);return t}function bn(e,t){const n=t.context,i=t.scene3DOnly,a=e._quantizedVertexShaders,r=e._sourceTechniques,o=e._sourcePrograms,s=e._rendererResources;let c=s.sourceShaders;e._loadRendererResourcesFromCache&&(c=s.sourceShaders=e._cachedRendererResources.sourceShaders);for(const u in r)if(r.hasOwnProperty(u)){const t=r[u].program,i=o[t];let s=c[i.vertexShader];if(ye["a"].checkSupportedGlExtensions(i.glExtensions,n),e.extensionsUsed.WEB3D_quantized_attributes||e._dequantizeInShader){let n=a[t];Object(g["a"])(n)||(n=bt(s,t,e),a[t]=n),s=n}s=Ot(s,t,e._vertexShaderLoaded)}if(e._loadRendererResourcesFromCache){const t=e._cachedRendererResources;s.buffers=t.buffers,s.vertexArrays=t.vertexArrays,s.programs=t.programs,s.silhouettePrograms=t.silhouettePrograms,s.textures=t.textures,s.samplers=t.samplers,s.renderStates=t.renderStates,Object(g["a"])(e._precreatedAttributes)&&Ft(e,n),e._cachedGeometryByteLength+=_n(t.buffers),e._cachedTexturesByteLength+=pn(t.textures)}else _t(e,t),jt(e,t),vt(e,n),Mt(e),Pt(e,t);Nt(e),Ut(e),e._loadRendererResourcesFromCache||(Ft(e,n),kt(e)),Gt(e,n),gn(e,n,i)}function xn(e,t){const n=e.publicNode,i=n.matrix;n.useMatrix&&Object(g["a"])(i)?L["a"].clone(i,t):Object(g["a"])(e.matrix)?L["a"].clone(e.matrix,t):(L["a"].fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t),n.setMatrix(t))}const On=[],yn=new r["a"],Sn=new L["a"];function Cn(e,t,n,o){const s=e._maxDirtyNumber,c=e._runtime.rootNodes,u=c.length,l=On;let d=e._computedModelMatrix;if(e._mode!==Re["a"].SCENE3D&&!e._ignoreCommands){const t=L["a"].getColumn(d,3,yn);if(r["a"].equals(t,r["a"].UNIT_W)){const t=e.boundingSphere.center,n=N["a"].wgs84To2DModelMatrix(o,t,Sn);d=L["a"].multiply(n,d,Sn),Object(g["a"])(e._rtcCenter)&&(L["a"].setTranslation(d,r["a"].UNIT_W,d),e._rtcCenter=e._rtcCenter2D)}else d=N["a"].basisTo2D(o,d,Sn),e._rtcCenter=e._rtcCenter3D}for(let r=0;r<u;++r){let u=c[r];xn(u,u.transformToRoot),l.push(u);while(l.length>0){u=l.pop();const r=u.transformToRoot,c=u.commands;if(u.dirtyNumber===s||t||n){const t=L["a"].multiplyTransformation(d,r,u.computedMatrix),n=c.length;if(n>0)for(let r=0;r<n;++r){const n=c[r];let s=n.command;L["a"].clone(t,s.modelMatrix),i["a"].transform(n.boundingSphere,s.modelMatrix,s.boundingVolume),Object(g["a"])(e._rtcCenter)&&a["a"].add(e._rtcCenter,s.boundingVolume.center,s.boundingVolume.center),s=n.command2D,Object(g["a"])(s)&&e._mode===Re["a"].SCENE2D&&(L["a"].clone(t,s.modelMatrix),s.modelMatrix[13]-=2*v["a"].sign(s.modelMatrix[13])*v["a"].PI*o.ellipsoid.maximumRadius,i["a"].transform(n.boundingSphere,s.modelMatrix,s.boundingVolume))}}const h=u.children;if(Object(g["a"])(h)){const e=h.length;for(let t=0;t<e;++t){const e=h[t];e.dirtyNumber=Math.max(e.dirtyNumber,u.dirtyNumber),(e.dirtyNumber===s||n)&&(xn(e,e.transformToRoot),L["a"].multiplyTransformation(r,e.transformToRoot,e.transformToRoot)),l.push(e)}}}}++e._maxDirtyNumber}let wn=new L["a"];function Rn(e){const t=e._runtime.skinnedNodes,n=t.length;for(let i=0;i<n;++i){const e=t[i];wn=L["a"].inverseTransformation(e.transformToRoot,wn);const n=e.computedJointMatrices,a=e.joints,r=e.bindShapeMatrix,o=e.inverseBindMatrices,s=o.length;for(let t=0;t<s;++t)Object(g["a"])(n[t])||(n[t]=new L["a"]),n[t]=L["a"].multiplyTransformation(wn,a[t].transformToRoot,n[t]),n[t]=L["a"].multiplyTransformation(n[t],o[t],n[t]),Object(g["a"])(r)&&(n[t]=L["a"].multiplyTransformation(n[t],r,n[t]))}}function jn(e){const t=e._runtime.rootNodes,n=t.length,i=On;for(let a=0;a<n;++a){let e=t[a];e.computedShow=e.publicNode.show,i.push(e);while(i.length>0){e=i.pop();const t=e.computedShow,n=e.commands,a=n.length;for(let e=0;e<a;++e)n[e].show=t;const r=e.children;if(Object(g["a"])(r)){const e=r.length;for(let n=0;n<e;++n){const e=r[n];e.computedShow=t&&e.publicNode.show,i.push(e)}}}}}function En(e,t){const n=e.id;if(e._id!==n){e._id=n;const t=e._pickIds,i=t.length;for(let e=0;e<i;++e)t[e].object.id=n}}function Mn(e){if(e._debugWireframe!==e.debugWireframe){e._debugWireframe=e.debugWireframe;const t=e.debugWireframe?P["a"].LINES:P["a"].TRIANGLES,n=e._nodeCommands,i=n.length;for(let e=0;e<i;++e)n[e].command.primitiveType=t}}function vn(e){if(e.debugShowBoundingVolume!==e._debugShowBoundingVolume){e._debugShowBoundingVolume=e.debugShowBoundingVolume;const t=e.debugShowBoundingVolume,n=e._nodeCommands,i=n.length;for(let e=0;e<i;++e)n[e].command.debugShowBoundingVolume=t}}function Tn(e){if(e.shadows!==e._shadows){e._shadows=e.shadows;const t=je["a"].castShadows(e.shadows),n=je["a"].receiveShadows(e.shadows),i=e._nodeCommands,a=i.length;for(let e=0;e<a;e++){const a=i[e];a.command.castShadows=t,a.command.receiveShadows=n}}}function Ln(e,t){const n=Object(c["a"])(t,!0);return n.cull.enabled=!1,n.depthTest.enabled=!0,n.depthMask=!1,n.blending=re["a"].ALPHA_BLEND,e.opaquePass===z["a"].CESIUM_3D_TILE&&(n.stencilTest=ve["a"].setCesium3DTileBit(),n.stencilMask=ve["a"].CESIUM_3D_TILE_MASK),V["a"].fromCache(n)}function An(e,t){const n=k["a"].shallowClone(t);return n.pass=z["a"].TRANSLUCENT,n.renderState=Ln(e,t.renderState),n}function Pn(e,t,n){const i=t.scene3DOnly,a=e.color.alpha;if(a>0&&a<1){const t=e._nodeCommands,a=t.length;if(a>0&&(!Object(g["a"])(t[0].translucentCommand)||n))for(let n=0;n<a;++n){const a=t[n],r=a.command;if(a.translucentCommand=An(e,r),!i){const t=a.command2D;a.translucentCommand2D=An(e,t)}}}}function Bn(e){const t=Object(c["a"])(e,!0);return t.cull.enabled=!1,V["a"].fromCache(t)}function In(e){const t=k["a"].shallowClone(e);return t.renderState=Bn(e.renderState),t}function Nn(e,t,n){const i=t.scene3DOnly,a=e.backFaceCulling;if(!a){const t=e._nodeCommands,a=t.length;if(a>0&&(!Object(g["a"])(t[0].disableCullingCommand)||n))for(let e=0;e<a;++e){const n=t[e],a=n.command;if(n.disableCullingCommand=In(a),!i){const e=n.command2D;n.disableCullingCommand2D=In(e)}}}}function Dn(e,t){const n=e._rendererResources.programs;for(const i in n)if(n.hasOwnProperty(i)&&n[i]===t)return i}function Un(e,t,n){let i=t.vertexShaderSource.sources[0];const a=t._attributeLocations,r=e._normalAttributeName;i=G["a"].replaceMain(i,"gltf_silhouette_main"),i+=`uniform float gltf_silhouetteSize; \nvoid main() \n{ \n    gltf_silhouette_main(); \n    vec3 n = normalize(czm_normal3D * ${r}); \n    n.x *= czm_projection[0][0]; \n    n.y *= czm_projection[1][1]; \n    vec4 clip = gl_Position; \n    clip.xy += n.xy * clip.w * gltf_silhouetteSize * czm_pixelRatio / czm_viewport.z; \n    gl_Position = clip; \n}`;const o="uniform vec4 gltf_silhouetteColor; \nvoid main() \n{ \n    gl_FragColor = czm_gammaCorrect(gltf_silhouetteColor); \n}";return H["a"].fromCache({context:n.context,vertexShaderSource:i,fragmentShaderSource:o,attributeLocations:a})}function Fn(e,t){return Fe(t.context)&&e.silhouetteSize>0&&e.silhouetteColor.alpha>0&&Object(g["a"])(e._normalAttributeName)}function kn(e){const t=e._nodeCommands,n=t.length;for(let i=0;i<n;++i){const e=t[i],n=e.command;if(n.pass===z["a"].TRANSLUCENT)return!0}return!1}function zn(e){return e.color.alpha>0&&e.color.alpha<1}function Vn(e){return 0===e.color.alpha}function qn(e,t){return Math.floor(e)!==Math.floor(t)||Math.ceil(e)!==Math.ceil(t)}let Hn=0;function Gn(e,t){const n=++Hn%255,i=kn(e)||zn(e)||e.silhouetteColor.alpha<1,a=e._rendererResources.silhouettePrograms,r=t.scene3DOnly,o=e._nodeCommands,s=o.length;for(let u=0;u<s;++u){const s=o[u],d=s.command,h=zn(e)?s.translucentCommand:d,m=k["a"].shallowClone(h);let f=Object(c["a"])(h.renderState);f.stencilTest={enabled:!0,frontFunction:D["a"].ALWAYS,backFunction:D["a"].ALWAYS,reference:n,mask:-1,frontOperation:{fail:D["a"].KEEP,zFail:D["a"].KEEP,zPass:D["a"].REPLACE},backOperation:{fail:D["a"].KEEP,zFail:D["a"].KEEP,zPass:D["a"].REPLACE}},Vn(e)&&(f.colorMask={red:!1,green:!1,blue:!1,alpha:!1},f.depthMask=!1),f=V["a"].fromCache(f),m.renderState=f,s.silhouetteModelCommand=m;const _=k["a"].shallowClone(d);f=Object(c["a"])(d.renderState,!0),f.depthTest.enabled=!0,f.cull.enabled=!1,i&&(_.pass=z["a"].TRANSLUCENT,f.depthMask=!1,f.blending=re["a"].ALPHA_BLEND),f.stencilTest={enabled:!0,frontFunction:D["a"].NOTEQUAL,backFunction:D["a"].NOTEQUAL,reference:n,mask:-1,frontOperation:{fail:D["a"].KEEP,zFail:D["a"].KEEP,zPass:D["a"].KEEP},backOperation:{fail:D["a"].KEEP,zFail:D["a"].KEEP,zPass:D["a"].KEEP}},f=V["a"].fromCache(f);const p=d.shaderProgram,b=Dn(e,p);let x=a[b];Object(g["a"])(x)||(x=Un(e,p,t),a[b]=x);const O=Object(l["a"])(d.uniformMap,{gltf_silhouetteColor:Yt(e),gltf_silhouetteSize:Xt(e)});if(_.renderState=f,_.shaderProgram=x,_.uniformMap=O,_.castShadows=!1,_.receiveShadows=!1,s.silhouetteColorCommand=_,!r){const e=s.command2D,t=k["a"].shallowClone(m);t.boundingVolume=e.boundingVolume,t.modelMatrix=e.modelMatrix,s.silhouetteModelCommand2D=t;const n=k["a"].shallowClone(_);t.boundingVolume=e.boundingVolume,t.modelMatrix=e.modelMatrix,s.silhouetteColorCommand2D=n}}}function Wn(e,t,n){return e=G["a"].replaceMain(e,"gltf_clip_main"),e+=Ue._getClippingFunction(t,n)+"\n",e+=`uniform highp sampler2D gltf_clippingPlanes; \nuniform mat4 gltf_clippingPlanesMatrix; \nuniform vec4 gltf_clippingPlanesEdgeStyle; \nvoid main() \n{ \n    gltf_clip_main(); \n${Object(le["a"])("gltf_clippingPlanes","gltf_clippingPlanesMatrix","gltf_clippingPlanesEdgeStyle")}} \n`,e}function Kn(e,t,n){if(!Fn(e,t))return;const i=e._nodeCommands,a=i.length>0&&(qn(e.color.alpha,e._colorPreviousAlpha)||qn(e.silhouetteColor.alpha,e._silhouetteColorPreviousAlpha)||!Object(g["a"])(i[0].silhouetteModelCommand));e._colorPreviousAlpha=e.color.alpha,e._silhouetteColorPreviousAlpha=e.silhouetteColor.alpha,(a||n)&&Gn(e,t)}function Zn(e,t){const n=e._clippingPlanes;Object(g["a"])(n)&&n.owner===e&&n.enabled&&n.update(t)}const $n=new i["a"];function Jn(e,t,n){return $n.center=e,$n.radius=t,n.camera.getPixelSize($n,n.context.drawingBufferWidth,n.context.drawingBufferHeight)}const Yn=new a["a"],Xn=new o["a"];function Qn(e,t){let n=e.scale;if(0!==e.minimumPixelSize){const i=t.context,r=Math.max(i.drawingBufferWidth,i.drawingBufferHeight),o=Object(g["a"])(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;if(Yn.x=o[12],Yn.y=o[13],Yn.z=o[14],Object(g["a"])(e._rtcCenter)&&a["a"].add(e._rtcCenter,Yn,Yn),e._mode!==Re["a"].SCENE3D){const e=t.mapProjection,n=e.ellipsoid.cartesianToCartographic(Yn,Xn);e.project(n,Yn),a["a"].fromElements(Yn.z,Yn.x,Yn.y,Yn)}const s=e.boundingSphere.radius,c=Jn(Yn,s,t),u=1/c,l=Math.min(u*(2*s),r);l<e.minimumPixelSize&&(n=e.minimumPixelSize*c/(2*e._initialRadius))}return Object(g["a"])(e.maximumScale)?Math.min(e.maximumScale,n):n}function ei(e){Object(g["a"])(e._cacheKey)&&Object(g["a"])(e._cachedGltf)&&0===--e._cachedGltf.count&&delete Ne[e._cacheKey],e._cachedGltf=void 0}function ti(e,t){this.buffers=void 0,this.vertexArrays=void 0,this.programs=void 0,this.sourceShaders=void 0,this.silhouettePrograms=void 0,this.textures=void 0,this.samplers=void 0,this.renderStates=void 0,this.ready=!1,this.context=e,this.cacheKey=t,this.count=0}function ni(e){for(const t in e)e.hasOwnProperty(t)&&e[t].destroy()}function ii(e){ni(e.buffers),ni(e.vertexArrays),ni(e.programs),ni(e.silhouettePrograms),ni(e.textures)}function ai(e,t,n){return function(i){if(e.heightReference===he["a"].RELATIVE_TO_GROUND){const e=t.cartesianToCartographic(i,Xn);e.height+=n.height,t.cartographicToCartesian(e,i)}const a=e._clampedModelMatrix;L["a"].clone(e.modelMatrix,a),a[12]=i.x,a[13]=i.y,a[14]=i.z,e._heightChanged=!0}}function ri(e){Object(g["a"])(e._removeUpdateHeightCallback)&&(e._removeUpdateHeightCallback(),e._removeUpdateHeightCallback=void 0);const t=e._scene;if(!Object(g["a"])(t)||!Object(g["a"])(t.globe)||e.heightReference===he["a"].NONE){if(e.heightReference!==he["a"].NONE)throw new b["a"]("Height reference is not supported without a scene and globe.");return void(e._clampedModelMatrix=void 0)}const n=t.globe,i=n.ellipsoid,a=e.modelMatrix;Yn.x=a[12],Yn.y=a[13],Yn.z=a[14];const r=i.cartesianToCartographic(Yn);Object(g["a"])(e._clampedModelMatrix)||(e._clampedModelMatrix=L["a"].clone(a,new L["a"]));const s=n._surface;e._removeUpdateHeightCallback=s.updateHeight(r,ai(e,i,r));const c=n.getHeight(r);if(Object(g["a"])(c)){const t=ai(e,i,r);o["a"].clone(r,Xn),Xn.height=c,i.cartographicToCartesian(Xn,Yn),t(Yn)}}ti.prototype.release=function(){if(0===--this.count)return Object(g["a"])(this.cacheKey)&&delete this.context.cache.modelRendererResourceCache[this.cacheKey],ii(this),Object(p["a"])(this)};const oi=new a["a"],si=new o["a"];function ci(e,t){let n;const i=e.distanceDisplayCondition,r=i.near*i.near,o=i.far*i.far;if(t.mode===Re["a"].SCENE2D){const e=t.camera.frustum.right-t.camera.frustum.left;n=.5*e,n*=n}else{let i=L["a"].getTranslation(e.modelMatrix,oi);if(t.mode===Re["a"].COLUMBUS_VIEW){const e=t.mapProjection,n=e.ellipsoid,r=n.cartesianToCartographic(i,si);i=e.project(r,i),a["a"].fromElements(i.z,i.x,i.y,i)}n=a["a"].distanceSquared(i,t.camera.positionWC)}return n>=r&&n<=o}const ui=new L["a"],li=new T["a"],di=new L["a"];function hi(e,t){e.programs!==t.programs&&ni(e.programs),e.silhouettePrograms!==t.silhouettePrograms&&ni(e.silhouettePrograms)}function mi(e,t){const n=e._rendererResources,i=e._cachedRendererResources;let a;if(hi(n,i),ze(e)||ke(e)||e.splitDirection!==Ee["a"].NONE||e._shouldRegenerateShaders){e._shouldRegenerateShaders=!1,n.programs={},n.silhouettePrograms={};const i={},r=e._sourceTechniques;let o;for(const n in r)r.hasOwnProperty(n)&&(o=r[n],a=o.program,i[a]||(i[a]=!0,Ct({programId:a,techniqueId:n},e,t.context)))}else n.programs=i.programs,n.silhouettePrograms=i.silhouettePrograms;const r=n.programs,o=e._nodeCommands,s=o.length;for(let c=0;c<s;++c){const e=o[c];a=e.programId;const t=r[a];e.command.shaderProgram=t,Object(g["a"])(e.command2D)&&(e.command2D.shaderProgram=t)}Pn(e,t,!0),Nn(e,t,!0),Kn(e,t,!0)}Ue.prototype.update=function(e){if(e.mode===Re["a"].MORPHING)return;if(!O["a"].supportsWebP.initialized)return void O["a"].supportsWebP.initialize();const t=e.context;this._defaultTexture=t.defaultTexture;const n=O["a"].supportsWebP();if(this._state===Le.NEEDS_LOAD&&Object(g["a"])(this.gltf)){let n;const i=this.cacheKey;if(Object(g["a"])(i)){t.cache.modelRendererResourceCache=Object(m["a"])(t.cache.modelRendererResourceCache,{});const e=t.cache.modelRendererResourceCache;if(n=e[this.cacheKey],Object(g["a"])(n)){if(!n.ready)return;++n.count,this._loadRendererResourcesFromCache=!0}else n=new ti(t,i),n.count=1,e[this.cacheKey]=n;this._cachedRendererResources=n}else n=new ti(t),n.count=1,this._cachedRendererResources=n;if(this._state=Le.LOADING,this._state!==Le.FAILED){const t=this.gltf.extensions;if(Object(g["a"])(t)&&Object(g["a"])(t.CESIUM_RTC)){const n=a["a"].fromArray(t.CESIUM_RTC.center);if(!a["a"].equals(n,a["a"].ZERO)){this._rtcCenter3D=n;const t=e.mapProjection,i=t.ellipsoid,r=i.cartesianToCartographic(this._rtcCenter3D),o=t.project(r);a["a"].fromElements(o.z,o.x,o.y,o),this._rtcCenter2D=o,this._rtcCenterEye=new a["a"],this._rtcCenter=this._rtcCenter3D}}Object(Y["a"])(this.gltf),this._loadResources=new _e["a"],this._loadRendererResourcesFromCache||ye["a"].parseBuffers(this,$e)}}const i=this._loadResources,r=this._incrementallyLoadTextures;let o=!1;if(this._state===Le.LOADING){if(0===i.pendingBufferLoads){if(!i.initialized){if(e.brdfLutGenerator.update(e),ye["a"].checkSupportedExtensions(this.extensionsRequired,n),ye["a"].updateForwardAxis(this),!Object(g["a"])(this.gltf.extras.sourceVersion)){const e=this.gltf;e.extras.sourceVersion=ye["a"].getAssetVersion(e),e.extras.sourceKHRTechniquesWebGL=Object(g["a"])(ye["a"].getUsedExtensions(e).KHR_techniques_webgl),this._sourceVersion=e.extras.sourceVersion,this._sourceKHRTechniquesWebGL=e.extras.sourceKHRTechniquesWebGL,Object(ie["a"])(e),Object(J["a"])(e);const t={addBatchIdToGeneratedShaders:this._addBatchIdToGeneratedShaders};Object(Ce["a"])(e,t),Object(we["a"])(e,t)}this._sourceVersion=this.gltf.extras.sourceVersion,this._sourceKHRTechniquesWebGL=this.gltf.extras.sourceKHRTechniquesWebGL,this._dequantizeInShader=this._dequantizeInShader&&ue["a"].hasExtension(this),Ze(this),tt(this),Ye(this),this._loadRendererResourcesFromCache||(Je(this),Qe(this),et(this),at(this,t,n)),st(this),ct(this),ot(this),ut(this),ue["a"].parse(this,t),i.initialized=!0}i.finishedDecoding()||ue["a"].decodeModel(this,t).catch(ye["a"].getFailedLoadFunction(this,"model",this.basePath)),i.finishedDecoding()&&!i.resourcesParsed&&(this._boundingSphere=ye["a"].computeBoundingSphere(this),this._initialRadius=this._boundingSphere.radius,ue["a"].cacheDataForModel(this),i.resourcesParsed=!0),i.resourcesParsed&&0===i.pendingShaderLoads&&(this.showOutline&&Oe["a"].outlinePrimitives(this),bn(this,e))}(i.finished()||r&&i.finishedEverythingButTextureCreation())&&(this._state=Le.LOADED,o=!0)}if(Object(g["a"])(i)&&this._state===Le.LOADED&&(r&&!o&&bn(this,e),i.finished())){this._loadResources=void 0;const e=this._rendererResources,t=this._cachedRendererResources;t.buffers=e.buffers,t.vertexArrays=e.vertexArrays,t.programs=e.programs,t.sourceShaders=e.sourceShaders,t.silhouettePrograms=e.silhouettePrograms,t.textures=e.textures,t.samplers=e.samplers,t.renderStates=e.renderStates,t.ready=!0,this._normalAttributeName=ye["a"].getAttributeOrUniformBySemantic(this.gltf,"NORMAL"),Object(g["a"])(this._precreatedAttributes)&&(t.vertexArrays={}),this.releaseGltfJson&&ei(this)}const s=Fn(this,e),c=zn(this),u=Vn(this),l=this.backFaceCulling,d=!Object(g["a"])(this.distanceDisplayCondition)||ci(this,e),h=this.show&&d&&0!==this.scale&&(!u||s);if(this._imageBasedLighting.update(e),h&&this._state===Le.LOADED||o){const n=this.activeAnimations.update(e)||this._cesiumAnimationsDirty;this._cesiumAnimationsDirty=!1,this._dirty=!1;let i=this.modelMatrix;const a=e.mode!==this._mode;this._mode=e.mode;const r=!L["a"].equals(this._modelMatrix,i)||this._scale!==this.scale||this._minimumPixelSize!==this.minimumPixelSize||0!==this.minimumPixelSize||this._maximumScale!==this.maximumScale||this._heightReference!==this.heightReference||this._heightChanged||a;if(r||o){L["a"].clone(i,this._modelMatrix),ri(this),Object(g["a"])(this._clampedModelMatrix)&&(i=this._clampedModelMatrix),this._scale=this.scale,this._minimumPixelSize=this.minimumPixelSize,this._maximumScale=this.maximumScale,this._heightReference=this.heightReference,this._heightChanged=!1;const t=Qn(this,e),n=this._computedModelMatrix;L["a"].multiplyByUniformScale(i,t,n),this._upAxis===ae["a"].Y?L["a"].multiplyTransformation(n,ae["a"].Y_UP_TO_Z_UP,n):this._upAxis===ae["a"].X&&L["a"].multiplyTransformation(n,ae["a"].X_UP_TO_Z_UP,n),this.forwardAxis===ae["a"].Z&&L["a"].multiplyTransformation(n,ae["a"].Z_UP_TO_X_UP,n)}(n||r||o)&&(Cn(this,r,o,e.mapProjection),this._dirty=!0,(n||o)&&Rn(this)),this._perNodeShowDirty&&(this._perNodeShowDirty=!1,jn(this)),En(this,t),Mn(this),vn(this),Tn(this),Zn(this,e);const s=this._clippingPlanes;let c=0;const u=Object(m["a"])(this.referenceMatrix,i);if(this._imageBasedLighting.useSphericalHarmonicCoefficients||this._imageBasedLighting.useSpecularEnvironmentMaps){let e=li,n=ui;n=L["a"].multiply(t.uniformState.view3D,u,n),e=L["a"].getMatrix3(n,e),e=T["a"].getRotation(e,e),this._iblReferenceFrameMatrix=T["a"].transpose(e,this._iblReferenceFrameMatrix)}if(this._shouldRegenerateShaders=this._shouldRegenerateShaders||this._imageBasedLighting.shouldRegenerateShaders,ze(this)){let e=di;e=L["a"].multiply(t.uniformState.view3D,u,e),e=L["a"].multiply(e,s.modelMatrix,e),this._clippingPlanesMatrix=L["a"].inverseTranspose(e,this._clippingPlanesMatrix),c=s.clippingPlanesState}this._shouldRegenerateShaders=this._shouldRegenerateShaders||this._clippingPlanesState!==c,this._clippingPlanesState=c;const l=ke(this);l!==this._colorShadingEnabled&&(this._colorShadingEnabled=l,this._shouldRegenerateShaders=!0);const d=this.splitDirection!==Ee["a"].NONE;this._splittingEnabled!==d&&(this._splittingEnabled=d,this._shouldRegenerateShaders=!0),this._shouldRegenerateShaders?mi(this,e):(Pn(this,e,!1),Nn(this,e,!1),Kn(this,e,!1))}if(o){const t=this;return void e.afterRender.push((function(){t._ready=!0,t._readyPromise.resolve(t)}))}if(h&&!this._ignoreCommands){const t=e.commandList,n=e.passes,i=this._nodeCommands,a=i.length;let r,o;const u=e.mapProjection.ellipsoid.maximumRadius*v["a"].PI;let d;if(n.render||n.pick&&this.allowPicking){for(r=0;r<a;++r)if(o=i[r],o.show){let n=o.command;if(s?n=o.silhouetteModelCommand:c?n=o.translucentCommand:l||(n=o.disableCullingCommand),t.push(n),d=o.command.boundingVolume,e.mode===Re["a"].SCENE2D&&(d.center.y+d.radius>u||d.center.y-d.radius<u)){let e=o.command2D;s?e=o.silhouetteModelCommand2D:c?e=o.translucentCommand2D:l||(e=o.disableCullingCommand2D),t.push(e)}}if(s&&!n.pick)for(r=0;r<a;++r)o=i[r],o.show&&(t.push(o.silhouetteColorCommand),d=o.command.boundingVolume,e.mode===Re["a"].SCENE2D&&(d.center.y+d.radius>u||d.center.y-d.radius<u)&&t.push(o.silhouetteColorCommand2D))}}const f=this._credit;Object(g["a"])(f)&&e.creditDisplay.addCredit(f);const _=this._resourceCredits,p=_.length;for(let a=0;a<p;a++)e.creditDisplay.addCredit(_[a]);const b=this._gltfCredits,x=b.length;for(let a=0;a<x;a++)e.creditDisplay.addCredit(b[a])},Ue.prototype.isDestroyed=function(){return!1},Ue.prototype.destroy=function(){Object(g["a"])(this._precreatedAttributes)&&ni(this._rendererResources.vertexArrays),Object(g["a"])(this._removeUpdateHeightCallback)&&(this._removeUpdateHeightCallback(),this._removeUpdateHeightCallback=void 0),Object(g["a"])(this._terrainProviderChangedCallback)&&(this._terrainProviderChangedCallback(),this._terrainProviderChangedCallback=void 0),Object(g["a"])(this._cachedRendererResources)&&hi(this._rendererResources,this._cachedRendererResources),this._rendererResources=void 0,this._cachedRendererResources=this._cachedRendererResources&&this._cachedRendererResources.release(),ue["a"].destroyCachedDataForModel(this);const e=this._pickIds,t=e.length;for(let i=0;i<t;++i)e[i].destroy();ei(this),this._quantizedVertexShaders=void 0;const n=this._clippingPlanes;return Object(g["a"])(n)&&!n.isDestroyed()&&n.owner===this&&n.destroy(),this._clippingPlanes=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,Object(p["a"])(this)},Ue._getClippingFunction=de["a"],Ue._modifyShaderForColor=xt,t["a"]=Ue}}]);