(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors~7caab4a5"],{2013:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n("9dc9"),a=n("85b2"),i=n("6b82"),o=n("ae9b"),s=n("4051"),c=n("c937"),u=n("21b7"),l=n("e2a6"),h=n("0238"),f=n("2341"),d=n("1494"),p=n("4d68"),b=n("1a75");function _(e){o["a"].typeOf.number("options.featuresLength",e.featuresLength),o["a"].typeOf.object("options.owner",e.owner);const t=e.featuresLength;let n,r;if(this._showAlphaProperties=void 0,this._batchValues=void 0,this._batchValuesDirty=!1,this._batchTexture=void 0,this._defaultTexture=void 0,this._pickTexture=void 0,this._pickIds=[],t>0){const e=Math.min(t,f["a"].maximumTextureSize),o=Math.ceil(t/f["a"].maximumTextureSize),s=1/e,c=.5*s,u=1/o,l=.5*u;n=new a["a"](e,o),r=new i["a"](s,c,u,l)}this._translucentFeaturesLength=0,this._featuresLength=t,this._textureDimensions=n,this._textureStep=r,this._owner=e.owner,this._statistics=e.statistics,this._colorChangedCallback=e.colorChangedCallback}function m(e){const t=e._textureDimensions;return t.x*t.y*4}function y(e){if(!Object(c["a"])(e._batchValues)){const t=m(e),n=new Uint8Array(t);Object(r["a"])(n,255),e._batchValues=n}return e._batchValues}function g(e){if(!Object(c["a"])(e._showAlphaProperties)){const t=2*e._featuresLength,n=new Uint8Array(t);Object(r["a"])(n,255),e._showAlphaProperties=n}return e._showAlphaProperties}function x(e,t){if(!Object(c["a"])(e)||e<0||e>=t)throw new l["a"]("batchId is required and between zero and featuresLength - 1 ("+t-NaN)}Object.defineProperties(_.prototype,{translucentFeaturesLength:{get:function(){return this._translucentFeaturesLength}},memorySizeInBytes:{get:function(){let e=0;return Object(c["a"])(this._pickTexture)&&(e+=this._pickTexture.sizeInBytes),Object(c["a"])(this._batchTexture)&&(e+=this._batchTexture.sizeInBytes),e}},textureDimensions:{get:function(){return this._textureDimensions}},textureStep:{get:function(){return this._textureStep}},batchTexture:{get:function(){return this._batchTexture}},defaultTexture:{get:function(){return this._defaultTexture}},pickTexture:{get:function(){return this._pickTexture}}}),_.DEFAULT_COLOR_VALUE=s["a"].WHITE,_.DEFAULT_SHOW_VALUE=!0,_.prototype.setShow=function(e,t){if(x(e,this._featuresLength),o["a"].typeOf.bool("show",t),t&&!Object(c["a"])(this._showAlphaProperties))return;const n=g(this),r=2*e,a=t?255:0;if(n[r]!==a){n[r]=a;const i=y(this),o=4*e+3;i[o]=t?n[r+1]:0,this._batchValuesDirty=!0}},_.prototype.setAllShow=function(e){o["a"].typeOf.bool("show",e);const t=this._featuresLength;for(let n=0;n<t;++n)this.setShow(n,e)},_.prototype.getShow=function(e){if(x(e,this._featuresLength),!Object(c["a"])(this._showAlphaProperties))return!0;const t=2*e;return 255===this._showAlphaProperties[t]};const T=new Array(4);function O(e,t,n){const r=e._textureDimensions;return new b["a"]({context:t,pixelFormat:h["a"].RGBA,pixelDatatype:d["a"].UNSIGNED_BYTE,source:{width:r.x,height:r.y,arrayBufferView:n},flipY:!1,sampler:p["a"].NEAREST})}function w(e,t){const n=e._featuresLength;if(!Object(c["a"])(e._pickTexture)&&n>0){const r=e._pickIds,a=m(e),i=new Uint8Array(a),o=e._owner,u=e._statistics;for(let e=0;e<n;++e){const n=t.createPickId(o.getFeature(e));r.push(n);const a=n.color,c=4*e;i[c]=s["a"].floatToByte(a.red),i[c+1]=s["a"].floatToByte(a.green),i[c+2]=s["a"].floatToByte(a.blue),i[c+3]=s["a"].floatToByte(a.alpha)}e._pickTexture=O(e,t,i),Object(c["a"])(u)&&(u.batchTableByteLength+=e._pickTexture.sizeInBytes)}}function v(e){const t=e._textureDimensions;e._batchTexture.copyFrom({source:{width:t.x,height:t.y,arrayBufferView:e._batchValues}})}_.prototype.setColor=function(e,t){if(x(e,this._featuresLength),o["a"].typeOf.object("color",t),s["a"].equals(t,_.DEFAULT_COLOR_VALUE)&&!Object(c["a"])(this._batchValues))return;const n=t.toBytes(T),r=n[3],a=y(this),i=4*e,u=g(this),l=2*e;if(a[i]!==n[0]||a[i+1]!==n[1]||a[i+2]!==n[2]||u[l+1]!==r){a[i]=n[0],a[i+1]=n[1],a[i+2]=n[2];const o=255!==u[l+1],s=0!==u[l];a[i+3]=s?r:0,u[l+1]=r;const h=255!==r;h&&!o?++this._translucentFeaturesLength:!h&&o&&--this._translucentFeaturesLength,this._batchValuesDirty=!0,Object(c["a"])(this._colorChangedCallback)&&this._colorChangedCallback(e,t)}},_.prototype.setAllColor=function(e){o["a"].typeOf.object("color",e);const t=this._featuresLength;for(let n=0;n<t;++n)this.setColor(n,e)},_.prototype.getColor=function(e,t){if(x(e,this._featuresLength),o["a"].typeOf.object("result",t),!Object(c["a"])(this._batchValues))return s["a"].clone(_.DEFAULT_COLOR_VALUE,t);const n=this._batchValues,r=4*e,a=this._showAlphaProperties,i=2*e;return s["a"].fromBytes(n[r],n[r+1],n[r+2],a[i+1],t)},_.prototype.getPickColor=function(e){return x(e,this._featuresLength),this._pickIds[e]},_.prototype.update=function(e,t){const n=t.context;this._defaultTexture=n.defaultTexture;const r=t.passes;(r.pick||r.postProcess)&&w(this,n),this._batchValuesDirty&&(this._batchValuesDirty=!1,Object(c["a"])(this._batchTexture)||(this._batchTexture=O(this,n,this._batchValues),Object(c["a"])(this._statistics)&&(this._statistics.batchTableByteLength+=this._batchTexture.sizeInBytes)),v(this))},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),this._pickTexture=this._pickTexture&&this._pickTexture.destroy();const e=this._pickIds,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return Object(u["a"])(this)}},"46af":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("9dc9"),a=n("c380"),i=n("ae9b"),o=n("44e9"),s=n("2fad"),c=n("cbf0"),u=n("c937"),l=n("1a5d"),h=n("e2a6"),f=n("f2c1"),d=n("e2aa");function p(e){this._classes=void 0,this._classIds=void 0,this._classIndexes=void 0,this._parentCounts=void 0,this._parentIndexes=void 0,this._parentIds=void 0,i["a"].typeOf.object("options.extension",e.extension),b(this,e.extension,e.binaryBody),y(this)}function b(e,t,n){let i,o,h;const d=t.instancesLength,p=t.classes;let b,m=t.classIds,y=t.parentCounts,g=t.parentIds,x=d;if(Object(u["a"])(m.byteOffset)&&(m.componentType=Object(l["a"])(m.componentType,c["a"].UNSIGNED_SHORT),m.type=a["a"].SCALAR,h=Object(f["a"])(m),m=h.createArrayBufferView(n.buffer,n.byteOffset+m.byteOffset,d)),Object(u["a"])(y))for(Object(u["a"])(y.byteOffset)&&(y.componentType=Object(l["a"])(y.componentType,c["a"].UNSIGNED_SHORT),y.type=a["a"].SCALAR,h=Object(f["a"])(y),y=h.createArrayBufferView(n.buffer,n.byteOffset+y.byteOffset,d)),b=new Uint16Array(d),x=0,i=0;i<d;++i)b[i]=x,x+=y[i];Object(u["a"])(g)&&Object(u["a"])(g.byteOffset)&&(g.componentType=Object(l["a"])(g.componentType,c["a"].UNSIGNED_SHORT),g.type=a["a"].SCALAR,h=Object(f["a"])(g),g=h.createArrayBufferView(n.buffer,n.byteOffset+g.byteOffset,x));const T=p.length;for(i=0;i<T;++i){const e=p[i].length,t=p[i].instances,r=_(e,t,n);p[i].instances=Object(s["a"])(r,t)}const O=Object(r["a"])(new Array(T),0),w=new Uint16Array(d);for(i=0;i<d;++i)o=m[i],w[i]=O[o],++O[o];e._classes=p,e._classIds=m,e._classIndexes=w,e._parentCounts=y,e._parentIndexes=b,e._parentIds=g}function _(e,t,n){let r;for(const a in t)if(t.hasOwnProperty(a)){const i=t[a],o=i.byteOffset;if(Object(u["a"])(o)){const t=i.componentType,s=i.type;if(!Object(u["a"])(t))throw new d["a"]("componentType is required.");if(!Object(u["a"])(s))throw new d["a"]("type is required.");if(!Object(u["a"])(n))throw new d["a"](`Property ${a} requires a batch table binary.`);const c=Object(f["a"])(i),l=c.componentsPerAttribute,h=c.classType,p=c.createArrayBufferView(n.buffer,n.byteOffset+o,e);Object(u["a"])(r)||(r={}),r[a]={typedArray:p,componentCount:l,type:h}}}return r}const m=[];function y(e){const t=m;t.length=0;const n=e._classIds,r=n.length;for(let a=0;a<r;++a)g(e,a,t)}function g(e,t,n){const r=e._parentCounts,a=e._parentIds,i=e._parentIndexes,o=e._classIds,s=o.length;if(!Object(u["a"])(a))return;if(t>=s)throw new h["a"](`Parent index ${t} exceeds the total number of instances: ${s}`);if(n.indexOf(t)>-1)throw new h["a"]("Circular dependency detected in the batch table hierarchy.");n.push(t);const c=Object(u["a"])(r)?r[t]:1,l=Object(u["a"])(r)?i[t]:t;for(let u=0;u<c;++u){const r=a[l+u];r!==t&&g(e,r,n)}n.pop(t)}const x=[],T=[];let O=0;function w(e,t,n){const r=e._classIds,a=e._parentCounts,i=e._parentIds,o=e._parentIndexes,s=r.length,c=x;c.length=Math.max(c.length,s);const l=++O,h=T;h.length=0,h.push(t);while(h.length>0){if(t=h.pop(),c[t]===l)continue;c[t]=l;const r=n(e,t);if(Object(u["a"])(r))return r;const s=a[t],f=o[t];for(let e=0;e<s;++e){const n=i[f+e];n!==t&&h.push(n)}}}function v(e,t,n){let r=!0;while(r){const a=n(e,t);if(Object(u["a"])(a))return a;const i=e._parentIds[t];r=i!==t,t=i}}function j(e,t,n){const r=e._parentCounts,a=e._parentIds;return Object(u["a"])(a)?Object(u["a"])(r)?w(e,t,n):v(e,t,n):n(e,t)}function A(e,t){const n=e.typedArray,r=e.componentCount;return 1===r?n[t]:e.type.unpack(n,t*r)}function L(e,t,n){const r=e.typedArray,a=e.componentCount;1===a?r[t]=n:e.type.pack(n,r,t*a)}p.prototype.hasProperty=function(e,t){const n=j(this,e,(function(e,n){const r=e._classIds[n],a=e._classes[r].instances;if(Object(u["a"])(a[t]))return!0}));return Object(u["a"])(n)},p.prototype.propertyExists=function(e){const t=this._classes,n=t.length;for(let r=0;r<n;++r){const n=t[r].instances;if(Object(u["a"])(n[e]))return!0}return!1},p.prototype.getPropertyIds=function(e,t){return t=Object(u["a"])(t)?t:[],t.length=0,j(this,e,(function(e,n){const r=e._classIds[n],a=e._classes[r].instances;for(const i in a)a.hasOwnProperty(i)&&-1===t.indexOf(i)&&t.push(i)})),t},p.prototype.getProperty=function(e,t){return j(this,e,(function(e,n){const r=e._classIds[n],a=e._classes[r],i=e._classIndexes[n],s=a.instances[t];if(Object(u["a"])(s))return Object(u["a"])(s.typedArray)?A(s,i):Object(o["a"])(s[i],!0)}))},p.prototype.setProperty=function(e,t,n){const r=j(this,e,(function(r,a){const i=r._classIds[a],s=r._classes[i],c=r._classIndexes[a],l=s.instances[t];if(Object(u["a"])(l)){if(a!==e)throw new h["a"](`Inherited property "${t}" is read-only.`);return Object(u["a"])(l.typedArray)?L(l,c,n):l[c]=Object(o["a"])(n,!0),!0}}));return Object(u["a"])(r)},p.prototype.isClass=function(e,t){const n=j(this,e,(function(e,n){const r=e._classIds[n],a=e._classes[r];if(a.name===t)return!0}));return Object(u["a"])(n)},p.prototype.getClassName=function(e){const t=this._classIds[e],n=this._classes[t];return n.name}},"50f2":function(e,t,n){"use strict";var r=n("44e9"),a=n("2fad"),i=n("1a5d"),o=n("c937"),s=n("da23"),c=n("ddd8");function u(e){e=Object(i["a"])(e,i["a"].EMPTY_OBJECT),this.material=e.material,this.translucent=Object(i["a"])(e.translucent,!0),this._vertexShaderSource=e.vertexShaderSource,this._fragmentShaderSource=e.fragmentShaderSource,this._renderState=e.renderState,this._closed=Object(i["a"])(e.closed,!1)}Object.defineProperties(u.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}}}),u.prototype.getFragmentShaderSource=function(){const e=[];return this.flat&&e.push("#define FLAT"),this.faceForward&&e.push("#define FACE_FORWARD"),Object(o["a"])(this.material)&&e.push(this.material.shaderSource),e.push(this.fragmentShaderSource),e.join("\n")},u.prototype.isTranslucent=function(){return Object(o["a"])(this.material)&&this.material.isTranslucent()||!Object(o["a"])(this.material)&&this.translucent},u.prototype.getRenderState=function(){const e=this.isTranslucent(),t=Object(r["a"])(this.renderState,!1);return e?(t.depthMask=!1,t.blending=s["a"].ALPHA_BLEND):t.depthMask=!0,t},u.getDefaultRenderState=function(e,t,n){let r={depthTest:{enabled:!0}};return e&&(r.depthMask=!1,r.blending=s["a"].ALPHA_BLEND),t&&(r.cull={enabled:!0,face:c["a"].BACK}),Object(o["a"])(n)&&(r=Object(a["a"])(n,r,!0)),r},t["a"]=u},"73f3":function(e,t,n){"use strict";var r=n("85b2"),a=n("dde0"),i=n("6b82"),o=n("2fad"),s=n("cbf0"),c=n("c937"),u=n("21b7"),l=n("e2a6"),h=n("0238"),f=n("2341"),d=n("1494"),p=n("4d68"),b=n("1a75");function _(e,t,n){if(!Object(c["a"])(e))throw new l["a"]("context is required");if(!Object(c["a"])(t))throw new l["a"]("attributes is required");if(!Object(c["a"])(n))throw new l["a"]("numberOfInstances is required");if(this._attributes=t,this._numberOfInstances=n,0===t.length)return;const a=m(t),o=e.floatingPointTexture,s=a===d["a"].FLOAT&&!o,u=g(t,s),h=x(u,t,s),p=Math.floor(f["a"].maximumTextureSize/h),b=Math.min(n,p),_=h*b,y=Math.ceil(n/b),T=1/_,O=.5*T,w=1/y,v=.5*w;this._textureDimensions=new r["a"](_,y),this._textureStep=new i["a"](T,O,w,v),this._pixelDatatype=s?d["a"].UNSIGNED_BYTE:a,this._packFloats=s,this._offsets=u,this._stride=h,this._texture=void 0;const j=4*_*y;this._batchValues=a!==d["a"].FLOAT||s?new Uint8Array(j):new Float32Array(j),this._batchValuesDirty=!1}function m(e){let t=!1;const n=e.length;for(let r=0;r<n;++r)if(e[r].componentDatatype!==s["a"].UNSIGNED_BYTE){t=!0;break}return t?d["a"].FLOAT:d["a"].UNSIGNED_BYTE}function y(e,t){const n=e[t].componentsPerAttribute;return 2===n?r["a"]:3===n?a["a"]:4===n?i["a"]:Number}function g(e,t){const n=new Array(e.length);let r=0;const a=e.length;for(let i=0;i<a;++i){const a=e[i],o=a.componentDatatype;n[i]=r,o!==s["a"].UNSIGNED_BYTE&&t?r+=4:++r}return n}function x(e,t,n){const r=e.length,a=e[r-1],i=t[r-1],o=i.componentDatatype;return o!==s["a"].UNSIGNED_BYTE&&n?a+4:a+1}Object.defineProperties(_.prototype,{attributes:{get:function(){return this._attributes}},numberOfInstances:{get:function(){return this._numberOfInstances}}});const T=new i["a"];function O(e,t,n){let r=i["a"].unpack(e,t,T);const a=i["a"].unpackFloat(r);r=i["a"].unpack(e,t+4,T);const o=i["a"].unpackFloat(r);r=i["a"].unpack(e,t+8,T);const s=i["a"].unpackFloat(r);r=i["a"].unpack(e,t+12,T);const c=i["a"].unpackFloat(r);return i["a"].fromElements(a,o,s,c,n)}function w(e,t,n){let r=i["a"].packFloat(e.x,T);i["a"].pack(r,t,n),r=i["a"].packFloat(e.y,r),i["a"].pack(r,t,n+4),r=i["a"].packFloat(e.z,r),i["a"].pack(r,t,n+8),r=i["a"].packFloat(e.w,r),i["a"].pack(r,t,n+12)}const v=new i["a"];_.prototype.getBatchedAttribute=function(e,t,n){if(e<0||e>=this._numberOfInstances)throw new l["a"]("instanceIndex is out of range.");if(t<0||t>=this._attributes.length)throw new l["a"]("attributeIndex is out of range");const r=this._attributes,a=this._offsets[t],o=this._stride,s=4*o*e+4*a;let u;u=this._packFloats&&r[t].componentDatatype!==d["a"].UNSIGNED_BYTE?O(this._batchValues,s,v):i["a"].unpack(this._batchValues,s,v);const h=y(r,t);return Object(c["a"])(h.fromCartesian4)?h.fromCartesian4(u,n):Object(c["a"])(h.clone)?h.clone(u,n):u.x};const j=[void 0,void 0,new r["a"],new a["a"],new i["a"]],A=new i["a"];function L(e,t){const n=e._textureDimensions;e._texture=new b["a"]({context:t,pixelFormat:h["a"].RGBA,pixelDatatype:e._pixelDatatype,width:n.x,height:n.y,sampler:p["a"].NEAREST,flipY:!1})}function S(e){const t=e._textureDimensions;e._texture.copyFrom({source:{width:t.x,height:t.y,arrayBufferView:e._batchValues}})}function C(e){const t=e._stride;return 1===e._textureDimensions.y?`uniform vec4 batchTextureStep; \nvec2 computeSt(float batchId) \n{ \n    float stepX = batchTextureStep.x; \n    float centerX = batchTextureStep.y; \n    float numberOfAttributes = float(${t}); \n    return vec2(centerX + (batchId * numberOfAttributes * stepX), 0.5); \n} \n`:`uniform vec4 batchTextureStep; \nuniform vec2 batchTextureDimensions; \nvec2 computeSt(float batchId) \n{ \n    float stepX = batchTextureStep.x; \n    float centerX = batchTextureStep.y; \n    float stepY = batchTextureStep.z; \n    float centerY = batchTextureStep.w; \n    float numberOfAttributes = float(${t}); \n    float xId = mod(batchId * numberOfAttributes, batchTextureDimensions.x); \n    float yId = floor(batchId * numberOfAttributes / batchTextureDimensions.x); \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); \n} \n`}function D(e){return 1===e?"float":"vec"+e}function I(e){return 1===e?".x":2===e?".xy":3===e?".xyz":""}function E(e,t){const n=e._attributes,r=n[t],a=r.componentsPerAttribute,i=r.functionName,o=D(a),c=I(a),u=e._offsets[t];let l=`${o} ${i}(float batchId) \n{ \n    vec2 st = computeSt(batchId); \n    st.x += batchTextureStep.x * float(${u}); \n`;return e._packFloats&&r.componentDatatype!==d["a"].UNSIGNED_BYTE?l+="vec4 textureValue; \ntextureValue.x = czm_unpackFloat(texture2D(batchTexture, st)); \ntextureValue.y = czm_unpackFloat(texture2D(batchTexture, st + vec2(batchTextureStep.x, 0.0))); \ntextureValue.z = czm_unpackFloat(texture2D(batchTexture, st + vec2(batchTextureStep.x * 2.0, 0.0))); \ntextureValue.w = czm_unpackFloat(texture2D(batchTexture, st + vec2(batchTextureStep.x * 3.0, 0.0))); \n":l+="    vec4 textureValue = texture2D(batchTexture, st); \n",l+=`    ${o} value = textureValue${c}; \n`,e._pixelDatatype!==d["a"].UNSIGNED_BYTE||r.componentDatatype!==s["a"].UNSIGNED_BYTE||r.normalize?e._pixelDatatype===d["a"].FLOAT&&r.componentDatatype===s["a"].UNSIGNED_BYTE&&r.normalize&&(l+="value /= 255.0; \n"):l+="value *= 255.0; \n",l+="    return value; \n} \n",l}_.prototype.setBatchedAttribute=function(e,t,n){if(e<0||e>=this._numberOfInstances)throw new l["a"]("instanceIndex is out of range.");if(t<0||t>=this._attributes.length)throw new l["a"]("attributeIndex is out of range");if(!Object(c["a"])(n))throw new l["a"]("value is required.");const r=this._attributes,a=j[r[t].componentsPerAttribute],o=this.getBatchedAttribute(e,t,a),s=y(this._attributes,t),u=Object(c["a"])(s.equals)?s.equals(o,n):o===n;if(u)return;const h=A;h.x=Object(c["a"])(n.x)?n.x:n,h.y=Object(c["a"])(n.y)?n.y:0,h.z=Object(c["a"])(n.z)?n.z:0,h.w=Object(c["a"])(n.w)?n.w:0;const f=this._offsets[t],p=this._stride,b=4*p*e+4*f;this._packFloats&&r[t].componentDatatype!==d["a"].UNSIGNED_BYTE?w(h,this._batchValues,b):i["a"].pack(h,this._batchValues,b),this._batchValuesDirty=!0},_.prototype.update=function(e){Object(c["a"])(this._texture)&&!this._batchValuesDirty||0===this._attributes.length||(this._batchValuesDirty=!1,Object(c["a"])(this._texture)||L(this,e.context),S(this))},_.prototype.getUniformMapCallback=function(){const e=this;return function(t){if(0===e._attributes.length)return t;const n={batchTexture:function(){return e._texture},batchTextureDimensions:function(){return e._textureDimensions},batchTextureStep:function(){return e._textureStep}};return Object(o["a"])(t,n)}},_.prototype.getVertexShaderCallback=function(){const e=this._attributes;if(0===e.length)return function(e){return e};let t="uniform highp sampler2D batchTexture; \n";t+=C(this)+"\n";const n=e.length;for(let r=0;r<n;++r)t+=E(this,r);return function(e){const n=e.indexOf("void main"),r=e.substring(0,n),a=e.substring(n);return`${r}\n${t}\n${a}`}},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){return this._texture=this._texture&&this._texture.destroy(),Object(u["a"])(this)},t["a"]=_},"752a":function(e,t,n){"use strict";var r=n("dde0"),a=n("4051"),i=n("cbf0"),o=n("c937"),s=n("44c1"),c=n("21b7"),u=n("e2a6"),l=n("722e"),h=n("bb9e"),f=n("51f2"),d=n("77df"),p=n("8c64"),b=n("8fcb"),_=n("0b24"),m=n("666e"),y=n("384a"),g=n("1d6b"),x=n("9ae7"),T=n("8289");function O(e,t,n,r,a){this._tileset=e,this._tile=t,this._resource=n,this._model=void 0,this._batchTable=void 0,this._features=void 0,this._classificationType=e.vectorClassificationOnly?void 0:e.classificationType,this._metadata=void 0,this._batchIdAttributeName=void 0,this._diffuseAttributeOrUniformName={},this._rtcCenterTransform=void 0,this._contentModelMatrix=void 0,this.featurePropertiesDirty=!1,this._group=void 0,C(this,r,a)}function w(e){let t=T["a"].getAttributeOrUniformBySemantic(e,"_BATCHID");return Object(o["a"])(t)||(t=T["a"].getAttributeOrUniformBySemantic(e,"BATCHID"),Object(o["a"])(t)&&O._deprecationWarning("b3dm-legacy-batchid","The glTF in this b3dm uses the semantic `BATCHID`. Application-specific semantics should be prefixed with an underscore: `_BATCHID`.")),t}function v(e){return function(t,n){const r=e._batchTable,a=!Object(o["a"])(e._classificationType),i=e._model.gltf;Object(o["a"])(i)&&(e._batchIdAttributeName=w(i),e._diffuseAttributeOrUniformName[n]=T["a"].getDiffuseAttributeOrUniform(i,n));const s=r.getVertexShaderCallback(a,e._batchIdAttributeName,e._diffuseAttributeOrUniformName[n]);return Object(o["a"])(s)?s(t):t}}function j(e){return function(t,n){const r=e._batchTable,a=!Object(o["a"])(e._classificationType),i=e._model.gltf;Object(o["a"])(i)&&(e._diffuseAttributeOrUniformName[n]=T["a"].getDiffuseAttributeOrUniform(i,n));const s=r.getFragmentShaderCallback(a,e._diffuseAttributeOrUniformName[n],!1);return Object(o["a"])(s)?s(t):t}}function A(e){return function(){return e._batchTable.getPickId()}}function L(e){return function(t){const n=e._batchTable,r=n.getClassificationFragmentShaderCallback();return Object(o["a"])(r)?r(t):t}}function S(e){return function(t,n){e._model.updateCommands(t,n)}}function C(e,t,n){const a=e._tileset,s=e._tile,c=e._resource,u=p["a"].parse(t,n);let _=u.batchLength;const T=u.featureTableJson,O=u.featureTableBinary,w=new m["a"](T,O);_=w.getGlobalProperty("BATCH_LENGTH"),w.featuresLength=_;const C=u.batchTableJson,D=u.batchTableBinary;let I;Object(o["a"])(e._classificationType)&&(I=S(e));const E=new b["a"](e,_,C,D,I);e._batchTable=E;const P=u.gltf,k={content:e,primitive:a};e._rtcCenterTransform=l["a"].IDENTITY;const B=w.getGlobalProperty("RTC_CENTER",i["a"].FLOAT,3);Object(o["a"])(B)&&(e._rtcCenterTransform=l["a"].fromTranslation(r["a"].fromArray(B))),e._contentModelMatrix=l["a"].multiply(s.computedTransform,e._rtcCenterTransform,new l["a"]),Object(o["a"])(e._classificationType)?e._model=new y["a"]({gltf:P,cull:!1,basePath:c,requestType:h["a"].TILES3D,modelMatrix:e._contentModelMatrix,upAxis:a._gltfUpAxis,forwardAxis:d["a"].X,debugWireframe:a.debugWireframe,vertexShaderLoaded:v(e),classificationShaderLoaded:L(e),uniformMapLoaded:E.getUniformMapCallback(),pickIdLoaded:A(e),classificationType:e._classificationType,batchTable:E}):(e._model=new g["a"]({gltf:P,cull:!1,releaseGltfJson:!0,opaquePass:f["a"].CESIUM_3D_TILE,basePath:c,requestType:h["a"].TILES3D,modelMatrix:e._contentModelMatrix,upAxis:a._gltfUpAxis,forwardAxis:d["a"].X,shadows:a.shadows,debugWireframe:a.debugWireframe,incrementallyLoadTextures:!1,vertexShaderLoaded:v(e),fragmentShaderLoaded:j(e),uniformMapLoaded:E.getUniformMapCallback(),pickIdLoaded:A(e),addBatchIdToGeneratedShaders:_>0,pickObject:k,lightColor:a.lightColor,imageBasedLighting:a.imageBasedLighting,backFaceCulling:a.backFaceCulling,showOutline:a.showOutline,showCreditsOnScreen:a.showCreditsOnScreen}),e._model.readyPromise.then((function(e){e.activeAnimations.addAll({loop:x["a"].REPEAT})})))}function D(e){const t=e.featuresLength;if(!Object(o["a"])(e._features)&&t>0){const n=new Array(t);for(let r=0;r<t;++r)n[r]=new _["a"](e,r);e._features=n}}O._deprecationWarning=s["a"],Object.defineProperties(O.prototype,{featuresLength:{get:function(){return this.batchTable.featuresLength}},pointsLength:{get:function(){return this._model.pointsLength}},trianglesLength:{get:function(){return this._model.trianglesLength}},geometryByteLength:{get:function(){return this._model.geometryByteLength}},texturesByteLength:{get:function(){return this._model.texturesByteLength}},batchTableByteLength:{get:function(){return this.batchTable.memorySizeInBytes}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._model.readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}}),O.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},O.prototype.getFeature=function(e){const t=this.featuresLength;if(!Object(o["a"])(e)||e<0||e>=t)throw new u["a"](`batchId is required and between zero and featuresLength - 1 (${t-1}).`);return D(this),this._features[e]},O.prototype.applyDebugSettings=function(e,t){t=e?t:a["a"].WHITE,0===this.featuresLength?this._model.color=t:this._batchTable.setAllColor(t)},O.prototype.applyStyle=function(e){if(0===this.featuresLength){const t=Object(o["a"])(e)&&Object(o["a"])(e.color),n=Object(o["a"])(e)&&Object(o["a"])(e.show);this._model.color=t?e.color.evaluateColor(void 0,this._model.color):a["a"].clone(a["a"].WHITE,this._model.color),this._model.show=!n||e.show.evaluate(void 0)}else this._batchTable.applyStyle(e)},O.prototype.update=function(e,t){const n=t.commandList.length,r=this._model,a=this._tile,i=this._batchTable;i.update(e,t),this._contentModelMatrix=l["a"].multiply(a.computedTransform,this._rtcCenterTransform,this._contentModelMatrix),r.modelMatrix=this._contentModelMatrix,r.shadows=e.shadows,r.lightColor=e.lightColor,r.imageBasedLighting=e.imageBasedLighting,r.backFaceCulling=e.backFaceCulling,r.debugWireframe=e.debugWireframe,r.showCreditsOnScreen=e.showCreditsOnScreen,r.splitDirection=e.splitDirection;const s=e.clippingPlanes;r.referenceMatrix=e.clippingPlanesOriginMatrix,Object(o["a"])(s)&&a.clippingPlanesDirty&&(r._clippingPlanes=s.enabled&&a._isClipped?s:void 0),Object(o["a"])(s)&&Object(o["a"])(r._clippingPlanes)&&r._clippingPlanes!==s&&(r._clippingPlanes=s),r.update(t);const c=t.commandList.length;n<c&&(t.passes.render||t.passes.pick)&&!Object(o["a"])(this._classificationType)&&i.addDerivedCommands(t,n)},O.prototype.isDestroyed=function(){return!1},O.prototype.destroy=function(){return this._model=this._model&&this._model.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),Object(c["a"])(this)},t["a"]=O},"77df":function(e,t,n){"use strict";var r=n("ae9b"),a=n("b8b5"),i=n("d767"),o=n("722e");const s={X:0,Y:1,Z:2};s.Y_UP_TO_Z_UP=o["a"].fromRotationTranslation(i["a"].fromRotationX(a["a"].PI_OVER_TWO)),s.Z_UP_TO_Y_UP=o["a"].fromRotationTranslation(i["a"].fromRotationX(-a["a"].PI_OVER_TWO)),s.X_UP_TO_Z_UP=o["a"].fromRotationTranslation(i["a"].fromRotationY(-a["a"].PI_OVER_TWO)),s.Z_UP_TO_X_UP=o["a"].fromRotationTranslation(i["a"].fromRotationY(a["a"].PI_OVER_TWO)),s.X_UP_TO_Y_UP=o["a"].fromRotationTranslation(i["a"].fromRotationZ(a["a"].PI_OVER_TWO)),s.Y_UP_TO_X_UP=o["a"].fromRotationTranslation(i["a"].fromRotationZ(-a["a"].PI_OVER_TWO)),s.fromName=function(e){return r["a"].typeOf.string("name",e),s[e]},t["a"]=Object.freeze(s)},8574:function(e,t,n){"use strict";const r={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};t["a"]=Object.freeze(r)},"8c64":function(e,t,n){"use strict";var r=n("ae9b"),a=n("1a5d"),i=n("44c1"),o=n("7526"),s=n("e2aa");const c={};c._deprecationWarning=i["a"];const u=Uint32Array.BYTES_PER_ELEMENT;c.parse=function(e,t){const n=Object(a["a"])(t,0);r["a"].defined("arrayBuffer",e),t=n;const i=new Uint8Array(e),l=new DataView(e);t+=u;const h=l.getUint32(t,!0);if(1!==h)throw new s["a"](`Only Batched 3D Model version 1 is supported.  Version ${h} is not.`);t+=u;const f=l.getUint32(t,!0);t+=u;let d=l.getUint32(t,!0);t+=u;let p=l.getUint32(t,!0);t+=u;let b=l.getUint32(t,!0);t+=u;let _,m,y=l.getUint32(t,!0);t+=u,b>=570425344?(t-=2*u,_=d,b=p,y=0,d=0,p=0,c._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchLength] [batchTableByteLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel.")):y>=570425344&&(t-=u,_=b,b=d,y=p,d=0,p=0,c._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchTableJsonByteLength] [batchTableBinaryByteLength] [batchLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel.")),0===d?m={BATCH_LENGTH:Object(a["a"])(_,0)}:(m=Object(o["a"])(i,t,d),t+=d);const g=new Uint8Array(e,t,p);let x,T;t+=p,b>0&&(x=Object(o["a"])(i,t,b),t+=b,y>0&&(T=new Uint8Array(e,t,y),T=new Uint8Array(T),t+=y));const O=n+f-t;if(0===O)throw new s["a"]("glTF byte length must be greater than 0.");let w;return t%4===0?w=new Uint8Array(e,t,O):(c._deprecationWarning("b3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),w=new Uint8Array(i.subarray(t,t+O))),{batchLength:_,featureTableJson:m,featureTableBinary:g,batchTableJson:x,batchTableBinary:T,gltf:w}},t["a"]=c},c21c:function(e,t,n){"use strict";var r=n("85b2"),a=n("4051"),i=n("c937"),o=n("21b7"),s=n("a3c8"),c=n("66fd"),u=n("1494");function l(){this._uniformMap=void 0,this._command=void 0,this._colorTexture=void 0,this._depthTexture=void 0,this._ready=!1,this._name="czm_autoexposure",this._logDepthChanged=void 0,this._useLogDepth=void 0,this._framebuffers=void 0,this._previousLuminance=new c["a"],this._commands=void 0,this._clearCommand=void 0,this._minMaxLuminance=new r["a"],this.enabled=!0,this._enabled=!0,this.minimumLuminance=.1,this.maximumLuminance=10}function h(e){const t=e._framebuffers;if(!Object(i["a"])(t))return;const n=t.length;for(let r=0;r<n;++r)t[r].destroy();e._framebuffers=void 0,e._previousLuminance.destroy(),e._previousLuminance=void 0}function f(e,t){h(e);let n=e._width,r=e._height;const a=t.halfFloatingPointTexture?u["a"].HALF_FLOAT:u["a"].FLOAT,i=Math.ceil(Math.log(Math.max(n,r))/Math.log(3)),o=new Array(i);for(let u=0;u<i;++u)n=Math.max(Math.ceil(n/3),1),r=Math.max(Math.ceil(r/3),1),o[u]=new c["a"],o[u].update(t,n,r,1,a);const s=o[i-1].getColorTexture(0);e._previousLuminance.update(t,s.width,s.height,1,a),e._framebuffers=o}function d(e){const t=e._commands;if(!Object(i["a"])(t))return;const n=t.length;for(let r=0;r<n;++r)t[r].shaderProgram.destroy();e._commands=void 0}function p(e,t){let n;if(0===t)n={colorTexture:function(){return e._colorTexture},colorTextureDimensions:function(){return e._colorTexture.dimensions}};else{const r=e._framebuffers[t-1].getColorTexture(0);n={colorTexture:function(){return r},colorTextureDimensions:function(){return r.dimensions}}}return n.minMaxLuminance=function(){return e._minMaxLuminance},n.previousLuminance=function(){return e._previousLuminance.getColorTexture(0)},n}function b(e,t){let n="uniform sampler2D colorTexture; \nvarying vec2 v_textureCoordinates; \nfloat sampleTexture(vec2 offset) { \n";return n+=0===e?"    vec4 color = texture2D(colorTexture, v_textureCoordinates + offset); \n    return czm_luminance(color.rgb); \n":"    return texture2D(colorTexture, v_textureCoordinates + offset).r; \n",n+="}\n\n",n+="uniform vec2 colorTextureDimensions; \nuniform vec2 minMaxLuminance; \nuniform sampler2D previousLuminance; \nvoid main() { \n    float color = 0.0; \n    float xStep = 1.0 / colorTextureDimensions.x; \n    float yStep = 1.0 / colorTextureDimensions.y; \n    int count = 0; \n    for (int i = 0; i < 3; ++i) { \n        for (int j = 0; j < 3; ++j) { \n            vec2 offset; \n            offset.x = -xStep + float(i) * xStep; \n            offset.y = -yStep + float(j) * yStep; \n            if (offset.x < 0.0 || offset.x > 1.0 || offset.y < 0.0 || offset.y > 1.0) { \n                continue; \n            } \n            color += sampleTexture(offset); \n            ++count; \n        } \n    } \n    if (count > 0) { \n        color /= float(count); \n    } \n",e===t-1&&(n+="    float previous = texture2D(previousLuminance, vec2(0.5)).r; \n    color = clamp(color, minMaxLuminance.x, minMaxLuminance.y); \n    color = previous + (color - previous) / (60.0 * 1.5); \n    color = clamp(color, minMaxLuminance.x, minMaxLuminance.y); \n"),n+="    gl_FragColor = vec4(color); \n} \n",n}function _(e,t){d(e);const n=e._framebuffers,r=n.length,a=new Array(r);for(let i=0;i<r;++i)a[i]=t.createViewportQuadCommand(b(i,r),{framebuffer:n[i].framebuffer,uniformMap:p(e,i)});e._commands=a}Object.defineProperties(l.prototype,{ready:{get:function(){return this._ready}},name:{get:function(){return this._name}},outputTexture:{get:function(){const e=this._framebuffers;if(Object(i["a"])(e))return e[e.length-1].getColorTexture(0)}}}),l.prototype.clear=function(e){const t=this._framebuffers;if(!Object(i["a"])(t))return;let n=this._clearCommand;Object(i["a"])(n)||(n=this._clearCommand=new s["a"]({color:new a["a"](0,0,0,0),framebuffer:void 0}));const r=t.length;for(let a=0;a<r;++a)t[a].clear(e,n)},l.prototype.update=function(e){const t=e.drawingBufferWidth,n=e.drawingBufferHeight;t===this._width&&n===this._height||(this._width=t,this._height=n,f(this,e),_(this,e),this._ready||(this._ready=!0)),this._minMaxLuminance.x=this.minimumLuminance,this._minMaxLuminance.y=this.maximumLuminance;const r=this._framebuffers,a=r[r.length-1];r[r.length-1]=this._previousLuminance,this._commands[this._commands.length-1].framebuffer=this._previousLuminance.framebuffer,this._previousLuminance=a},l.prototype.execute=function(e,t){this._colorTexture=t;const n=this._commands;if(!Object(i["a"])(n))return;const r=n.length;for(let a=0;a<r;++a)n[a].execute(e)},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return h(this),d(this),Object(o["a"])(this)},t["a"]=l},c380:function(e,t,n){"use strict";var r=n("85b2"),a=n("dde0"),i=n("6b82"),o=n("ae9b"),s=n("e2a6"),c=n("d70f"),u=n("d767"),l=n("722e");const h={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4",getMathType:function(e){switch(e){case h.SCALAR:return Number;case h.VEC2:return r["a"];case h.VEC3:return a["a"];case h.VEC4:return i["a"];case h.MAT2:return c["a"];case h.MAT3:return u["a"];case h.MAT4:return l["a"];default:throw new s["a"]("attributeType is not a valid value.")}},getNumberOfComponents:function(e){switch(e){case h.SCALAR:return 1;case h.VEC2:return 2;case h.VEC3:return 3;case h.VEC4:case h.MAT2:return 4;case h.MAT3:return 9;case h.MAT4:return 16;default:throw new s["a"]("attributeType is not a valid value.")}},getAttributeLocationCount:function(e){switch(e){case h.SCALAR:case h.VEC2:case h.VEC3:case h.VEC4:return 1;case h.MAT2:return 2;case h.MAT3:return 3;case h.MAT4:return 4;default:throw new s["a"]("attributeType is not a valid value.")}},getGlslType:function(e){switch(o["a"].typeOf.string("attributeType",e),e){case h.SCALAR:return"float";case h.VEC2:return"vec2";case h.VEC3:return"vec3";case h.VEC4:return"vec4";case h.MAT2:return"mat2";case h.MAT3:return"mat3";case h.MAT4:return"mat4";default:throw new s["a"]("attributeType is not a valid value.")}}};t["a"]=Object.freeze(h)},c40b:function(e,t,n){"use strict";var r=n("85b2"),a=n("dde0"),i=n("8d54"),o=n("3736"),s=n("1a5d"),c=n("61ad"),u=n("c937"),l=n("e2a6"),h=n("f7b5"),f=n("1f02"),d=n("2dd3"),p=n("b8b5"),b=n("4a63"),_=n("9f38"),m=n("e2aa"),y=n("3242"),g=n("5be5"),x=n("c7de"),T=n("e919"),O=n("a507"),w=n("e956");function v(e){if(e=Object(s["a"])(e,s["a"].EMPTY_OBJECT),!Object(u["a"])(e.url))throw new l["a"]("options.url is required.");this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0;const t=_["a"].createIfNeeded(e.url);t.appendForwardSlash(),Object(u["a"])(e.token)&&t.setQueryParameters({token:e.token}),this._resource=t,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=Object(s["a"])(e.tileWidth,256),this._tileHeight=Object(s["a"])(e.tileHeight,256),this._maximumLevel=e.maximumLevel,this._tilingScheme=Object(s["a"])(e.tilingScheme,new d["a"]({ellipsoid:e.ellipsoid})),this._useTiles=Object(s["a"])(e.usePreCachedTilesIfAvailable,!0),this._rectangle=Object(s["a"])(e.rectangle,this._tilingScheme.rectangle),this._layers=e.layers;let n=e.credit;"string"===typeof n&&(n=new o["a"](n)),this._credit=n,this.enablePickFeatures=Object(s["a"])(e.enablePickFeatures,!0),this._errorEvent=new h["a"],this._ready=!1,this._readyPromise=Object(c["a"])();const i=this;let f;function p(t){const n=t.tileInfo;if(Object(u["a"])(n)){if(i._tileWidth=n.rows,i._tileHeight=n.cols,102100===n.spatialReference.wkid||102113===n.spatialReference.wkid)i._tilingScheme=new x["a"]({ellipsoid:e.ellipsoid});else{if(4326!==t.tileInfo.spatialReference.wkid){const e=`Tile spatial reference WKID ${t.tileInfo.spatialReference.wkid} is not supported.`;return f=y["a"].handleError(f,i,i._errorEvent,e,void 0,void 0,void 0,w),void(f.retry||i._readyPromise.reject(new m["a"](e)))}i._tilingScheme=new d["a"]({ellipsoid:e.ellipsoid})}if(i._maximumLevel=t.tileInfo.lods.length-1,Object(u["a"])(t.fullExtent)){if(Object(u["a"])(t.fullExtent.spatialReference)&&Object(u["a"])(t.fullExtent.spatialReference.wkid))if(102100===t.fullExtent.spatialReference.wkid||102113===t.fullExtent.spatialReference.wkid){const e=new g["a"],n=t.fullExtent,r=e.unproject(new a["a"](Math.max(n.xmin,-i._tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.max(n.ymin,-i._tilingScheme.ellipsoid.maximumRadius*Math.PI),0)),o=e.unproject(new a["a"](Math.min(n.xmax,i._tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.min(n.ymax,i._tilingScheme.ellipsoid.maximumRadius*Math.PI),0));i._rectangle=new b["a"](r.longitude,r.latitude,o.longitude,o.latitude)}else{if(4326!==t.fullExtent.spatialReference.wkid){const e=`fullExtent.spatialReference WKID ${t.fullExtent.spatialReference.wkid} is not supported.`;return f=y["a"].handleError(f,i,i._errorEvent,e,void 0,void 0,void 0,w),void(f.retry||i._readyPromise.reject(new m["a"](e)))}i._rectangle=b["a"].fromDegrees(t.fullExtent.xmin,t.fullExtent.ymin,t.fullExtent.xmax,t.fullExtent.ymax)}}else i._rectangle=i._tilingScheme.rectangle;Object(u["a"])(i._tileDiscardPolicy)||(i._tileDiscardPolicy=new T["a"]({missingImageUrl:j(i,0,0,i._maximumLevel).url,pixelsToCheck:[new r["a"](0,0),new r["a"](200,20),new r["a"](20,200),new r["a"](80,110),new r["a"](160,130)],disableCheckIfAllPixelsAreTransparent:!0})),i._useTiles=!0}else i._useTiles=!1;Object(u["a"])(t.copyrightText)&&t.copyrightText.length>0&&(i._credit=new o["a"](t.copyrightText)),i._ready=!0,i._readyPromise.resolve(!0),y["a"].handleSuccess(f)}function O(e){const t=`An error occurred while accessing ${i._resource.url}.`;f=y["a"].handleError(f,i,i._errorEvent,t,void 0,void 0,void 0,w),i._readyPromise.reject(new m["a"](t))}function w(){const e=i._resource.getDerivedResource({queryParameters:{f:"json"}});e.fetchJsonp().then((function(e){p(e)})).catch((function(e){O(e)}))}this._useTiles?w():(this._ready=!0,this._readyPromise.resolve(!0))}function j(e,t,n,r,a){let i;if(e._useTiles)i=e._resource.getDerivedResource({url:`tile/${r}/${n}/${t}`,request:a});else{const o=e._tilingScheme.tileXYToNativeRectangle(t,n,r),s=`${o.west},${o.south},${o.east},${o.north}`,c={bbox:s,size:`${e._tileWidth},${e._tileHeight}`,format:"png32",transparent:!0,f:"image"};e._tilingScheme.projection instanceof f["a"]?(c.bboxSR=4326,c.imageSR=4326):(c.bboxSR=3857,c.imageSR=3857),e.layers&&(c.layers="show:"+e.layers),i=e._resource.getDerivedResource({url:"export",request:a,queryParameters:c})}return i}Object.defineProperties(v.prototype,{url:{get:function(){return this._resource._url}},token:{get:function(){return this._resource.queryParameters.token}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){if(!this._ready)throw new l["a"]("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new l["a"]("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new l["a"]("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new l["a"]("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new l["a"]("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){if(!this._ready)throw new l["a"]("rectangle must not be called before the imagery provider is ready.");return this._rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new l["a"]("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},credit:{get:function(){return this._credit}},usingPrecachedTiles:{get:function(){return this._useTiles}},hasAlphaChannel:{get:function(){return!0}},layers:{get:function(){return this._layers}}}),v.prototype.getTileCredits=function(e,t,n){},v.prototype.requestImage=function(e,t,n,r){if(!this._ready)throw new l["a"]("requestImage must not be called before the imagery provider is ready.");return w["a"].loadImage(this,j(this,e,t,n,r))},v.prototype.pickFeatures=function(e,t,n,r,o){if(!this._ready)throw new l["a"]("pickFeatures must not be called before the imagery provider is ready.");if(!this.enablePickFeatures)return;const s=this._tilingScheme.tileXYToNativeRectangle(e,t,n);let c,h,d;if(this._tilingScheme.projection instanceof f["a"])c=p["a"].toDegrees(r),h=p["a"].toDegrees(o),d="4326";else{const e=this._tilingScheme.projection.project(new i["a"](r,o,0));c=e.x,h=e.y,d="3857"}let b="visible";Object(u["a"])(this._layers)&&(b+=":"+this._layers);const _={f:"json",tolerance:2,geometryType:"esriGeometryPoint",geometry:`${c},${h}`,mapExtent:`${s.west},${s.south},${s.east},${s.north}`,imageDisplay:`${this._tileWidth},${this._tileHeight},96`,sr:d,layers:b},m=this._resource.getDerivedResource({url:"identify",queryParameters:_});return m.fetchJson().then((function(e){const t=[],n=e.results;if(!Object(u["a"])(n))return t;for(let r=0;r<n.length;++r){const e=n[r],o=new O["a"];if(o.data=e,o.name=e.value,o.properties=e.attributes,o.configureDescriptionFromProperties(e.attributes),"esriGeometryPoint"===e.geometryType&&e.geometry){const t=e.geometry.spatialReference&&e.geometry.spatialReference.wkid?e.geometry.spatialReference.wkid:4326;if(4326===t||4283===t)o.position=i["a"].fromDegrees(e.geometry.x,e.geometry.y,e.geometry.z);else if(102100===t||900913===t||3857===t){const t=new g["a"];o.position=t.unproject(new a["a"](e.geometry.x,e.geometry.y,e.geometry.z))}}t.push(o)}return t}))},t["a"]=v}}]);