(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors~df26e8ae"],{1197:function(e,t,i){"use strict";var n=i("ae9b");const r={VERTEX:0,FRAGMENT:1,BOTH:2,includesVertexShader:function(e){return n["a"].typeOf.number("destination",e),e===r.VERTEX||e===r.BOTH},includesFragmentShader:function(e){return n["a"].typeOf.number("destination",e),e===r.FRAGMENT||e===r.BOTH}};t["a"]=Object.freeze(r)},"19c1":function(e,t,i){"use strict";var n=i("c937"),r=i("21b7"),o=i("8f7d"),a=i("b3ce");function s(e){this._context=e,this._shaders={},this._numberOfShaders=0,this._shadersToRelease={}}function c(e,t){const i=t.derivedKeywords,n=i.length;for(let r=0;r<n;++r){const n=i[r]+t.keyword,o=e._shaders[n];c(e,o)}delete e._shaders[t.keyword],t.shaderProgram.finalDestroy()}Object.defineProperties(s.prototype,{numberOfShaders:{get:function(){return this._numberOfShaders}}}),s.prototype.replaceShaderProgram=function(e){return Object(n["a"])(e.shaderProgram)&&e.shaderProgram.destroy(),this.getShaderProgram(e)},s.prototype.getShaderProgram=function(e){let t=e.vertexShaderSource,i=e.fragmentShaderSource;const r=e.attributeLocations;"string"===typeof t&&(t=new a["a"]({sources:[t]})),"string"===typeof i&&(i=new a["a"]({sources:[i]}));const s=t.createCombinedVertexShader(this._context),c=i.createCombinedFragmentShader(this._context),u=s+c+JSON.stringify(r);let h;if(Object(n["a"])(this._shaders[u]))h=this._shaders[u],delete this._shadersToRelease[u];else{const e=this._context,n=new o["a"]({gl:e._gl,logShaderCompilation:e.logShaderCompilation,debugShaders:e.debugShaders,vertexShaderSource:t,vertexShaderText:s,fragmentShaderSource:i,fragmentShaderText:c,attributeLocations:r});h={cache:this,shaderProgram:n,keyword:u,derivedKeywords:[],count:0},n._cachedShader=h,this._shaders[u]=h,++this._numberOfShaders}return++h.count,h.shaderProgram},s.prototype.replaceDerivedShaderProgram=function(e,t,i){const r=e._cachedShader,o=t+r.keyword,a=this._shaders[o];if(Object(n["a"])(a)){c(this,a);const e=r.derivedKeywords.indexOf(t);e>-1&&r.derivedKeywords.splice(e,1)}return this.createDerivedShaderProgram(e,t,i)},s.prototype.getDerivedShaderProgram=function(e,t){const i=e._cachedShader,r=t+i.keyword,o=this._shaders[r];if(Object(n["a"])(o))return o.shaderProgram},s.prototype.createDerivedShaderProgram=function(e,t,i){const n=e._cachedShader,r=t+n.keyword;let s=i.vertexShaderSource,c=i.fragmentShaderSource;const u=i.attributeLocations;"string"===typeof s&&(s=new a["a"]({sources:[s]})),"string"===typeof c&&(c=new a["a"]({sources:[c]}));const h=this._context,l=s.createCombinedVertexShader(h),f=c.createCombinedFragmentShader(h),_=new o["a"]({gl:h._gl,logShaderCompilation:h.logShaderCompilation,debugShaders:h.debugShaders,vertexShaderSource:s,vertexShaderText:l,fragmentShaderSource:c,fragmentShaderText:f,attributeLocations:u}),m={cache:this,shaderProgram:_,keyword:r,derivedKeywords:[],count:0};return n.derivedKeywords.push(t),_._cachedShader=m,this._shaders[r]=m,_},s.prototype.destroyReleasedShaderPrograms=function(){const e=this._shadersToRelease;for(const t in e)if(e.hasOwnProperty(t)){const i=e[t];c(this,i),--this._numberOfShaders}this._shadersToRelease={}},s.prototype.releaseShaderProgram=function(e){if(Object(n["a"])(e)){const t=e._cachedShader;t&&0===--t.count&&(this._shadersToRelease[t.keyword]=t)}},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){const e=this._shaders;for(const t in e)e.hasOwnProperty(t)&&e[t].shaderProgram.finalDestroy();return Object(r["a"])(this)},t["a"]=s},"1a75":function(e,t,i){"use strict";var n=i("85b2"),r=i("ae9b"),o=i("0b4a"),a=i("1a5d"),s=i("c937"),c=i("21b7"),u=i("e2a6"),h=i("b8b5"),l=i("0238"),f=i("2341"),_=i("999a"),m=i("1494"),p=i("4d68"),d=i("50de"),g=i("518b");function v(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT),r["a"].defined("options.context",e.context);const t=e.context;let i=e.width,c=e.height;const h=e.source;Object(s["a"])(h)&&(Object(s["a"])(i)||(i=Object(a["a"])(h.videoWidth,h.width)),Object(s["a"])(c)||(c=Object(a["a"])(h.videoHeight,h.height)));const _=Object(a["a"])(e.pixelFormat,l["a"].RGBA),d=Object(a["a"])(e.pixelDatatype,m["a"].UNSIGNED_BYTE),g=l["a"].toInternalFormat(_,d,t),v=l["a"].isCompressedFormat(g);if(!Object(s["a"])(i)||!Object(s["a"])(c))throw new u["a"]("options requires a source field to create an initialized texture or width and height fields to create a blank texture.");if(r["a"].typeOf.number.greaterThan("width",i,0),i>f["a"].maximumTextureSize)throw new u["a"](`Width must be less than or equal to the maximum texture size (${f["a"].maximumTextureSize}).  Check maximumTextureSize.`);if(r["a"].typeOf.number.greaterThan("height",c,0),c>f["a"].maximumTextureSize)throw new u["a"](`Height must be less than or equal to the maximum texture size (${f["a"].maximumTextureSize}).  Check maximumTextureSize.`);if(!l["a"].validate(_))throw new u["a"]("Invalid options.pixelFormat.");if(!v&&!m["a"].validate(d))throw new u["a"]("Invalid options.pixelDatatype.");if(_===l["a"].DEPTH_COMPONENT&&d!==m["a"].UNSIGNED_SHORT&&d!==m["a"].UNSIGNED_INT)throw new u["a"]("When options.pixelFormat is DEPTH_COMPONENT, options.pixelDatatype must be UNSIGNED_SHORT or UNSIGNED_INT.");if(_===l["a"].DEPTH_STENCIL&&d!==m["a"].UNSIGNED_INT_24_8)throw new u["a"]("When options.pixelFormat is DEPTH_STENCIL, options.pixelDatatype must be UNSIGNED_INT_24_8.");if(d===m["a"].FLOAT&&!t.floatingPointTexture)throw new u["a"]("When options.pixelDatatype is FLOAT, this WebGL implementation must support the OES_texture_float extension.  Check context.floatingPointTexture.");if(d===m["a"].HALF_FLOAT&&!t.halfFloatingPointTexture)throw new u["a"]("When options.pixelDatatype is HALF_FLOAT, this WebGL implementation must support the OES_texture_half_float extension. Check context.halfFloatingPointTexture.");if(l["a"].isDepthFormat(_)){if(Object(s["a"])(h))throw new u["a"]("When options.pixelFormat is DEPTH_COMPONENT or DEPTH_STENCIL, source cannot be provided.");if(!t.depthTexture)throw new u["a"]("When options.pixelFormat is DEPTH_COMPONENT or DEPTH_STENCIL, this WebGL implementation must support WEBGL_depth_texture.  Check context.depthTexture.")}if(v){if(!Object(s["a"])(h)||!Object(s["a"])(h.arrayBufferView))throw new u["a"]("When options.pixelFormat is compressed, options.source.arrayBufferView must be defined.");if(l["a"].isDXTFormat(g)&&!t.s3tc)throw new u["a"]("When options.pixelFormat is S3TC compressed, this WebGL implementation must support the WEBGL_compressed_texture_s3tc extension. Check context.s3tc.");if(l["a"].isPVRTCFormat(g)&&!t.pvrtc)throw new u["a"]("When options.pixelFormat is PVRTC compressed, this WebGL implementation must support the WEBGL_compressed_texture_pvrtc extension. Check context.pvrtc.");if(l["a"].isASTCFormat(g)&&!t.astc)throw new u["a"]("When options.pixelFormat is ASTC compressed, this WebGL implementation must support the WEBGL_compressed_texture_astc extension. Check context.astc.");if(l["a"].isETC2Format(g)&&!t.etc)throw new u["a"]("When options.pixelFormat is ETC2 compressed, this WebGL implementation must support the WEBGL_compressed_texture_etc extension. Check context.etc.");if(l["a"].isETC1Format(g)&&!t.etc1)throw new u["a"]("When options.pixelFormat is ETC1 compressed, this WebGL implementation must support the WEBGL_compressed_texture_etc1 extension. Check context.etc1.");if(l["a"].isBC7Format(g)&&!t.bc7)throw new u["a"]("When options.pixelFormat is BC7 compressed, this WebGL implementation must support the EXT_texture_compression_bptc extension. Check context.bc7.");if(l["a"].compressedTextureSizeInBytes(g,i,c)!==h.arrayBufferView.byteLength)throw new u["a"]("The byte length of the array buffer is invalid for the compressed texture with the given width and height.")}const y=e.preMultiplyAlpha||_===l["a"].RGB||_===l["a"].LUMINANCE,w=Object(a["a"])(e.flipY,!0),x=Object(a["a"])(e.skipColorSpaceConversion,!1);let b=!0;const O=t._gl,D=O.TEXTURE_2D,T=O.createTexture();O.activeTexture(O.TEXTURE0),O.bindTexture(D,T);let P,E=4;if(Object(s["a"])(h)&&Object(s["a"])(h.arrayBufferView)&&!v&&(E=l["a"].alignmentInBytes(_,d,i)),O.pixelStorei(O.UNPACK_ALIGNMENT,E),x?O.pixelStorei(O.UNPACK_COLORSPACE_CONVERSION_WEBGL,O.NONE):O.pixelStorei(O.UNPACK_COLORSPACE_CONVERSION_WEBGL,O.BROWSER_DEFAULT_WEBGL),Object(s["a"])(h))if(Object(s["a"])(h.arrayBufferView)){O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,!1);let e,n,r,o=h.arrayBufferView;if(v){if(O.compressedTexImage2D(D,0,g,i,c,0,o),Object(s["a"])(h.mipLevels))for(n=i,r=c,e=0;e<h.mipLevels.length;++e)n=0|Math.floor(n/2),n<1&&(n=1),r=0|Math.floor(r/2),r<1&&(r=1),O.compressedTexImage2D(D,e+1,g,n,r,0,h.mipLevels[e])}else if(w&&(o=l["a"].flipY(o,_,d,i,c)),O.texImage2D(D,0,g,i,c,0,_,m["a"].toWebGLConstant(d,t),o),Object(s["a"])(h.mipLevels))for(n=i,r=c,e=0;e<h.mipLevels.length;++e)n=0|Math.floor(n/2),n<1&&(n=1),r=0|Math.floor(r/2),r<1&&(r=1),O.texImage2D(D,e+1,g,n,r,0,_,m["a"].toWebGLConstant(d,t),h.mipLevels[e])}else Object(s["a"])(h.framebuffer)?(O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,!1),h.framebuffer!==t.defaultFramebuffer&&h.framebuffer._bind(),O.copyTexImage2D(D,0,g,h.xOffset,h.yOffset,i,c,0),h.framebuffer!==t.defaultFramebuffer&&h.framebuffer._unBind()):(O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,y),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,w),O.texImage2D(D,0,g,_,m["a"].toWebGLConstant(d,t),h));else O.texImage2D(D,0,g,i,c,0,_,m["a"].toWebGLConstant(d,t),null),b=!1;O.bindTexture(D,null),P=v?l["a"].compressedTextureSizeInBytes(_,i,c):l["a"].textureSizeInBytes(_,d,i,c),this._id=Object(o["a"])(),this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=D,this._texture=T,this._internalFormat=g,this._pixelFormat=_,this._pixelDatatype=d,this._width=i,this._height=c,this._dimensions=new n["a"](i,c),this._hasMipmap=!1,this._sizeInBytes=P,this._preMultiplyAlpha=y,this._flipY=w,this._initialized=b,this._sampler=void 0,this.sampler=Object(s["a"])(e.sampler)?e.sampler:new p["a"]}v.create=function(e){return new v(e)},v.fromFramebuffer=function(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT),r["a"].defined("options.context",e.context);const t=e.context,i=t._gl,n=Object(a["a"])(e.pixelFormat,l["a"].RGB),o=Object(a["a"])(e.framebufferXOffset,0),c=Object(a["a"])(e.framebufferYOffset,0),h=Object(a["a"])(e.width,i.drawingBufferWidth),f=Object(a["a"])(e.height,i.drawingBufferHeight),_=e.framebuffer;if(!l["a"].validate(n))throw new u["a"]("Invalid pixelFormat.");if(l["a"].isDepthFormat(n)||l["a"].isCompressedFormat(n))throw new u["a"]("pixelFormat cannot be DEPTH_COMPONENT, DEPTH_STENCIL or a compressed format.");if(r["a"].defined("options.context",e.context),r["a"].typeOf.number.greaterThanOrEquals("framebufferXOffset",o,0),r["a"].typeOf.number.greaterThanOrEquals("framebufferYOffset",c,0),o+h>i.drawingBufferWidth)throw new u["a"]("framebufferXOffset + width must be less than or equal to drawingBufferWidth");if(c+f>i.drawingBufferHeight)throw new u["a"]("framebufferYOffset + height must be less than or equal to drawingBufferHeight.");const m=new v({context:t,width:h,height:f,pixelFormat:n,source:{framebuffer:Object(s["a"])(_)?_:t.defaultFramebuffer,xOffset:o,yOffset:c,width:h,height:f}});return m},Object.defineProperties(v.prototype,{id:{get:function(){return this._id}},sampler:{get:function(){return this._sampler},set:function(e){let t=e.minificationFilter,i=e.magnificationFilter;const n=this._context,r=this._pixelFormat,o=this._pixelDatatype,a=t===g["a"].NEAREST_MIPMAP_NEAREST||t===g["a"].NEAREST_MIPMAP_LINEAR||t===g["a"].LINEAR_MIPMAP_NEAREST||t===g["a"].LINEAR_MIPMAP_LINEAR;(o===m["a"].FLOAT&&!n.textureFloatLinear||o===m["a"].HALF_FLOAT&&!n.textureHalfFloatLinear)&&(t=a?g["a"].NEAREST_MIPMAP_NEAREST:g["a"].NEAREST,i=d["a"].NEAREST),n.webgl2&&l["a"].isDepthFormat(r)&&(t=g["a"].NEAREST,i=d["a"].NEAREST);const c=n._gl,u=this._textureTarget;c.activeTexture(c.TEXTURE0),c.bindTexture(u,this._texture),c.texParameteri(u,c.TEXTURE_MIN_FILTER,t),c.texParameteri(u,c.TEXTURE_MAG_FILTER,i),c.texParameteri(u,c.TEXTURE_WRAP_S,e.wrapS),c.texParameteri(u,c.TEXTURE_WRAP_T,e.wrapT),Object(s["a"])(this._textureFilterAnisotropic)&&c.texParameteri(u,this._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.maximumAnisotropy),c.bindTexture(u,null),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},dimensions:{get:function(){return this._dimensions}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(4*this._sizeInBytes/3):this._sizeInBytes}},_target:{get:function(){return this._textureTarget}}}),v.prototype.copyFrom=function(e){r["a"].defined("options",e);const t=Object(a["a"])(e.xOffset,0),i=Object(a["a"])(e.yOffset,0);if(r["a"].defined("options.source",e.source),l["a"].isDepthFormat(this._pixelFormat))throw new u["a"]("Cannot call copyFrom when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.");if(l["a"].isCompressedFormat(this._pixelFormat))throw new u["a"]("Cannot call copyFrom with a compressed texture pixel format.");r["a"].typeOf.number.greaterThanOrEquals("xOffset",t,0),r["a"].typeOf.number.greaterThanOrEquals("yOffset",i,0),r["a"].typeOf.number.lessThanOrEquals("xOffset + options.source.width",t+e.source.width,this._width),r["a"].typeOf.number.lessThanOrEquals("yOffset + options.source.height",i+e.source.height,this._height);const n=e.source,o=this._context,c=o._gl,h=this._textureTarget;c.activeTexture(c.TEXTURE0),c.bindTexture(h,this._texture);const f=n.width,_=n.height;let p=n.arrayBufferView;const d=this._width,g=this._height,v=this._internalFormat,y=this._pixelFormat,w=this._pixelDatatype,x=this._preMultiplyAlpha,b=this._flipY,O=Object(a["a"])(e.skipColorSpaceConversion,!1);let D=4;Object(s["a"])(p)&&(D=l["a"].alignmentInBytes(y,w,f)),c.pixelStorei(c.UNPACK_ALIGNMENT,D),O?c.pixelStorei(c.UNPACK_COLORSPACE_CONVERSION_WEBGL,c.NONE):c.pixelStorei(c.UNPACK_COLORSPACE_CONVERSION_WEBGL,c.BROWSER_DEFAULT_WEBGL);let T=!1;if(!this._initialized){if(0===t&&0===i&&f===d&&_===g)Object(s["a"])(p)?(c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1),b&&(p=l["a"].flipY(p,y,w,d,g)),c.texImage2D(h,0,v,d,g,0,y,m["a"].toWebGLConstant(w,o),p)):(c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,b),c.texImage2D(h,0,v,y,m["a"].toWebGLConstant(w,o),n)),T=!0;else{c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);const e=l["a"].createTypedArray(y,w,d,g);c.texImage2D(h,0,v,d,g,0,y,m["a"].toWebGLConstant(w,o),e)}this._initialized=!0}T||(Object(s["a"])(p)?(c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1),b&&(p=l["a"].flipY(p,y,w,f,_)),c.texSubImage2D(h,0,t,i,f,_,y,m["a"].toWebGLConstant(w,o),p)):(c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,b),c.texSubImage2D(h,0,t,i,y,m["a"].toWebGLConstant(w,o),n))),c.bindTexture(h,null)},v.prototype.copyFromFramebuffer=function(e,t,i,n,o,s){if(e=Object(a["a"])(e,0),t=Object(a["a"])(t,0),i=Object(a["a"])(i,0),n=Object(a["a"])(n,0),o=Object(a["a"])(o,this._width),s=Object(a["a"])(s,this._height),l["a"].isDepthFormat(this._pixelFormat))throw new u["a"]("Cannot call copyFromFramebuffer when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.");if(this._pixelDatatype===m["a"].FLOAT)throw new u["a"]("Cannot call copyFromFramebuffer when the texture pixel data type is FLOAT.");if(this._pixelDatatype===m["a"].HALF_FLOAT)throw new u["a"]("Cannot call copyFromFramebuffer when the texture pixel data type is HALF_FLOAT.");if(l["a"].isCompressedFormat(this._pixelFormat))throw new u["a"]("Cannot call copyFrom with a compressed texture pixel format.");r["a"].typeOf.number.greaterThanOrEquals("xOffset",e,0),r["a"].typeOf.number.greaterThanOrEquals("yOffset",t,0),r["a"].typeOf.number.greaterThanOrEquals("framebufferXOffset",i,0),r["a"].typeOf.number.greaterThanOrEquals("framebufferYOffset",n,0),r["a"].typeOf.number.lessThanOrEquals("xOffset + width",e+o,this._width),r["a"].typeOf.number.lessThanOrEquals("yOffset + height",t+s,this._height);const c=this._context._gl,h=this._textureTarget;c.activeTexture(c.TEXTURE0),c.bindTexture(h,this._texture),c.copyTexSubImage2D(h,0,e,t,i,n,o,s),c.bindTexture(h,null),this._initialized=!0},v.prototype.generateMipmap=function(e){if(e=Object(a["a"])(e,_["a"].DONT_CARE),l["a"].isDepthFormat(this._pixelFormat))throw new u["a"]("Cannot call generateMipmap when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.");if(l["a"].isCompressedFormat(this._pixelFormat))throw new u["a"]("Cannot call generateMipmap with a compressed pixel format.");if(this._width>1&&!h["a"].isPowerOfTwo(this._width))throw new u["a"]("width must be a power of two to call generateMipmap().");if(this._height>1&&!h["a"].isPowerOfTwo(this._height))throw new u["a"]("height must be a power of two to call generateMipmap().");if(!_["a"].validate(e))throw new u["a"]("hint is invalid.");this._hasMipmap=!0;const t=this._context._gl,i=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(i,this._texture),t.generateMipmap(i),t.bindTexture(i,null)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),Object(c["a"])(this)},t["a"]=v},2105:function(e,t,i){"use strict";function n(e){if("object"!==typeof e||null===e)return e;let t;const i=Object.keys(e);for(let r=0;r<i.length;r++)t=i[r],e.hasOwnProperty(t)&&"_applyFunctions"!==t&&(e[t]=n(e[t]));return Object.freeze(e)}t["a"]=n},2189:function(e,t,i){"use strict";var n=i("cedf");const r={CLAMP_TO_EDGE:n["a"].CLAMP_TO_EDGE,REPEAT:n["a"].REPEAT,MIRRORED_REPEAT:n["a"].MIRRORED_REPEAT,validate:function(e){return e===r.CLAMP_TO_EDGE||e===r.REPEAT||e===r.MIRRORED_REPEAT}};t["a"]=Object.freeze(r)},"28ea":function(e,t,i){"use strict";var n=i("ae9b"),r=i("c937"),o=i("e2a6"),a=i("9f38"),s=i("ef87");function c(e,t,i){if(n["a"].defined("context",e),!Object(r["a"])(t)||!Object(r["a"])(t.positiveX)||!Object(r["a"])(t.negativeX)||!Object(r["a"])(t.positiveY)||!Object(r["a"])(t.negativeY)||!Object(r["a"])(t.positiveZ)||!Object(r["a"])(t.negativeZ))throw new o["a"]("urls is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");const c={flipY:!0,skipColorSpaceConversion:i,preferImageBitmap:!0},u=[a["a"].createIfNeeded(t.positiveX).fetchImage(c),a["a"].createIfNeeded(t.negativeX).fetchImage(c),a["a"].createIfNeeded(t.positiveY).fetchImage(c),a["a"].createIfNeeded(t.negativeY).fetchImage(c),a["a"].createIfNeeded(t.positiveZ).fetchImage(c),a["a"].createIfNeeded(t.negativeZ).fetchImage(c)];return Promise.all(u).then((function(t){return new s["a"]({context:e,source:{positiveX:t[0],negativeX:t[1],positiveY:t[2],negativeY:t[3],positiveZ:t[4],negativeZ:t[5]}})}))}t["a"]=c},"31bb":function(e,t,i){"use strict";var n=i("c937"),r=i("e2a6");function o(e,t){const i=/#define OUTPUT_DECLARATION/,n=e.split("\n");if(/#version 300 es/g.test(e))return e;let o,s,_=-1;for(o=0;o<n.length;++o)if(s=n[o],i.test(s)){_=o;break}if(-1===_)throw new r["a"]("Could not find a #define OUTPUT_DECLARATION!");const m=[];for(o=0;o<10;o++){const t=`gl_FragData\\[${o}\\]`,i="czm_out"+o,r=new RegExp(t,"g");r.test(e)&&(h(i,m),a(t,i,n),n.splice(_,0,`layout(location = ${o}) out vec4 ${i};`),_+=1)}const p="czm_fragColor";c("gl_FragColor",n)&&(h(p,m),a("gl_FragColor",p,n),n.splice(_,0,"layout(location = 0) out vec4 czm_fragColor;"),_+=1);const d=l(m,n),g={};for(o=0;o<n.length;o++){s=n[o];for(const e in d)if(d.hasOwnProperty(e)){const t=new RegExp(`(layout)[^]+(out)[^]+(${e})[^]+`,"g");t.test(s)&&(g[s]=e)}}for(const r in g)if(g.hasOwnProperty(r)){const e=g[r];let t=n.indexOf(r);const i=d[e],o=i.length;for(let r=0;r<o;r++)n.splice(t,0,i[r]);t+=o+1;for(let r=o-1;r>=0;r--)n.splice(t,0,"#endif //"+i[r])}const v="WEBGL_2",y="#define "+v,w="#version 300 es";let x=!1;for(o=0;o<n.length;o++)if(/#version/.test(n[o])){n[o]=w,x=!0;break}return x||n.splice(0,0,w),n.splice(1,0,y),f("EXT_draw_buffers",v,n),f("EXT_frag_depth",v,n),f("OES_standard_derivatives",v,n),a("texture2D","texture",n),a("texture3D","texture",n),a("textureCube","texture",n),a("gl_FragDepthEXT","gl_FragDepth",n),t?a("varying","in",n):(a("attribute","in",n),a("varying","out",n)),u(n)}function a(e,t,i){const n=`(^|[^\\w])(${e})($|[^\\w])`,r=new RegExp(n,"g"),o=i.length;for(let a=0;a<o;++a){const e=i[a];i[a]=e.replace(r,`$1${t}$3`)}}function s(e,t,i){const n=i.length;for(let r=0;r<n;++r){const n=i[r];i[r]=n.replace(e,t)}}function c(e,t){const i=`(^|[^\\w])(${e})($|[^\\w])`,n=new RegExp(i,"g"),r=t.length;for(let o=0;o<r;++o){const e=t[o];if(n.test(e))return!0}return!1}function u(e){let t="";const i=e.length;for(let n=0;n<i;++n)t+=e[n]+"\n";return t}function h(e,t){-1===t.indexOf(e)&&t.push(e)}function l(e,t){const i={},r=e.length,o=[];for(let a=0;a<t.length;++a){const s=t[a],c=/(#ifdef|#if)/g.test(s),u=/#else/g.test(s),h=/#endif/g.test(s);if(c)o.push(s);else if(u){const e=o[o.length-1];let t=e.replace("ifdef","ifndef");/if/g.test(t)&&(t=t.replace(/(#if\s+)(\S*)([^]*)/,"$1!($2)$3")),o.pop(),o.push(t)}else if(h)o.pop();else if(!/layout/g.test(s))for(let t=0;t<r;++t){const r=e[t];-1!==s.indexOf(r)&&(Object(n["a"])(i[r])?i[r]=i[r].filter((function(e){return o.indexOf(e)>=0})):i[r]=o.slice())}}return i}function f(e,t,i){const n=`#extension\\s+GL_${e}\\s+:\\s+[a-zA-Z0-9]+\\s*$`;s(new RegExp(n,"g"),"",i),a("GL_"+e,t,i)}t["a"]=o},"3cc5":function(e,t,i){"use strict";function n(e){this.name=e,this.fields=[]}i.d(t,"a",(function(){return n})),n.prototype.addField=function(e,t){const i=`    ${e} ${t};`;this.fields.push(i)},n.prototype.generateGlslLines=function(){let e=this.fields;return 0===e.length&&(e=["    float _empty;"]),[].concat("struct "+this.name,"{",e,"};")}},"43b9":function(e,t,i){"use strict";var n=i("6af0"),r=i("85b2"),o=i("dde0"),a=i("6b82"),s=i("8d54"),c=i("4051"),u=i("1a5d"),h=i("c937"),l=i("44c1"),f=i("e107"),_=i("d809"),m=i("b8b5"),p=i("d767"),d=i("722e"),g=i("ec1a"),v=i("eb88"),y=i("6f7c"),w=i("dc6c"),x=i("3639");function b(){this.globeDepthTexture=void 0,this.gamma=void 0,this._viewport=new n["a"],this._viewportCartesian4=new a["a"],this._viewportDirty=!1,this._viewportOrthographicMatrix=d["a"].clone(d["a"].IDENTITY),this._viewportTransformation=d["a"].clone(d["a"].IDENTITY),this._model=d["a"].clone(d["a"].IDENTITY),this._view=d["a"].clone(d["a"].IDENTITY),this._inverseView=d["a"].clone(d["a"].IDENTITY),this._projection=d["a"].clone(d["a"].IDENTITY),this._infiniteProjection=d["a"].clone(d["a"].IDENTITY),this._entireFrustum=new r["a"],this._currentFrustum=new r["a"],this._frustumPlanes=new a["a"],this._farDepthFromNearPlusOne=void 0,this._log2FarDepthFromNearPlusOne=void 0,this._oneOverLog2FarDepthFromNearPlusOne=void 0,this._frameState=void 0,this._temeToPseudoFixed=p["a"].clone(d["a"].IDENTITY),this._view3DDirty=!0,this._view3D=new d["a"],this._inverseView3DDirty=!0,this._inverseView3D=new d["a"],this._inverseModelDirty=!0,this._inverseModel=new d["a"],this._inverseTransposeModelDirty=!0,this._inverseTransposeModel=new p["a"],this._viewRotation=new p["a"],this._inverseViewRotation=new p["a"],this._viewRotation3D=new p["a"],this._inverseViewRotation3D=new p["a"],this._inverseProjectionDirty=!0,this._inverseProjection=new d["a"],this._modelViewDirty=!0,this._modelView=new d["a"],this._modelView3DDirty=!0,this._modelView3D=new d["a"],this._modelViewRelativeToEyeDirty=!0,this._modelViewRelativeToEye=new d["a"],this._inverseModelViewDirty=!0,this._inverseModelView=new d["a"],this._inverseModelView3DDirty=!0,this._inverseModelView3D=new d["a"],this._viewProjectionDirty=!0,this._viewProjection=new d["a"],this._inverseViewProjectionDirty=!0,this._inverseViewProjection=new d["a"],this._modelViewProjectionDirty=!0,this._modelViewProjection=new d["a"],this._inverseModelViewProjectionDirty=!0,this._inverseModelViewProjection=new d["a"],this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewProjectionRelativeToEye=new d["a"],this._modelViewInfiniteProjectionDirty=!0,this._modelViewInfiniteProjection=new d["a"],this._normalDirty=!0,this._normal=new p["a"],this._normal3DDirty=!0,this._normal3D=new p["a"],this._inverseNormalDirty=!0,this._inverseNormal=new p["a"],this._inverseNormal3DDirty=!0,this._inverseNormal3D=new p["a"],this._encodedCameraPositionMCDirty=!0,this._encodedCameraPositionMC=new _["a"],this._cameraPosition=new o["a"],this._sunPositionWC=new o["a"],this._sunPositionColumbusView=new o["a"],this._sunDirectionWC=new o["a"],this._sunDirectionEC=new o["a"],this._moonDirectionEC=new o["a"],this._lightDirectionWC=new o["a"],this._lightDirectionEC=new o["a"],this._lightColor=new o["a"],this._lightColorHdr=new o["a"],this._pass=void 0,this._mode=void 0,this._mapProjection=void 0,this._ellipsoid=void 0,this._cameraDirection=new o["a"],this._cameraRight=new o["a"],this._cameraUp=new o["a"],this._frustum2DWidth=0,this._eyeHeight=0,this._eyeHeight2D=new r["a"],this._pixelRatio=1,this._orthographicIn3D=!1,this._backgroundColor=new c["a"],this._brdfLut=void 0,this._environmentMap=void 0,this._sphericalHarmonicCoefficients=void 0,this._specularEnvironmentMaps=void 0,this._specularEnvironmentMapsDimensions=new r["a"],this._specularEnvironmentMapsMaximumLOD=void 0,this._fogDensity=void 0,this._invertClassificationColor=void 0,this._splitPosition=0,this._pixelSizePerMeter=void 0,this._geometricToleranceOverMeter=void 0,this._minimumDisableDepthTestDistance=void 0}function O(e,t){d["a"].clone(t,e._view),d["a"].getMatrix3(t,e._viewRotation),e._view3DDirty=!0,e._inverseView3DDirty=!0,e._modelViewDirty=!0,e._modelView3DDirty=!0,e._modelViewRelativeToEyeDirty=!0,e._inverseModelViewDirty=!0,e._inverseModelView3DDirty=!0,e._viewProjectionDirty=!0,e._inverseViewProjectionDirty=!0,e._modelViewProjectionDirty=!0,e._modelViewProjectionRelativeToEyeDirty=!0,e._modelViewInfiniteProjectionDirty=!0,e._normalDirty=!0,e._inverseNormalDirty=!0,e._normal3DDirty=!0,e._inverseNormal3DDirty=!0}function D(e,t){d["a"].clone(t,e._inverseView),d["a"].getMatrix3(t,e._inverseViewRotation)}function T(e,t){d["a"].clone(t,e._projection),e._inverseProjectionDirty=!0,e._viewProjectionDirty=!0,e._inverseViewProjectionDirty=!0,e._modelViewProjectionDirty=!0,e._modelViewProjectionRelativeToEyeDirty=!0}function P(e,t){d["a"].clone(t,e._infiniteProjection),e._modelViewInfiniteProjectionDirty=!0}function E(e,t){o["a"].clone(t.positionWC,e._cameraPosition),o["a"].clone(t.directionWC,e._cameraDirection),o["a"].clone(t.rightWC,e._cameraRight),o["a"].clone(t.upWC,e._cameraUp);const i=t.positionCartographic;Object(h["a"])(i)?e._eyeHeight=i.height:e._eyeHeight=-e._ellipsoid.maximumRadius,e._encodedCameraPositionMCDirty=!0}Object.defineProperties(b.prototype,{frameState:{get:function(){return this._frameState}},viewport:{get:function(){return this._viewport},set:function(e){if(!n["a"].equals(e,this._viewport)){n["a"].clone(e,this._viewport);const t=this._viewport,i=this._viewportCartesian4;i.x=t.x,i.y=t.y,i.z=t.width,i.w=t.height,this._viewportDirty=!0}}},viewportCartesian4:{get:function(){return this._viewportCartesian4}},viewportOrthographic:{get:function(){return j(this),this._viewportOrthographicMatrix}},viewportTransformation:{get:function(){return j(this),this._viewportTransformation}},model:{get:function(){return this._model},set:function(e){d["a"].clone(e,this._model),this._modelView3DDirty=!0,this._inverseModelView3DDirty=!0,this._inverseModelDirty=!0,this._inverseTransposeModelDirty=!0,this._modelViewDirty=!0,this._inverseModelViewDirty=!0,this._modelViewRelativeToEyeDirty=!0,this._inverseModelViewDirty=!0,this._modelViewProjectionDirty=!0,this._inverseModelViewProjectionDirty=!0,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewInfiniteProjectionDirty=!0,this._normalDirty=!0,this._inverseNormalDirty=!0,this._normal3DDirty=!0,this._inverseNormal3DDirty=!0,this._encodedCameraPositionMCDirty=!0}},inverseModel:{get:function(){return this._inverseModelDirty&&(this._inverseModelDirty=!1,d["a"].inverse(this._model,this._inverseModel)),this._inverseModel}},inverseTransposeModel:{get:function(){const e=this._inverseTransposeModel;return this._inverseTransposeModelDirty&&(this._inverseTransposeModelDirty=!1,d["a"].getMatrix3(this.inverseModel,e),p["a"].transpose(e,e)),e}},view:{get:function(){return this._view}},view3D:{get:function(){return ae(this),this._view3D}},viewRotation:{get:function(){return ae(this),this._viewRotation}},viewRotation3D:{get:function(){return ae(this),this._viewRotation3D}},inverseView:{get:function(){return this._inverseView}},inverseView3D:{get:function(){return se(this),this._inverseView3D}},inverseViewRotation:{get:function(){return this._inverseViewRotation}},inverseViewRotation3D:{get:function(){return se(this),this._inverseViewRotation3D}},projection:{get:function(){return this._projection}},inverseProjection:{get:function(){return M(this),this._inverseProjection}},infiniteProjection:{get:function(){return this._infiniteProjection}},modelView:{get:function(){return N(this),this._modelView}},modelView3D:{get:function(){return B(this),this._modelView3D}},modelViewRelativeToEye:{get:function(){return W(this),this._modelViewRelativeToEye}},inverseModelView:{get:function(){return F(this),this._inverseModelView}},inverseModelView3D:{get:function(){return V(this),this._inverseModelView3D}},viewProjection:{get:function(){return R(this),this._viewProjection}},inverseViewProjection:{get:function(){return z(this),this._inverseViewProjection}},modelViewProjection:{get:function(){return U(this),this._modelViewProjection}},inverseModelViewProjection:{get:function(){return G(this),this._inverseModelViewProjection}},modelViewProjectionRelativeToEye:{get:function(){return H(this),this._modelViewProjectionRelativeToEye}},modelViewInfiniteProjection:{get:function(){return k(this),this._modelViewInfiniteProjection}},normal:{get:function(){return $(this),this._normal}},normal3D:{get:function(){return Y(this),this._normal3D}},inverseNormal:{get:function(){return q(this),this._inverseNormal}},inverseNormal3D:{get:function(){return X(this),this._inverseNormal3D}},entireFrustum:{get:function(){return this._entireFrustum}},currentFrustum:{get:function(){return this._currentFrustum}},frustumPlanes:{get:function(){return this._frustumPlanes}},farDepthFromNearPlusOne:{get:function(){return this._farDepthFromNearPlusOne}},log2FarDepthFromNearPlusOne:{get:function(){return this._log2FarDepthFromNearPlusOne}},oneOverLog2FarDepthFromNearPlusOne:{get:function(){return this._oneOverLog2FarDepthFromNearPlusOne}},eyeHeight:{get:function(){return this._eyeHeight}},eyeHeight2D:{get:function(){return this._eyeHeight2D}},sunPositionWC:{get:function(){return this._sunPositionWC}},sunPositionColumbusView:{get:function(){return this._sunPositionColumbusView}},sunDirectionWC:{get:function(){return this._sunDirectionWC}},sunDirectionEC:{get:function(){return this._sunDirectionEC}},moonDirectionEC:{get:function(){return this._moonDirectionEC}},lightDirectionWC:{get:function(){return this._lightDirectionWC}},lightDirectionEC:{get:function(){return this._lightDirectionEC}},lightColor:{get:function(){return this._lightColor}},lightColorHdr:{get:function(){return this._lightColorHdr}},encodedCameraPositionMCHigh:{get:function(){return J(this),this._encodedCameraPositionMC.high}},encodedCameraPositionMCLow:{get:function(){return J(this),this._encodedCameraPositionMC.low}},temeToPseudoFixedMatrix:{get:function(){return this._temeToPseudoFixed}},pixelRatio:{get:function(){return this._pixelRatio}},fogDensity:{get:function(){return this._fogDensity}},geometricToleranceOverMeter:{get:function(){return this._geometricToleranceOverMeter}},pass:{get:function(){return this._pass}},backgroundColor:{get:function(){return this._backgroundColor}},brdfLut:{get:function(){return this._brdfLut}},environmentMap:{get:function(){return this._environmentMap}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps}},specularEnvironmentMapsDimensions:{get:function(){return this._specularEnvironmentMapsDimensions}},specularEnvironmentMapsMaximumLOD:{get:function(){return this._specularEnvironmentMapsMaximumLOD}},imagerySplitPosition:{get:function(){return Object(l["a"])("UniformState.imagerySplitPosition","czm_imagerySplitPosition has been deprecated in Cesium 1.92. It will be removed in Cesium 1.94. Use czm_splitPosition instead."),this._splitPosition}},splitPosition:{get:function(){return this._splitPosition}},minimumDisableDepthTestDistance:{get:function(){return this._minimumDisableDepthTestDistance}},invertClassificationColor:{get:function(){return this._invertClassificationColor}},orthographicIn3D:{get:function(){return this._orthographicIn3D}},ellipsoid:{get:function(){return Object(u["a"])(this._ellipsoid,f["a"].WGS84)}}});let A=new p["a"];const S=new s["a"];function C(e,t){Object(h["a"])(y["a"].computeIcrfToFixedMatrix(t.time,A))||(A=y["a"].computeTemeToPseudoFixedMatrix(t.time,A));let i=v["a"].computeSunPositionInEarthInertialFrame(t.time,e._sunPositionWC);p["a"].multiplyByVector(A,i,i),o["a"].normalize(i,e._sunDirectionWC),i=p["a"].multiplyByVector(e.viewRotation3D,i,e._sunDirectionEC),o["a"].normalize(i,i),i=v["a"].computeMoonPositionInEarthInertialFrame(t.time,e._moonDirectionEC),p["a"].multiplyByVector(A,i,i),p["a"].multiplyByVector(e.viewRotation3D,i,i),o["a"].normalize(i,i);const n=t.mapProjection,r=n.ellipsoid,a=r.cartesianToCartographic(e._sunPositionWC,S);n.project(a,e._sunPositionColumbusView)}b.prototype.updateCamera=function(e){O(this,e.viewMatrix),D(this,e.inverseViewMatrix),E(this,e),this._entireFrustum.x=e.frustum.near,this._entireFrustum.y=e.frustum.far,this.updateFrustum(e.frustum),this._orthographicIn3D=this._mode!==w["a"].SCENE2D&&e.frustum instanceof g["a"]},b.prototype.updateFrustum=function(e){T(this,e.projectionMatrix),Object(h["a"])(e.infiniteProjectionMatrix)&&P(this,e.infiniteProjectionMatrix),this._currentFrustum.x=e.near,this._currentFrustum.y=e.far,this._farDepthFromNearPlusOne=e.far-e.near+1,this._log2FarDepthFromNearPlusOne=m["a"].log2(this._farDepthFromNearPlusOne),this._oneOverLog2FarDepthFromNearPlusOne=1/this._log2FarDepthFromNearPlusOne,Object(h["a"])(e._offCenterFrustum)&&(e=e._offCenterFrustum),this._frustumPlanes.x=e.top,this._frustumPlanes.y=e.bottom,this._frustumPlanes.z=e.left,this._frustumPlanes.w=e.right},b.prototype.updatePass=function(e){this._pass=e};const I=[],L=new x["a"];function j(e){if(e._viewportDirty){const t=e._viewport;d["a"].computeOrthographicOffCenter(t.x,t.x+t.width,t.y,t.y+t.height,0,1,e._viewportOrthographicMatrix),d["a"].computeViewportTransformation(t,0,1,e._viewportTransformation),e._viewportDirty=!1}}function M(e){e._inverseProjectionDirty&&(e._inverseProjectionDirty=!1,e._mode===w["a"].SCENE2D||e._mode===w["a"].MORPHING||e._orthographicIn3D?d["a"].clone(d["a"].ZERO,e._inverseProjection):d["a"].inverse(e._projection,e._inverseProjection))}function N(e){e._modelViewDirty&&(e._modelViewDirty=!1,d["a"].multiplyTransformation(e._view,e._model,e._modelView))}function B(e){e._modelView3DDirty&&(e._modelView3DDirty=!1,d["a"].multiplyTransformation(e.view3D,e._model,e._modelView3D))}function F(e){e._inverseModelViewDirty&&(e._inverseModelViewDirty=!1,d["a"].inverse(e.modelView,e._inverseModelView))}function V(e){e._inverseModelView3DDirty&&(e._inverseModelView3DDirty=!1,d["a"].inverse(e.modelView3D,e._inverseModelView3D))}function R(e){e._viewProjectionDirty&&(e._viewProjectionDirty=!1,d["a"].multiply(e._projection,e._view,e._viewProjection))}function z(e){e._inverseViewProjectionDirty&&(e._inverseViewProjectionDirty=!1,d["a"].inverse(e.viewProjection,e._inverseViewProjection))}function U(e){e._modelViewProjectionDirty&&(e._modelViewProjectionDirty=!1,d["a"].multiply(e._projection,e.modelView,e._modelViewProjection))}function W(e){if(e._modelViewRelativeToEyeDirty){e._modelViewRelativeToEyeDirty=!1;const t=e.modelView,i=e._modelViewRelativeToEye;i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=0,i[13]=0,i[14]=0,i[15]=t[15]}}function G(e){e._inverseModelViewProjectionDirty&&(e._inverseModelViewProjectionDirty=!1,d["a"].inverse(e.modelViewProjection,e._inverseModelViewProjection))}function H(e){e._modelViewProjectionRelativeToEyeDirty&&(e._modelViewProjectionRelativeToEyeDirty=!1,d["a"].multiply(e._projection,e.modelViewRelativeToEye,e._modelViewProjectionRelativeToEye))}function k(e){e._modelViewInfiniteProjectionDirty&&(e._modelViewInfiniteProjectionDirty=!1,d["a"].multiply(e._infiniteProjection,e.modelView,e._modelViewInfiniteProjection))}function $(e){if(e._normalDirty){e._normalDirty=!1;const t=e._normal;d["a"].getMatrix3(e.inverseModelView,t),p["a"].getRotation(t,t),p["a"].transpose(t,t)}}function Y(e){if(e._normal3DDirty){e._normal3DDirty=!1;const t=e._normal3D;d["a"].getMatrix3(e.inverseModelView3D,t),p["a"].getRotation(t,t),p["a"].transpose(t,t)}}function q(e){e._inverseNormalDirty&&(e._inverseNormalDirty=!1,d["a"].getMatrix3(e.inverseModelView,e._inverseNormal),p["a"].getRotation(e._inverseNormal,e._inverseNormal))}function X(e){e._inverseNormal3DDirty&&(e._inverseNormal3DDirty=!1,d["a"].getMatrix3(e.inverseModelView3D,e._inverseNormal3D),p["a"].getRotation(e._inverseNormal3D,e._inverseNormal3D))}b.prototype.update=function(e){this._mode=e.mode,this._mapProjection=e.mapProjection,this._ellipsoid=e.mapProjection.ellipsoid,this._pixelRatio=e.pixelRatio;const t=e.camera;this.updateCamera(t),e.mode===w["a"].SCENE2D?(this._frustum2DWidth=t.frustum.right-t.frustum.left,this._eyeHeight2D.x=.5*this._frustum2DWidth,this._eyeHeight2D.y=this._eyeHeight2D.x*this._eyeHeight2D.x):(this._frustum2DWidth=0,this._eyeHeight2D.x=0,this._eyeHeight2D.y=0),C(this,e);const i=Object(u["a"])(e.light,L);i instanceof x["a"]?(this._lightDirectionWC=o["a"].clone(this._sunDirectionWC,this._lightDirectionWC),this._lightDirectionEC=o["a"].clone(this._sunDirectionEC,this._lightDirectionEC)):(this._lightDirectionWC=o["a"].normalize(o["a"].negate(i.direction,this._lightDirectionWC),this._lightDirectionWC),this._lightDirectionEC=p["a"].multiplyByVector(this.viewRotation3D,this._lightDirectionWC,this._lightDirectionEC));const n=i.color;let a=o["a"].fromElements(n.red,n.green,n.blue,this._lightColorHdr);a=o["a"].multiplyByScalar(a,i.intensity,a);const s=o["a"].maximumComponent(a);s>1?o["a"].divideByScalar(a,s,this._lightColor):o["a"].clone(a,this._lightColor);const l=e.brdfLutGenerator,f=Object(h["a"])(l)?l.colorTexture:void 0;this._brdfLut=f,this._environmentMap=Object(u["a"])(e.environmentMap,e.context.defaultCubeMap),this._sphericalHarmonicCoefficients=Object(u["a"])(e.sphericalHarmonicCoefficients,I),this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentMapsMaximumLOD=e.specularEnvironmentMapsMaximumLOD,Object(h["a"])(this._specularEnvironmentMaps)&&r["a"].clone(this._specularEnvironmentMaps.dimensions,this._specularEnvironmentMapsDimensions),this._fogDensity=e.fog.density,this._invertClassificationColor=e.invertClassificationColor,this._frameState=e,this._temeToPseudoFixed=y["a"].computeTemeToPseudoFixedMatrix(e.time,this._temeToPseudoFixed),this._splitPosition=e.splitPosition*e.context.drawingBufferWidth;const _=t.frustum.fov,m=this._viewport;let d;d=Object(h["a"])(_)?m.height>m.width?2*Math.tan(.5*_)/m.height:2*Math.tan(.5*_)/m.width:1/Math.max(m.width,m.height),this._geometricToleranceOverMeter=d*e.maximumScreenSpaceError,c["a"].clone(e.backgroundColor,this._backgroundColor),this._minimumDisableDepthTestDistance=e.minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance*=this._minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance===Number.POSITIVE_INFINITY&&(this._minimumDisableDepthTestDistance=-1)};const K=new o["a"];function J(e){e._encodedCameraPositionMCDirty&&(e._encodedCameraPositionMCDirty=!1,d["a"].multiplyByPoint(e.inverseModel,e._cameraPosition,K),_["a"].fromCartesian(K,e._encodedCameraPositionMC))}const Z=new o["a"],Q=new o["a"],ee=new o["a"],te=new o["a"],ie=new s["a"],ne=new o["a"],re=new d["a"];function oe(e,t,i,n,r,a,s,c){const u=Z;u.x=e.y,u.y=e.z,u.z=e.x;const l=Q;l.x=i.y,l.y=i.z,l.z=i.x;const f=ee;f.x=n.y,f.y=n.z,f.z=n.x;const _=te;_.x=t.y,_.y=t.z,_.z=t.x,a===w["a"].SCENE2D&&(u.z=.5*r);const p=s.unproject(u,ie);p.longitude=m["a"].clamp(p.longitude,-Math.PI,Math.PI),p.latitude=m["a"].clamp(p.latitude,-m["a"].PI_OVER_TWO,m["a"].PI_OVER_TWO);const g=s.ellipsoid,v=g.cartographicToCartesian(p,ne),x=y["a"].eastNorthUpToFixedFrame(v,g,re);return d["a"].multiplyByPointAsVector(x,l,l),d["a"].multiplyByPointAsVector(x,f,f),d["a"].multiplyByPointAsVector(x,_,_),Object(h["a"])(c)||(c=new d["a"]),c[0]=l.x,c[1]=f.x,c[2]=-_.x,c[3]=0,c[4]=l.y,c[5]=f.y,c[6]=-_.y,c[7]=0,c[8]=l.z,c[9]=f.z,c[10]=-_.z,c[11]=0,c[12]=-o["a"].dot(l,v),c[13]=-o["a"].dot(f,v),c[14]=o["a"].dot(_,v),c[15]=1,c}function ae(e){e._view3DDirty&&(e._mode===w["a"].SCENE3D?d["a"].clone(e._view,e._view3D):oe(e._cameraPosition,e._cameraDirection,e._cameraRight,e._cameraUp,e._frustum2DWidth,e._mode,e._mapProjection,e._view3D),d["a"].getMatrix3(e._view3D,e._viewRotation3D),e._view3DDirty=!1)}function se(e){e._inverseView3DDirty&&(d["a"].inverseTransformation(e.view3D,e._inverseView3D),d["a"].getMatrix3(e._inverseView3D,e._inverseViewRotation3D),e._inverseView3DDirty=!1)}t["a"]=b},"4d68":function(e,t,i){"use strict";var n=i("ae9b"),r=i("1a5d"),o=i("c937"),a=i("e2a6"),s=i("50de"),c=i("518b"),u=i("2189");function h(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT);const t=Object(r["a"])(e.wrapS,u["a"].CLAMP_TO_EDGE),i=Object(r["a"])(e.wrapT,u["a"].CLAMP_TO_EDGE),h=Object(r["a"])(e.minificationFilter,c["a"].LINEAR),l=Object(r["a"])(e.magnificationFilter,s["a"].LINEAR),f=Object(o["a"])(e.maximumAnisotropy)?e.maximumAnisotropy:1;if(!u["a"].validate(t))throw new a["a"]("Invalid sampler.wrapS.");if(!u["a"].validate(i))throw new a["a"]("Invalid sampler.wrapT.");if(!c["a"].validate(h))throw new a["a"]("Invalid sampler.minificationFilter.");if(!s["a"].validate(l))throw new a["a"]("Invalid sampler.magnificationFilter.");n["a"].typeOf.number.greaterThanOrEquals("maximumAnisotropy",f,1),this._wrapS=t,this._wrapT=i,this._minificationFilter=h,this._magnificationFilter=l,this._maximumAnisotropy=f}Object.defineProperties(h.prototype,{wrapS:{get:function(){return this._wrapS}},wrapT:{get:function(){return this._wrapT}},minificationFilter:{get:function(){return this._minificationFilter}},magnificationFilter:{get:function(){return this._magnificationFilter}},maximumAnisotropy:{get:function(){return this._maximumAnisotropy}}}),h.equals=function(e,t){return e===t||Object(o["a"])(e)&&Object(o["a"])(t)&&e._wrapS===t._wrapS&&e._wrapT===t._wrapT&&e._minificationFilter===t._minificationFilter&&e._magnificationFilter===t._magnificationFilter&&e._maximumAnisotropy===t._maximumAnisotropy},h.NEAREST=Object.freeze(new h({wrapS:u["a"].CLAMP_TO_EDGE,wrapT:u["a"].CLAMP_TO_EDGE,minificationFilter:c["a"].NEAREST,magnificationFilter:s["a"].NEAREST})),t["a"]=h},"50de":function(e,t,i){"use strict";var n=i("cedf");const r={NEAREST:n["a"].NEAREST,LINEAR:n["a"].LINEAR,validate:function(e){return e===r.NEAREST||e===r.LINEAR}};t["a"]=Object.freeze(r)},"518b":function(e,t,i){"use strict";var n=i("cedf");const r={NEAREST:n["a"].NEAREST,LINEAR:n["a"].LINEAR,NEAREST_MIPMAP_NEAREST:n["a"].NEAREST_MIPMAP_NEAREST,LINEAR_MIPMAP_NEAREST:n["a"].LINEAR_MIPMAP_NEAREST,NEAREST_MIPMAP_LINEAR:n["a"].NEAREST_MIPMAP_LINEAR,LINEAR_MIPMAP_LINEAR:n["a"].LINEAR_MIPMAP_LINEAR,validate:function(e){return e===r.NEAREST||e===r.LINEAR||e===r.NEAREST_MIPMAP_NEAREST||e===r.LINEAR_MIPMAP_NEAREST||e===r.NEAREST_MIPMAP_LINEAR||e===r.LINEAR_MIPMAP_LINEAR}};t["a"]=Object.freeze(r)},6384:function(e,t,i){"use strict";var n=i("ae9b"),r=i("cbf0"),o=i("1a5d"),a=i("c937"),s=i("21b7"),c=i("e2a6"),u=i("b8b5"),h=i("6f54"),l=i("6ba7"),f=i("dc15");function _(e,t,i,s){if(n["a"].defined("context",e),!t||0===t.length)throw new c["a"]("At least one attribute is required.");const u=_._verifyAttributes(t);i=Object(o["a"])(i,0);const h=[],l={};let f,m;const p=u.length;for(let n=0;n<p;++n){const e=u[n];e.vertexBuffer?h.push(e):(m=e.usage,f=l[m],Object(a["a"])(f)||(f=l[m]=[]),f.push(e))}function d(e,t){return r["a"].getSizeInBytes(t.componentDatatype)-r["a"].getSizeInBytes(e.componentDatatype)}for(m in this._allBuffers=[],l)if(l.hasOwnProperty(m)){f=l[m],f.sort(d);const e=_._vertexSizeInBytes(f),t=f[0].usage,i={vertexSizeInBytes:e,vertexBuffer:void 0,usage:t,needsCommit:!1,arrayBuffer:void 0,arrayViews:_._createArrayViews(f,e)};this._allBuffers.push(i)}this._size=0,this._instanced=Object(o["a"])(s,!1),this._precreated=h,this._context=e,this.writers=void 0,this.va=void 0,this.resize(i)}_._verifyAttributes=function(e){const t=[];for(let n=0;n<e.length;++n){const i=e[n],a={index:Object(o["a"])(i.index,n),enabled:Object(o["a"])(i.enabled,!0),componentsPerAttribute:i.componentsPerAttribute,componentDatatype:Object(o["a"])(i.componentDatatype,r["a"].FLOAT),normalize:Object(o["a"])(i.normalize,!1),vertexBuffer:i.vertexBuffer,usage:Object(o["a"])(i.usage,l["a"].STATIC_DRAW)};if(t.push(a),1!==a.componentsPerAttribute&&2!==a.componentsPerAttribute&&3!==a.componentsPerAttribute&&4!==a.componentsPerAttribute)throw new c["a"]("attribute.componentsPerAttribute must be in the range [1, 4].");const s=a.componentDatatype;if(!r["a"].validate(s))throw new c["a"]("Attribute must have a valid componentDatatype or not specify it.");if(!l["a"].validate(a.usage))throw new c["a"]("Attribute must have a valid usage or not specify it.")}const i=new Array(t.length);for(let n=0;n<t.length;++n){const e=t[n],r=e.index;if(i[r])throw new c["a"](`Index ${r} is used by more than one attribute.`);i[r]=!0}return t},_._vertexSizeInBytes=function(e){let t=0;const i=e.length;for(let s=0;s<i;++s){const i=e[s];t+=i.componentsPerAttribute*r["a"].getSizeInBytes(i.componentDatatype)}const n=i>0?r["a"].getSizeInBytes(e[0].componentDatatype):0,o=n>0?t%n:0,a=0===o?0:n-o;return t+=a,t},_._createArrayViews=function(e,t){const i=[];let n=0;const o=e.length;for(let a=0;a<o;++a){const o=e[a],s=o.componentDatatype;i.push({index:o.index,enabled:o.enabled,componentsPerAttribute:o.componentsPerAttribute,componentDatatype:s,normalize:o.normalize,offsetInBytes:n,vertexSizeInComponentType:t/r["a"].getSizeInBytes(s),view:void 0}),n+=o.componentsPerAttribute*r["a"].getSizeInBytes(s)}return i},_.prototype.resize=function(e){this._size=e;const t=this._allBuffers;this.writers=[];for(let i=0,n=t.length;i<n;++i){const e=t[i];_._resize(e,this._size),_._appendWriters(this.writers,e)}g(this)},_._resize=function(e,t){if(e.vertexSizeInBytes>0){const i=new ArrayBuffer(t*e.vertexSizeInBytes);if(Object(a["a"])(e.arrayBuffer)){const t=new Uint8Array(i),n=new Uint8Array(e.arrayBuffer),r=n.length;for(let e=0;e<r;++e)t[e]=n[e]}const n=e.arrayViews,o=n.length;for(let e=0;e<o;++e){const t=n[e];t.view=r["a"].createArrayBufferView(t.componentDatatype,i,t.offsetInBytes)}e.arrayBuffer=i}};const m=[function(e,t,i){return function(n,r){t[n*i]=r,e.needsCommit=!0}},function(e,t,i){return function(n,r,o){const a=n*i;t[a]=r,t[a+1]=o,e.needsCommit=!0}},function(e,t,i){return function(n,r,o,a){const s=n*i;t[s]=r,t[s+1]=o,t[s+2]=a,e.needsCommit=!0}},function(e,t,i){return function(n,r,o,a,s){const c=n*i;t[c]=r,t[c+1]=o,t[c+2]=a,t[c+3]=s,e.needsCommit=!0}}];function p(e,t){if(t.needsCommit&&t.vertexSizeInBytes>0){t.needsCommit=!1;const i=t.vertexBuffer,n=e._size*t.vertexSizeInBytes,r=Object(a["a"])(i);if(!r||i.sizeInBytes<n)return r&&i.destroy(),t.vertexBuffer=h["a"].createVertexBuffer({context:e._context,typedArray:t.arrayBuffer,usage:t.usage}),t.vertexBuffer.vertexArrayDestroyable=!1,!0;t.vertexBuffer.copyFromArrayView(t.arrayBuffer)}return!1}function d(e,t,i){if(e.needsCommit&&e.vertexSizeInBytes>0){const n=e.vertexSizeInBytes*t,r=e.vertexSizeInBytes*i;e.vertexBuffer.copyFromArrayView(new Uint8Array(e.arrayBuffer,n,r),n)}}function g(e){const t=e.va;if(!Object(a["a"])(t))return;const i=t.length;for(let n=0;n<i;++n)t[n].va.destroy();e.va=void 0}_._appendWriters=function(e,t){const i=t.arrayViews,n=i.length;for(let r=0;r<n;++r){const n=i[r];e[n.index]=m[n.componentsPerAttribute-1](t,n.view,n.vertexSizeInComponentType)}},_.prototype.commit=function(e){let t=!1;const i=this._allBuffers;let n,r,o;for(r=0,o=i.length;r<o;++r)n=i[r],t=p(this,n)||t;if(t||!Object(a["a"])(this.va)){g(this);const t=this.va=[],s=u["a"].SIXTY_FOUR_KILOBYTES-4,c=Object(a["a"])(e)&&!this._instanced?Math.ceil(this._size/s):1;for(let a=0;a<c;++a){let u=[];for(r=0,o=i.length;r<o;++r){n=i[r];const e=a*(n.vertexSizeInBytes*s);_._appendAttributes(u,n,e,this._instanced)}u=u.concat(this._precreated),t.push({va:new f["a"]({context:this._context,attributes:u,indexBuffer:e}),indicesCount:1.5*(a!==c-1?s:this._size%s)})}}},_._appendAttributes=function(e,t,i,n){const r=t.arrayViews,o=r.length;for(let a=0;a<o;++a){const o=r[a];e.push({index:o.index,enabled:o.enabled,componentsPerAttribute:o.componentsPerAttribute,componentDatatype:o.componentDatatype,normalize:o.normalize,vertexBuffer:t.vertexBuffer,offsetInBytes:i+o.offsetInBytes,strideInBytes:t.vertexSizeInBytes,instanceDivisor:n?1:0})}},_.prototype.subCommit=function(e,t){if(e<0||e>=this._size)throw new c["a"]("offsetInVertices must be greater than or equal to zero and less than the vertex array size.");if(e+t>this._size)throw new c["a"]("offsetInVertices + lengthInVertices cannot exceed the vertex array size.");const i=this._allBuffers;for(let n=0,r=i.length;n<r;++n)d(i[n],e,t)},_.prototype.endSubCommits=function(){const e=this._allBuffers;for(let t=0,i=e.length;t<i;++t)e[t].needsCommit=!1},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){const e=this._allBuffers;for(let t=0,i=e.length;t<i;++t){const i=e[t];i.vertexBuffer=i.vertexBuffer&&i.vertexBuffer.destroy()}return g(this),Object(s["a"])(this)},t["a"]=_},"7d7f":function(e,t,i){"use strict";i.d(t,"a",(function(){return _}));var n=i("ae9b"),r=i("44e9"),o=i("c937"),a=i("1a5d"),s=i("e2a6"),c=i("1197"),u=i("8f7d"),h=i("b3ce"),l=i("3cc5"),f=i("91fa");function _(){this._positionAttributeLine=void 0,this._nextAttributeLocation=1,this._attributeLocations={},this._attributeLines=[],this._structs={},this._functions={},this._vertexShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[],structIds:[],functionIds:[]},this._fragmentShaderParts={defineLines:[],uniformLines:[],shaderLines:[],varyingLines:[],structIds:[],functionIds:[]}}function m(e){const t=[],i=[];let n,r,o,a,s=e._vertexShaderParts.structIds;for(n=0;n<s.length;n++)r=s[n],o=e._structs[r],a=o.generateGlslLines(),t.push.apply(t,a);for(s=e._fragmentShaderParts.structIds,n=0;n<s.length;n++)r=s[n],o=e._structs[r],a=o.generateGlslLines(),i.push.apply(i,a);return{vertexLines:t,fragmentLines:i}}function p(e){switch(e){case"mat2":return 2;case"mat3":return 3;case"mat4":return 4;default:return 1}}function d(e){const t=[],i=[];let n,r,o,a,s=e._vertexShaderParts.functionIds;for(n=0;n<s.length;n++)r=s[n],o=e._functions[r],a=o.generateGlslLines(),t.push.apply(t,a);for(s=e._fragmentShaderParts.functionIds,n=0;n<s.length;n++)r=s[n],o=e._functions[r],a=o.generateGlslLines(),i.push.apply(i,a);return{vertexLines:t,fragmentLines:i}}Object.defineProperties(_.prototype,{attributeLocations:{get:function(){return this._attributeLocations}}}),_.prototype.addDefine=function(e,t,i){n["a"].typeOf.string("identifier",e),i=Object(a["a"])(i,c["a"].BOTH);let r=e;Object(o["a"])(t)&&(r+=" "+t.toString()),c["a"].includesVertexShader(i)&&this._vertexShaderParts.defineLines.push(r),c["a"].includesFragmentShader(i)&&this._fragmentShaderParts.defineLines.push(r)},_.prototype.addStruct=function(e,t,i){n["a"].typeOf.string("structId",e),n["a"].typeOf.string("structName",t),n["a"].typeOf.number("destination",i),this._structs[e]=new l["a"](t),c["a"].includesVertexShader(i)&&this._vertexShaderParts.structIds.push(e),c["a"].includesFragmentShader(i)&&this._fragmentShaderParts.structIds.push(e)},_.prototype.addStructField=function(e,t,i){n["a"].typeOf.string("structId",e),n["a"].typeOf.string("type",t),n["a"].typeOf.string("identifier",i),this._structs[e].addField(t,i)},_.prototype.addFunction=function(e,t,i){n["a"].typeOf.string("functionName",e),n["a"].typeOf.string("signature",t),n["a"].typeOf.number("destination",i),this._functions[e]=new f["a"](t),c["a"].includesVertexShader(i)&&this._vertexShaderParts.functionIds.push(e),c["a"].includesFragmentShader(i)&&this._fragmentShaderParts.functionIds.push(e)},_.prototype.addFunctionLines=function(e,t){n["a"].typeOf.string("functionName",e),n["a"].typeOf.object("lines",t),this._functions[e].addLines(t)},_.prototype.addUniform=function(e,t,i){n["a"].typeOf.string("type",e),n["a"].typeOf.string("identifier",t),i=Object(a["a"])(i,c["a"].BOTH);const r=`uniform ${e} ${t};`;c["a"].includesVertexShader(i)&&this._vertexShaderParts.uniformLines.push(r),c["a"].includesFragmentShader(i)&&this._fragmentShaderParts.uniformLines.push(r)},_.prototype.setPositionAttribute=function(e,t){if(n["a"].typeOf.string("type",e),n["a"].typeOf.string("identifier",t),Object(o["a"])(this._positionAttributeLine))throw new s["a"]("setPositionAttribute() must be called exactly once for the attribute used for gl_Position. For other attributes, use addAttribute()");return this._positionAttributeLine=`attribute ${e} ${t};`,this._attributeLocations[t]=0,0},_.prototype.addAttribute=function(e,t){n["a"].typeOf.string("type",e),n["a"].typeOf.string("identifier",t);const i=`attribute ${e} ${t};`;this._attributeLines.push(i);const r=this._nextAttributeLocation;return this._attributeLocations[t]=r,this._nextAttributeLocation+=p(e),r},_.prototype.addVarying=function(e,t){n["a"].typeOf.string("type",e),n["a"].typeOf.string("identifier",t);const i=`varying ${e} ${t};`;this._vertexShaderParts.varyingLines.push(i),this._fragmentShaderParts.varyingLines.push(i)},_.prototype.addVertexLines=function(e){n["a"].typeOf.object("lines",e),Array.prototype.push.apply(this._vertexShaderParts.shaderLines,e)},_.prototype.addFragmentLines=function(e){n["a"].typeOf.object("lines",e),Array.prototype.push.apply(this._fragmentShaderParts.shaderLines,e)},_.prototype.buildShaderProgram=function(e){n["a"].typeOf.object("context",e);const t=Object(o["a"])(this._positionAttributeLine)?[this._positionAttributeLine]:[],i=m(this),r=d(this),a=t.concat(this._attributeLines,this._vertexShaderParts.uniformLines,this._vertexShaderParts.varyingLines,i.vertexLines,r.vertexLines,this._vertexShaderParts.shaderLines).join("\n"),s=new h["a"]({defines:this._vertexShaderParts.defineLines,sources:[a]}),c=this._fragmentShaderParts.uniformLines.concat(this._fragmentShaderParts.varyingLines,i.fragmentLines,r.fragmentLines,this._fragmentShaderParts.shaderLines).join("\n"),l=new h["a"]({defines:this._fragmentShaderParts.defineLines,sources:[c]});return u["a"].fromCache({context:e,vertexShaderSource:s,fragmentShaderSource:l,attributeLocations:this._attributeLocations})},_.prototype.clone=function(){return Object(r["a"])(this,!0)}},"8f7d":function(e,t,i){"use strict";var n=i("ae9b"),r=i("1a5d"),o=i("c937"),a=i("21b7"),s=i("e2a6"),c=i("e2aa"),u=i("3366"),h=i("2341"),l=i("9f4f"),f=i("a7dc");let _=0;function m(e){let t=e.vertexShaderText,i=e.fragmentShaderText;"undefined"!==typeof spector&&(t=t.replace(/^#line/gm,"//#line"),i=i.replace(/^#line/gm,"//#line"));const n=d(t,i);this._gl=e.gl,this._logShaderCompilation=e.logShaderCompilation,this._debugShaders=e.debugShaders,this._attributeLocations=e.attributeLocations,this._program=void 0,this._numberOfVertexAttributes=void 0,this._vertexAttributes=void 0,this._uniformsByName=void 0,this._uniforms=void 0,this._automaticUniforms=void 0,this._manualUniforms=void 0,this._duplicateUniformNames=n.duplicateUniformNames,this._cachedShader=void 0,this.maximumTextureUnitIndex=void 0,this._vertexShaderSource=e.vertexShaderSource,this._vertexShaderText=e.vertexShaderText,this._fragmentShaderSource=e.fragmentShaderSource,this._fragmentShaderText=n.fragmentShaderText,this.id=_++}function p(e){const t=[],i=e.match(/uniform.*?(?![^{]*})(?=[=\[;])/g);if(Object(o["a"])(i)){const e=i.length;for(let n=0;n<e;n++){const e=i[n].trim(),r=e.slice(e.lastIndexOf(" ")+1);t.push(r)}}return t}function d(e,t){const i={};if(!h["a"].highpFloatSupported||!h["a"].highpIntSupported){let n,r,o,a;const s=p(e),c=p(t),u=s.length,h=c.length;for(n=0;n<u;n++)for(r=0;r<h;r++)if(s[n]===c[r]){o=s[n],a="czm_mediump_"+o;const e=new RegExp(o+"\\b","g");t=t.replace(e,a),i[a]=o}}return{fragmentShaderText:t,duplicateUniformNames:i}}m.fromCache=function(e){return e=Object(r["a"])(e,r["a"].EMPTY_OBJECT),n["a"].defined("options.context",e.context),e.context.shaderCache.getShaderProgram(e)},m.replaceCache=function(e){return e=Object(r["a"])(e,r["a"].EMPTY_OBJECT),n["a"].defined("options.context",e.context),e.context.shaderCache.replaceShaderProgram(e)},Object.defineProperties(m.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},vertexAttributes:{get:function(){return O(this),this._vertexAttributes}},numberOfVertexAttributes:{get:function(){return O(this),this._numberOfVertexAttributes}},allUniforms:{get:function(){return O(this),this._uniformsByName}}});const g="[Cesium WebGL] ";function v(e,t){const i=t._vertexShaderText,n=t._fragmentShaderText,r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,i),e.compileShader(r);const a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,n),e.compileShader(a);const s=e.createProgram();e.attachShader(s,r),e.attachShader(s,a),e.deleteShader(r),e.deleteShader(a);const u=t._attributeLocations;if(Object(o["a"])(u))for(const o in u)u.hasOwnProperty(o)&&e.bindAttribLocation(s,u[o],o);let h;if(e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS)){const i=t._debugShaders;if(!e.getShaderParameter(a,e.COMPILE_STATUS)){if(h=e.getShaderInfoLog(a),console.error(`${g}Fragment shader compile log: ${h}`),Object(o["a"])(i)){const e=i.getTranslatedShaderSource(a);""!==e?console.error(`${g}Translated fragment shader source:\n${e}`):console.error(g+"Fragment shader translation failed.")}throw e.deleteProgram(s),new c["a"]("Fragment shader failed to compile.  Compile log: "+h)}if(!e.getShaderParameter(r,e.COMPILE_STATUS)){if(h=e.getShaderInfoLog(r),console.error(`${g}Vertex shader compile log: ${h}`),Object(o["a"])(i)){const e=i.getTranslatedShaderSource(r);""!==e?console.error(`${g}Translated vertex shader source:\n${e}`):console.error(g+"Vertex shader translation failed.")}throw e.deleteProgram(s),new c["a"]("Vertex shader failed to compile.  Compile log: "+h)}throw h=e.getProgramInfoLog(s),console.error(`${g}Shader program link log: ${h}`),Object(o["a"])(i)&&(console.error(`${g}Translated vertex shader source:\n${i.getTranslatedShaderSource(r)}`),console.error(`${g}Translated fragment shader source:\n${i.getTranslatedShaderSource(a)}`)),e.deleteProgram(s),new c["a"]("Program failed to link.  Link log: "+h)}const l=t._logShaderCompilation;return l&&(h=e.getShaderInfoLog(r),Object(o["a"])(h)&&h.length>0&&console.log(`${g}Vertex shader compile log: ${h}`)),l&&(h=e.getShaderInfoLog(a),Object(o["a"])(h)&&h.length>0&&console.log(`${g}Fragment shader compile log: ${h}`)),l&&(h=e.getProgramInfoLog(s),Object(o["a"])(h)&&h.length>0&&console.log(`${g}Shader program link log: ${h}`)),s}function y(e,t,i){const n={};for(let r=0;r<i;++r){const i=e.getActiveAttrib(t,r),o=e.getAttribLocation(t,i.name);n[i.name]={name:i.name,type:i.type,index:o}}return n}function w(e,t){const i={},n=[],r=[],a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<a;++s){const a=e.getActiveUniform(t,s),c="[0]",u=-1!==a.name.indexOf(c,a.name.length-c.length)?a.name.slice(0,a.name.length-3):a.name;if(0!==u.indexOf("gl_"))if(a.name.indexOf("[")<0){const o=e.getUniformLocation(t,u);if(null!==o){const t=Object(l["a"])(e,a,u,o);i[u]=t,n.push(t),t._setSampler&&r.push(t)}}else{let s,c,h,l;const _=u.indexOf("[");if(_>=0){if(s=i[u.slice(0,_)],!Object(o["a"])(s))continue;c=s._locations,c.length<=1&&(h=s.value,l=e.getUniformLocation(t,u),null!==l&&(c.push(l),h.push(e.getUniform(t,l))))}else{c=[];for(let i=0;i<a.size;++i)l=e.getUniformLocation(t,`${u}[${i}]`),null!==l&&c.push(l);s=Object(f["a"])(e,a,u,c),i[u]=s,n.push(s),s._setSampler&&r.push(s)}}}return{uniformsByName:i,uniforms:n,samplerUniforms:r}}function x(e,t){const i=[],n=[];for(const r in t)if(t.hasOwnProperty(r)){const a=t[r];let s=r;const c=e._duplicateUniformNames[s];Object(o["a"])(c)&&(a.name=c,s=c);const h=u["a"][s];Object(o["a"])(h)?i.push({uniform:a,automaticUniform:h}):n.push(a)}return{automaticUniforms:i,manualUniforms:n}}function b(e,t,i){e.useProgram(t);let n=0;const r=i.length;for(let o=0;o<r;++o)n=i[o]._setSampler(n);return e.useProgram(null),n}function O(e){Object(o["a"])(e._program)||D(e)}function D(e){const t=e._program,i=e._gl,n=v(i,e,e._debugShaders),r=i.getProgramParameter(n,i.ACTIVE_ATTRIBUTES),o=w(i,n),a=x(e,o.uniformsByName);e._program=n,e._numberOfVertexAttributes=r,e._vertexAttributes=y(i,n,r),e._uniformsByName=o.uniformsByName,e._uniforms=o.uniforms,e._automaticUniforms=a.automaticUniforms,e._manualUniforms=a.manualUniforms,e.maximumTextureUnitIndex=b(i,n,o.samplerUniforms),t&&e._gl.deleteProgram(t),"undefined"!==typeof spector&&(e._program.__SPECTOR_rebuildProgram=function(t,i,n,r){const o=e._vertexShaderText,a=e._fragmentShaderText,s=/ ! = /g;e._vertexShaderText=t.replace(s," != "),e._fragmentShaderText=i.replace(s," != ");try{D(e),n(e._program)}catch(c){e._vertexShaderText=o,e._fragmentShaderText=a;const t=/(?:Compile|Link) error: ([^]*)/,i=t.exec(c.message);r(i?i[1]:c.message)}})}m.prototype._bind=function(){O(this),this._gl.useProgram(this._program)},m.prototype._setUniforms=function(e,t,i){let n,r;if(Object(o["a"])(e)){const t=this._manualUniforms;for(n=t.length,r=0;r<n;++r){const i=t[r];i.value=e[i.name]()}}const a=this._automaticUniforms;for(n=a.length,r=0;r<n;++r){const e=a[r];e.uniform.value=e.automaticUniform.getValue(t)}const c=this._uniforms;for(n=c.length,r=0;r<n;++r)c[r].set();if(i){const e=this._gl,t=this._program;if(e.validateProgram(t),!e.getProgramParameter(t,e.VALIDATE_STATUS))throw new s["a"]("Program validation failed.  Program info log: "+e.getProgramInfoLog(t))}},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){this._cachedShader.cache.releaseShaderProgram(this)},m.prototype.finalDestroy=function(){return this._gl.deleteProgram(this._program),Object(a["a"])(this)},t["a"]=m},"91fa":function(e,t,i){"use strict";function n(e){this.signature=e,this.body=[]}i.d(t,"a",(function(){return n})),n.prototype.addLines=function(e){const t=e.map((function(e){return"    "+e}));Array.prototype.push.apply(this.body,t)},n.prototype.generateGlslLines=function(){return[].concat(this.signature,"{",this.body,"}")}},"9f4f":function(e,t,i){"use strict";var n=i("85b2"),r=i("dde0"),o=i("6b82"),a=i("4051"),s=i("c937"),c=i("e2a6"),u=i("d70f"),h=i("d767"),l=i("722e"),f=i("e2aa");function _(e,t,i,n){switch(t.type){case e.FLOAT:return new m(e,t,i,n);case e.FLOAT_VEC2:return new p(e,t,i,n);case e.FLOAT_VEC3:return new d(e,t,i,n);case e.FLOAT_VEC4:return new g(e,t,i,n);case e.SAMPLER_2D:case e.SAMPLER_CUBE:return new v(e,t,i,n);case e.INT:case e.BOOL:return new y(e,t,i,n);case e.INT_VEC2:case e.BOOL_VEC2:return new w(e,t,i,n);case e.INT_VEC3:case e.BOOL_VEC3:return new x(e,t,i,n);case e.INT_VEC4:case e.BOOL_VEC4:return new b(e,t,i,n);case e.FLOAT_MAT2:return new D(e,t,i,n);case e.FLOAT_MAT3:return new P(e,t,i,n);case e.FLOAT_MAT4:return new A(e,t,i,n);default:throw new f["a"](`Unrecognized uniform type: ${t.type} for uniform "${i}".`)}}function m(e,t,i,n){this.name=i,this.value=void 0,this._value=0,this._gl=e,this._location=n}function p(e,t,i,r){this.name=i,this.value=void 0,this._value=new n["a"],this._gl=e,this._location=r}function d(e,t,i,n){this.name=i,this.value=void 0,this._value=void 0,this._gl=e,this._location=n}function g(e,t,i,n){this.name=i,this.value=void 0,this._value=void 0,this._gl=e,this._location=n}function v(e,t,i,n){this.name=i,this.value=void 0,this._gl=e,this._location=n,this.textureUnitIndex=void 0}function y(e,t,i,n){this.name=i,this.value=void 0,this._value=0,this._gl=e,this._location=n}function w(e,t,i,r){this.name=i,this.value=void 0,this._value=new n["a"],this._gl=e,this._location=r}function x(e,t,i,n){this.name=i,this.value=void 0,this._value=new r["a"],this._gl=e,this._location=n}function b(e,t,i,n){this.name=i,this.value=void 0,this._value=new o["a"],this._gl=e,this._location=n}m.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1f(this._location,this.value))},p.prototype.set=function(){const e=this.value;n["a"].equals(e,this._value)||(n["a"].clone(e,this._value),this._gl.uniform2f(this._location,e.x,e.y))},d.prototype.set=function(){const e=this.value;if(Object(s["a"])(e.red))a["a"].equals(e,this._value)||(this._value=a["a"].clone(e,this._value),this._gl.uniform3f(this._location,e.red,e.green,e.blue));else{if(!Object(s["a"])(e.x))throw new c["a"](`Invalid vec3 value for uniform "${this.name}".`);r["a"].equals(e,this._value)||(this._value=r["a"].clone(e,this._value),this._gl.uniform3f(this._location,e.x,e.y,e.z))}},g.prototype.set=function(){const e=this.value;if(Object(s["a"])(e.red))a["a"].equals(e,this._value)||(this._value=a["a"].clone(e,this._value),this._gl.uniform4f(this._location,e.red,e.green,e.blue,e.alpha));else{if(!Object(s["a"])(e.x))throw new c["a"](`Invalid vec4 value for uniform "${this.name}".`);o["a"].equals(e,this._value)||(this._value=o["a"].clone(e,this._value),this._gl.uniform4f(this._location,e.x,e.y,e.z,e.w))}},v.prototype.set=function(){const e=this._gl;e.activeTexture(e.TEXTURE0+this.textureUnitIndex);const t=this.value;e.bindTexture(t._target,t._texture)},v.prototype._setSampler=function(e){return this.textureUnitIndex=e,this._gl.uniform1i(this._location,e),e+1},y.prototype.set=function(){this.value!==this._value&&(this._value=this.value,this._gl.uniform1i(this._location,this.value))},w.prototype.set=function(){const e=this.value;n["a"].equals(e,this._value)||(n["a"].clone(e,this._value),this._gl.uniform2i(this._location,e.x,e.y))},x.prototype.set=function(){const e=this.value;r["a"].equals(e,this._value)||(r["a"].clone(e,this._value),this._gl.uniform3i(this._location,e.x,e.y,e.z))},b.prototype.set=function(){const e=this.value;o["a"].equals(e,this._value)||(o["a"].clone(e,this._value),this._gl.uniform4i(this._location,e.x,e.y,e.z,e.w))};const O=new Float32Array(4);function D(e,t,i,n){this.name=i,this.value=void 0,this._value=new u["a"],this._gl=e,this._location=n}D.prototype.set=function(){if(!u["a"].equalsArray(this.value,this._value,0)){u["a"].clone(this.value,this._value);const e=u["a"].toArray(this.value,O);this._gl.uniformMatrix2fv(this._location,!1,e)}};const T=new Float32Array(9);function P(e,t,i,n){this.name=i,this.value=void 0,this._value=new h["a"],this._gl=e,this._location=n}P.prototype.set=function(){if(!h["a"].equalsArray(this.value,this._value,0)){h["a"].clone(this.value,this._value);const e=h["a"].toArray(this.value,T);this._gl.uniformMatrix3fv(this._location,!1,e)}};const E=new Float32Array(16);function A(e,t,i,n){this.name=i,this.value=void 0,this._value=new l["a"],this._gl=e,this._location=n}A.prototype.set=function(){if(!l["a"].equalsArray(this.value,this._value,0)){l["a"].clone(this.value,this._value);const e=l["a"].toArray(this.value,E);this._gl.uniformMatrix4fv(this._location,!1,e)}},t["a"]=_},a7dc:function(e,t,i){"use strict";var n=i("85b2"),r=i("dde0"),o=i("6b82"),a=i("4051"),s=i("c937"),c=i("e2a6"),u=i("d70f"),h=i("d767"),l=i("722e"),f=i("e2aa");function _(e,t,i,n){switch(t.type){case e.FLOAT:return new m(e,t,i,n);case e.FLOAT_VEC2:return new p(e,t,i,n);case e.FLOAT_VEC3:return new d(e,t,i,n);case e.FLOAT_VEC4:return new g(e,t,i,n);case e.SAMPLER_2D:case e.SAMPLER_CUBE:return new v(e,t,i,n);case e.INT:case e.BOOL:return new y(e,t,i,n);case e.INT_VEC2:case e.BOOL_VEC2:return new w(e,t,i,n);case e.INT_VEC3:case e.BOOL_VEC3:return new x(e,t,i,n);case e.INT_VEC4:case e.BOOL_VEC4:return new b(e,t,i,n);case e.FLOAT_MAT2:return new O(e,t,i,n);case e.FLOAT_MAT3:return new D(e,t,i,n);case e.FLOAT_MAT4:return new T(e,t,i,n);default:throw new f["a"](`Unrecognized uniform type: ${t.type} for uniform "${i}".`)}}function m(e,t,i,n){const r=n.length;this.name=i,this.value=new Array(r),this._value=new Float32Array(r),this._gl=e,this._location=n[0]}function p(e,t,i,n){const r=n.length;this.name=i,this.value=new Array(r),this._value=new Float32Array(2*r),this._gl=e,this._location=n[0]}function d(e,t,i,n){const r=n.length;this.name=i,this.value=new Array(r),this._value=new Float32Array(3*r),this._gl=e,this._location=n[0]}function g(e,t,i,n){const r=n.length;this.name=i,this.value=new Array(r),this._value=new Float32Array(4*r),this._gl=e,this._location=n[0]}function v(e,t,i,n){const r=n.length;this.name=i,this.value=new Array(r),this._value=new Float32Array(r),this._gl=e,this._locations=n,this.textureUnitIndex=void 0}function y(e,t,i,n){const r=n.length;this.name=i,this.value=new Array(r),this._value=new Int32Array(r),this._gl=e,this._location=n[0]}function w(e,t,i,n){const r=n.length;this.name=i,this.value=new Array(r),this._value=new Int32Array(2*r),this._gl=e,this._location=n[0]}function x(e,t,i,n){const r=n.length;this.name=i,this.value=new Array(r),this._value=new Int32Array(3*r),this._gl=e,this._location=n[0]}function b(e,t,i,n){const r=n.length;this.name=i,this.value=new Array(r),this._value=new Int32Array(4*r),this._gl=e,this._location=n[0]}function O(e,t,i,n){const r=n.length;this.name=i,this.value=new Array(r),this._value=new Float32Array(4*r),this._gl=e,this._location=n[0]}function D(e,t,i,n){const r=n.length;this.name=i,this.value=new Array(r),this._value=new Float32Array(9*r),this._gl=e,this._location=n[0]}function T(e,t,i,n){const r=n.length;this.name=i,this.value=new Array(r),this._value=new Float32Array(16*r),this._gl=e,this._location=n[0]}m.prototype.set=function(){const e=this.value,t=e.length,i=this._value;let n=!1;for(let r=0;r<t;++r){const t=e[r];t!==i[r]&&(i[r]=t,n=!0)}n&&this._gl.uniform1fv(this._location,i)},p.prototype.set=function(){const e=this.value,t=e.length,i=this._value;let r=!1,o=0;for(let a=0;a<t;++a){const t=e[a];n["a"].equalsArray(t,i,o)||(n["a"].pack(t,i,o),r=!0),o+=2}r&&this._gl.uniform2fv(this._location,i)},d.prototype.set=function(){const e=this.value,t=e.length,i=this._value;let n=!1,o=0;for(let a=0;a<t;++a){const t=e[a];if(Object(s["a"])(t.red))t.red===i[o]&&t.green===i[o+1]&&t.blue===i[o+2]||(i[o]=t.red,i[o+1]=t.green,i[o+2]=t.blue,n=!0);else{if(!Object(s["a"])(t.x))throw new c["a"]("Invalid vec3 value.");r["a"].equalsArray(t,i,o)||(r["a"].pack(t,i,o),n=!0)}o+=3}n&&this._gl.uniform3fv(this._location,i)},g.prototype.set=function(){const e=this.value,t=e.length,i=this._value;let n=!1,r=0;for(let u=0;u<t;++u){const t=e[u];if(Object(s["a"])(t.red))a["a"].equalsArray(t,i,r)||(a["a"].pack(t,i,r),n=!0);else{if(!Object(s["a"])(t.x))throw new c["a"]("Invalid vec4 value.");o["a"].equalsArray(t,i,r)||(o["a"].pack(t,i,r),n=!0)}r+=4}n&&this._gl.uniform4fv(this._location,i)},v.prototype.set=function(){const e=this._gl,t=e.TEXTURE0+this.textureUnitIndex,i=this.value,n=i.length;for(let r=0;r<n;++r){const n=i[r];e.activeTexture(t+r),e.bindTexture(n._target,n._texture)}},v.prototype._setSampler=function(e){this.textureUnitIndex=e;const t=this._locations,i=t.length;for(let n=0;n<i;++n){const i=e+n;this._gl.uniform1i(t[n],i)}return e+i},y.prototype.set=function(){const e=this.value,t=e.length,i=this._value;let n=!1;for(let r=0;r<t;++r){const t=e[r];t!==i[r]&&(i[r]=t,n=!0)}n&&this._gl.uniform1iv(this._location,i)},w.prototype.set=function(){const e=this.value,t=e.length,i=this._value;let r=!1,o=0;for(let a=0;a<t;++a){const t=e[a];n["a"].equalsArray(t,i,o)||(n["a"].pack(t,i,o),r=!0),o+=2}r&&this._gl.uniform2iv(this._location,i)},x.prototype.set=function(){const e=this.value,t=e.length,i=this._value;let n=!1,o=0;for(let a=0;a<t;++a){const t=e[a];r["a"].equalsArray(t,i,o)||(r["a"].pack(t,i,o),n=!0),o+=3}n&&this._gl.uniform3iv(this._location,i)},b.prototype.set=function(){const e=this.value,t=e.length,i=this._value;let n=!1,r=0;for(let a=0;a<t;++a){const t=e[a];o["a"].equalsArray(t,i,r)||(o["a"].pack(t,i,r),n=!0),r+=4}n&&this._gl.uniform4iv(this._location,i)},O.prototype.set=function(){const e=this.value,t=e.length,i=this._value;let n=!1,r=0;for(let o=0;o<t;++o){const t=e[o];u["a"].equalsArray(t,i,r)||(u["a"].pack(t,i,r),n=!0),r+=4}n&&this._gl.uniformMatrix2fv(this._location,!1,i)},D.prototype.set=function(){const e=this.value,t=e.length,i=this._value;let n=!1,r=0;for(let o=0;o<t;++o){const t=e[o];h["a"].equalsArray(t,i,r)||(h["a"].pack(t,i,r),n=!0),r+=9}n&&this._gl.uniformMatrix3fv(this._location,!1,i)},T.prototype.set=function(){const e=this.value,t=e.length,i=this._value;let n=!1,r=0;for(let o=0;o<t;++o){const t=e[o];l["a"].equalsArray(t,i,r)||(l["a"].pack(t,i,r),n=!0),r+=16}n&&this._gl.uniformMatrix4fv(this._location,!1,i)},t["a"]=_},b3ce:function(e,t,i){"use strict";var n=i("1a5d"),r=i("c937"),o=i("e2a6"),a=i("31bb"),s=i("b195"),c=i("3366");function u(e){return e=e.replace(/\/\/.*/g,""),e.replace(/\/\*\*[\s\S]*?\*\//gm,(function(e){const t=e.match(/\n/gm).length;let i="";for(let n=0;n<t;++n)i+="\n";return i}))}function h(e,t,i){let n;for(let r=0;r<i.length;++r)i[r].name===e&&(n=i[r]);return Object(r["a"])(n)||(t=u(t),n={name:e,glslSource:t,dependsOn:[],requiredBy:[],evaluated:!1},i.push(n)),n}function l(e,t){if(e.evaluated)return;e.evaluated=!0;let i=e.glslSource.match(/\bczm_[a-zA-Z0-9_]*/g);Object(r["a"])(i)&&null!==i&&(i=i.filter((function(e,t){return i.indexOf(e)===t})),i.forEach((function(i){if(i!==e.name&&p._czmBuiltinsAndUniforms.hasOwnProperty(i)){const n=h(i,p._czmBuiltinsAndUniforms[i],t);e.dependsOn.push(n),n.requiredBy.push(e),l(n,t)}})))}function f(e){const t=[],i=[];while(e.length>0){const n=e.pop();i.push(n),0===n.requiredBy.length&&t.push(n)}while(t.length>0){const i=t.shift();e.push(i);for(let e=0;e<i.dependsOn.length;++e){const n=i.dependsOn[e],r=n.requiredBy.indexOf(i);n.requiredBy.splice(r,1),0===n.requiredBy.length&&t.push(n)}}const n=[];for(let r=0;r<i.length;++r)0!==i[r].requiredBy.length&&n.push(i[r]);if(0!==n.length){let e="A circular dependency was found in the following built-in functions/structs/constants: \n";for(let t=0;t<n.length;++t)e=e+n[t].name+"\n";throw new o["a"](e)}}function _(e){const t=[],i=h("main",e,t);l(i,t),f(t);let n="";for(let r=t.length-1;r>=0;--r)n=n+t[r].glslSource+"\n";return n.replace(i.glslSource,"")}function m(e,t,i){let n,s,c="";const h=e.sources;if(Object(r["a"])(h))for(n=0,s=h.length;n<s;++n)c+="\n#line 0\n"+h[n];let l;c=u(c),c=c.replace(/#version\s+(.*?)\n/gm,(function(e,t){if(Object(r["a"])(l)&&l!==t)throw new o["a"](`inconsistent versions found: ${l} and ${t}`);return l=t,"\n"}));const f=[];c=c.replace(/#extension.*\n/gm,(function(e){return f.push(e),"\n"})),c=c.replace(/precision\s(lowp|mediump|highp)\s(float|int);/,"");const m=e.pickColorQualifier;Object(r["a"])(m)&&(c=p.createPickFragmentShaderSource(c,m));let d="";Object(r["a"])(l)&&(d=`#version ${l}\n`);const g=f.length;for(n=0;n<g;n++)d+=f[n];t&&(d+="#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    precision highp int;\n#else\n    precision mediump float;\n    precision mediump int;\n    #define highp mediump\n#endif\n\n");const v=e.defines;if(Object(r["a"])(v))for(n=0,s=v.length;n<s;++n){const e=v[n];0!==e.length&&(d+=`#define ${e}\n`)}return i.webgl2&&(d+="#define OUTPUT_DECLARATION\n\n"),i.textureFloatLinear&&(d+="#define OES_texture_float_linear\n\n"),i.floatingPointTexture&&(d+="#define OES_texture_float\n\n"),e.includeBuiltIns&&(d+=_(c)),d+="\n#line 0\n",d+=c,i.webgl2&&(d=Object(a["a"])(d,t,!0)),d}function p(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);const t=e.pickColorQualifier;if(Object(r["a"])(t)&&"uniform"!==t&&"varying"!==t)throw new o["a"]("options.pickColorQualifier must be 'uniform' or 'varying'.");this.defines=Object(r["a"])(e.defines)?e.defines.slice(0):[],this.sources=Object(r["a"])(e.sources)?e.sources.slice(0):[],this.pickColorQualifier=t,this.includeBuiltIns=Object(n["a"])(e.includeBuiltIns,!0)}p.prototype.clone=function(){return new p({sources:this.sources,defines:this.defines,pickColorQualifier:this.pickColorQualifier,includeBuiltIns:this.includeBuiltIns})},p.replaceMain=function(e,t){return t=`void ${t}()`,e.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,t)},p.prototype.createCombinedVertexShader=function(e){return m(this,!1,e)},p.prototype.createCombinedFragmentShader=function(e){return m(this,!0,e)},p._czmBuiltinsAndUniforms={};for(const w in s["a"])s["a"].hasOwnProperty(w)&&(p._czmBuiltinsAndUniforms[w]=s["a"][w]);for(const w in c["a"])if(c["a"].hasOwnProperty(w)){const e=c["a"][w];"function"===typeof e.getDeclaration&&(p._czmBuiltinsAndUniforms[w]=e.getDeclaration(w))}function d(e,t){const i=e.sources,n=i.length;for(let r=0;r<n;++r)if(-1!==i[r].indexOf(t))return!0;return!1}function g(e,t){const i=t.length;for(let n=0;n<i;++n){const i=t[n];if(d(e,i))return i}}p.createPickVertexShaderSource=function(e){const t=p.replaceMain(e,"czm_old_main"),i="attribute vec4 pickColor; \nvarying vec4 czm_pickColor; \nvoid main() \n{ \n    czm_old_main(); \n    czm_pickColor = pickColor; \n}";return`${t}\n${i}`},p.createPickFragmentShaderSource=function(e,t){const i=p.replaceMain(e,"czm_old_main"),n=t+" vec4 czm_pickColor; \nvoid main() \n{ \n    czm_old_main(); \n    if (gl_FragColor.a == 0.0) { \n       discard; \n    } \n    gl_FragColor = czm_pickColor; \n}";return`${i}\n${n}`};const v=["v_normalEC","v_normal"];p.findNormalVarying=function(e){return d(e,"#ifdef HAS_NORMALS")?d(e,"#define HAS_NORMALS")?"v_normalEC":void 0:g(e,v)};const y=["v_positionEC"];p.findPositionVarying=function(e){return g(e,y)},t["a"]=p},c29d:function(e,t,i){"use strict";var n=i("c937"),r=i("21b7");function o(){this._textures={},this._numberOfTextures=0,this._texturesToRelease={}}Object.defineProperties(o.prototype,{numberOfTextures:{get:function(){return this._numberOfTextures}}}),o.prototype.getTexture=function(e){const t=this._textures[e];if(Object(n["a"])(t))return delete this._texturesToRelease[e],++t.count,t.texture},o.prototype.addTexture=function(e,t){const i={texture:t,count:1};t.finalDestroy=t.destroy;const n=this;t.destroy=function(){0===--i.count&&(n._texturesToRelease[e]=i)},this._textures[e]=i,++this._numberOfTextures},o.prototype.destroyReleasedTextures=function(){const e=this._texturesToRelease;for(const t in e)if(e.hasOwnProperty(t)){const i=e[t];delete this._textures[t],i.texture.finalDestroy(),--this._numberOfTextures}this._texturesToRelease={}},o.prototype.isDestroyed=function(){return!1},o.prototype.destroy=function(){const e=this._textures;for(const t in e)e.hasOwnProperty(t)&&e[t].texture.finalDestroy();return Object(r["a"])(this)},t["a"]=o},dc15:function(e,t,i){"use strict";var n=i("ae9b"),r=i("cbf0"),o=i("1a5d"),a=i("c937"),s=i("21b7"),c=i("e2a6"),u=i("5a72"),h=i("2642"),l=i("b8b5"),f=i("e2aa"),_=i("6f54"),m=i("6ba7"),p=i("2341");function d(e,t,i,n){const s=Object(a["a"])(t.vertexBuffer),u=Object(a["a"])(t.value),h=t.value?t.value.length:t.componentsPerAttribute;if(!s&&!u)throw new c["a"]("attribute must have a vertexBuffer or a value.");if(s&&u)throw new c["a"]("attribute cannot have both a vertexBuffer and a value.  It must have either a vertexBuffer property defining per-vertex data or a value property defining data for all vertices.");if(1!==h&&2!==h&&3!==h&&4!==h){if(u)throw new c["a"]("attribute.value.length must be in the range [1, 4].");throw new c["a"]("attribute.componentsPerAttribute must be in the range [1, 4].")}if(Object(a["a"])(t.componentDatatype)&&!r["a"].validate(t.componentDatatype))throw new c["a"]("attribute must have a valid componentDatatype or not specify it.");if(Object(a["a"])(t.strideInBytes)&&t.strideInBytes>255)throw new c["a"]("attribute must have a strideInBytes less than or equal to 255 or not specify it.");if(Object(a["a"])(t.instanceDivisor)&&t.instanceDivisor>0&&!n.instancedArrays)throw new c["a"]("instanced arrays is not supported");if(Object(a["a"])(t.instanceDivisor)&&t.instanceDivisor<0)throw new c["a"]("attribute must have an instanceDivisor greater than or equal to zero");if(Object(a["a"])(t.instanceDivisor)&&u)throw new c["a"]("attribute cannot have have an instanceDivisor if it is not backed by a buffer");if(Object(a["a"])(t.instanceDivisor)&&t.instanceDivisor>0&&0===t.index)throw new c["a"]("attribute zero cannot have an instanceDivisor greater than 0");const l={index:Object(o["a"])(t.index,i),enabled:Object(o["a"])(t.enabled,!0),vertexBuffer:t.vertexBuffer,value:u?t.value.slice(0):void 0,componentsPerAttribute:h,componentDatatype:Object(o["a"])(t.componentDatatype,r["a"].FLOAT),normalize:Object(o["a"])(t.normalize,!1),offsetInBytes:Object(o["a"])(t.offsetInBytes,0),strideInBytes:Object(o["a"])(t.strideInBytes,0),instanceDivisor:Object(o["a"])(t.instanceDivisor,0)};if(s)l.vertexAttrib=function(e){const t=this.index;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer._getBuffer()),e.vertexAttribPointer(t,this.componentsPerAttribute,this.componentDatatype,this.normalize,this.strideInBytes,this.offsetInBytes),e.enableVertexAttribArray(t),this.instanceDivisor>0&&(n.glVertexAttribDivisor(t,this.instanceDivisor),n._vertexAttribDivisors[t]=this.instanceDivisor,n._previousDrawInstanced=!0)},l.disableVertexAttribArray=function(e){e.disableVertexAttribArray(this.index),this.instanceDivisor>0&&n.glVertexAttribDivisor(i,0)};else{switch(l.componentsPerAttribute){case 1:l.vertexAttrib=function(e){e.vertexAttrib1fv(this.index,this.value)};break;case 2:l.vertexAttrib=function(e){e.vertexAttrib2fv(this.index,this.value)};break;case 3:l.vertexAttrib=function(e){e.vertexAttrib3fv(this.index,this.value)};break;case 4:l.vertexAttrib=function(e){e.vertexAttrib4fv(this.index,this.value)};break}l.disableVertexAttribArray=function(e){}}e.push(l)}function g(e,t,i){for(let n=0;n<t.length;++n){const i=t[n];i.enabled&&i.vertexAttrib(e)}Object(a["a"])(i)&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i._getBuffer())}function v(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),n["a"].defined("options.context",e.context),n["a"].defined("options.attributes",e.attributes);const t=e.context,i=t._gl,s=e.attributes,u=e.indexBuffer;let h;const l=[];let f=1,_=!1,m=!1,p=s.length;for(h=0;h<p;++h)d(l,s[h],h,t);for(p=l.length,h=0;h<p;++h){const e=l[h];if(Object(a["a"])(e.vertexBuffer)&&0===e.instanceDivisor){const t=e.strideInBytes||e.componentsPerAttribute*r["a"].getSizeInBytes(e.componentDatatype);f=e.vertexBuffer.sizeInBytes/t;break}}for(h=0;h<p;++h)l[h].instanceDivisor>0&&(_=!0),Object(a["a"])(l[h].value)&&(m=!0);const v={};for(h=0;h<p;++h){const e=l[h].index;if(v[e])throw new c["a"](`Index ${e} is used by more than one attribute.`);v[e]=!0}let y;t.vertexArrayObject&&(y=t.glCreateVertexArray(),t.glBindVertexArray(y),g(i,l,u),t.glBindVertexArray(null)),this._numberOfVertices=f,this._hasInstancedAttributes=_,this._hasConstantAttributes=m,this._context=t,this._gl=i,this._vao=y,this._attributes=l,this._indexBuffer=u}function y(e){return e.values.length/e.componentsPerAttribute}function w(e){return r["a"].getSizeInBytes(e.componentDatatype)*e.componentsPerAttribute}function x(e){let t,i,n;const o=[];for(i in e)e.hasOwnProperty(i)&&Object(a["a"])(e[i])&&Object(a["a"])(e[i].values)&&(o.push(i),e[i].componentDatatype===r["a"].DOUBLE&&(e[i].componentDatatype=r["a"].FLOAT,e[i].values=r["a"].createTypedArray(r["a"].FLOAT,e[i].values)));let s;const c=o.length;if(c>0)for(s=y(e[o[0]]),t=1;t<c;++t){const i=y(e[o[t]]);if(i!==s)throw new f["a"](`Each attribute list must have the same number of vertices.  Attribute ${o[t]} has a different number of vertices (${i.toString()}) than attribute ${o[0]} (${s.toString()}).`)}o.sort((function(t,i){return r["a"].getSizeInBytes(e[i].componentDatatype)-r["a"].getSizeInBytes(e[t].componentDatatype)}));let u=0;const h={};for(t=0;t<c;++t)i=o[t],n=e[i],h[i]=u,u+=w(n);if(u>0){const a=r["a"].getSizeInBytes(e[o[0]].componentDatatype),l=u%a;0!==l&&(u+=a-l);const f=s*u,_=new ArrayBuffer(f),m={};for(t=0;t<c;++t){i=o[t];const n=r["a"].getSizeInBytes(e[i].componentDatatype);m[i]={pointer:r["a"].createTypedArray(e[i].componentDatatype,_),index:h[i]/n,strideInComponentType:u/n}}for(t=0;t<s;++t)for(let r=0;r<c;++r){i=o[r],n=e[i];const a=n.values,s=m[i],c=s.pointer,u=n.componentsPerAttribute;for(let e=0;e<u;++e)c[s.index+e]=a[t*u+e];s.index+=s.strideInComponentType}return{buffer:_,offsetsInBytes:h,vertexSizeInBytes:u}}}function b(e){const t=e._context,i=e._hasInstancedAttributes;if(!i&&!t._previousDrawInstanced)return;t._previousDrawInstanced=i;const n=t._vertexAttribDivisors,r=e._attributes,o=p["a"].maximumVertexAttributes;let a;if(i){const e=r.length;for(a=0;a<e;++a){const e=r[a];if(e.enabled){const i=e.instanceDivisor,r=e.index;i!==n[r]&&(t.glVertexAttribDivisor(r,i),n[r]=i)}}}else for(a=0;a<o;++a)n[a]>0&&(t.glVertexAttribDivisor(a,0),n[a]=0)}function O(e,t){const i=e._attributes,n=i.length;for(let r=0;r<n;++r){const e=i[r];e.enabled&&Object(a["a"])(e.value)&&e.vertexAttrib(t)}}v.fromGeometry=function(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),n["a"].defined("options.context",e.context);const t=e.context,i=Object(o["a"])(e.geometry,o["a"].EMPTY_OBJECT),s=Object(o["a"])(e.bufferUsage,m["a"].DYNAMIC_DRAW),c=Object(o["a"])(e.attributeLocations,o["a"].EMPTY_OBJECT),f=Object(o["a"])(e.interleave,!1),p=e.vertexArrayAttributes;let d,g,y;const w=Object(a["a"])(p)?p:[],b=i.attributes;if(f){const e=x(b);if(Object(a["a"])(e)){y=_["a"].createVertexBuffer({context:t,typedArray:e.buffer,usage:s});const i=e.offsetsInBytes,n=e.vertexSizeInBytes;for(d in b)b.hasOwnProperty(d)&&Object(a["a"])(b[d])&&(g=b[d],Object(a["a"])(g.values)?w.push({index:c[d],vertexBuffer:y,componentDatatype:g.componentDatatype,componentsPerAttribute:g.componentsPerAttribute,normalize:g.normalize,offsetInBytes:i[d],strideInBytes:n}):w.push({index:c[d],value:g.value,componentDatatype:g.componentDatatype,normalize:g.normalize}))}}else for(d in b)if(b.hasOwnProperty(d)&&Object(a["a"])(b[d])){g=b[d];let e=g.componentDatatype;e===r["a"].DOUBLE&&(e=r["a"].FLOAT),y=void 0,Object(a["a"])(g.values)&&(y=_["a"].createVertexBuffer({context:t,typedArray:r["a"].createTypedArray(e,g.values),usage:s})),w.push({index:c[d],vertexBuffer:y,value:g.value,componentDatatype:e,componentsPerAttribute:g.componentsPerAttribute,normalize:g.normalize})}let O;const D=i.indices;return Object(a["a"])(D)&&(O=u["a"].computeNumberOfVertices(i)>=l["a"].SIXTY_FOUR_KILOBYTES&&t.elementIndexUint?_["a"].createIndexBuffer({context:t,typedArray:new Uint32Array(D),usage:s,indexDatatype:h["a"].UNSIGNED_INT}):_["a"].createIndexBuffer({context:t,typedArray:new Uint16Array(D),usage:s,indexDatatype:h["a"].UNSIGNED_SHORT})),new v({context:t,attributes:w,indexBuffer:O})},Object.defineProperties(v.prototype,{numberOfAttributes:{get:function(){return this._attributes.length}},numberOfVertices:{get:function(){return this._numberOfVertices}},indexBuffer:{get:function(){return this._indexBuffer}}}),v.prototype.getAttribute=function(e){return n["a"].defined("index",e),this._attributes[e]},v.prototype._bind=function(){Object(a["a"])(this._vao)?(this._context.glBindVertexArray(this._vao),this._context.instancedArrays&&b(this),this._hasConstantAttributes&&O(this,this._gl)):g(this._gl,this._attributes,this._indexBuffer)},v.prototype._unBind=function(){if(Object(a["a"])(this._vao))this._context.glBindVertexArray(null);else{const e=this._attributes,t=this._gl;for(let i=0;i<e.length;++i){const n=e[i];n.enabled&&n.disableVertexAttribArray(t)}this._indexBuffer&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){const e=this._attributes;for(let i=0;i<e.length;++i){const t=e[i].vertexBuffer;Object(a["a"])(t)&&!t.isDestroyed()&&t.vertexArrayDestroyable&&t.destroy()}const t=this._indexBuffer;return Object(a["a"])(t)&&!t.isDestroyed()&&t.vertexArrayDestroyable&&t.destroy(),Object(a["a"])(this._vao)&&this._context.glDeleteVertexArray(this._vao),Object(s["a"])(this)},t["a"]=v}}]);