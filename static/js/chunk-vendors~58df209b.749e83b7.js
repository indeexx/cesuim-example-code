(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors~58df209b"],{"33f6":function(e,t,i){"use strict";const a={OPAQUE:0,TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2};t["a"]=Object.freeze(a)},8129:function(e,t,i){"use strict";var a=i("dde0"),s=i("ae9b"),n=i("1a5d"),o=i("b8b5");const r=new a["a"](1,1,1);function c(e){e=Object(n["a"])(e,r),s["a"].defined("dimensions",e),s["a"].typeOf.number.greaterThanOrEquals("dimensions.x",e.x,0),s["a"].typeOf.number.greaterThanOrEquals("dimensions.y",e.y,0),s["a"].typeOf.number.greaterThanOrEquals("dimensions.z",e.z,0),this._dimensions=a["a"].clone(e)}Object.defineProperties(c.prototype,{dimensions:{get:function(){return this._dimensions},set:function(e){s["a"].defined("value",e),s["a"].typeOf.number.greaterThanOrEquals("value.x",e.x,0),s["a"].typeOf.number.greaterThanOrEquals("value.y",e.y,0),s["a"].typeOf.number.greaterThanOrEquals("value.z",e.z,0),a["a"].clone(e,this._dimensions)}}});const l=new a["a"];c.prototype.emit=function(e){const t=this._dimensions,i=a["a"].multiplyByScalar(t,.5,l),s=o["a"].randomBetween(-i.x,i.x),n=o["a"].randomBetween(-i.y,i.y),r=o["a"].randomBetween(-i.z,i.z);e.position=a["a"].fromElements(s,n,r,e.position),e.velocity=a["a"].normalize(e.position,e.velocity)}},9497:function(e,t,i){"use strict";var a=i("1924"),s=i("ae9b"),n=i("3736"),o=i("1a5d"),r=i("61ad"),c=i("c937"),l=i("e2a6"),h=i("f7b5"),d=i("b8b5"),_=i("4a63"),u=i("9f38"),f=i("e2aa"),b=i("3242"),p=i("c7de"),m=i("fc80"),O=i("0e39"),g=i("e956");function A(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.key;if(!Object(c["a"])(e.url))throw new l["a"]("options.url is required.");if(!Object(c["a"])(t))throw new l["a"]("options.key is required.");this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=1,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this._key=t,this._resource=u["a"].createIfNeeded(e.url),this._resource.appendForwardSlash(),this._tileProtocol=e.tileProtocol,this._mapStyle=Object(o["a"])(e.mapStyle,m["a"].AERIAL),this._culture=Object(o["a"])(e.culture,""),this._tileDiscardPolicy=e.tileDiscardPolicy,Object(c["a"])(this._tileDiscardPolicy)||(this._tileDiscardPolicy=new O["a"]),this._proxy=e.proxy,this._credit=new n["a"](`<a href="http://www.bing.com"><img src="${A.logoUrl}" title="Bing Imagery"/></a>`),this._tilingScheme=new p["a"]({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:e.ellipsoid}),this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._imageUrlTemplate=void 0,this._imageUrlSubdomains=void 0,this._errorEvent=new h["a"],this._ready=!1,this._readyPromise=Object(r["a"])();let i=this._tileProtocol;if(Object(c["a"])(i))i.length>0&&":"===i[i.length-1]&&(i=i.substr(0,i.length-1));else{const e=document.location.protocol;i="http:"===e?"http":"https"}const a=this._resource.getDerivedResource({url:"REST/v1/Imagery/Metadata/"+this._mapStyle,queryParameters:{incl:"ImageryProviders",key:this._key,uriScheme:i}}),s=this;let g;function D(e){if(1!==e.resourceSets.length)return void y();const t=e.resourceSets[0].resources[0];s._tileWidth=t.imageWidth,s._tileHeight=t.imageHeight,s._maximumLevel=t.zoomMax-1,s._imageUrlSubdomains=t.imageUrlSubdomains,s._imageUrlTemplate=t.imageUrl;let i=s._attributionList=t.imageryProviders;i||(i=s._attributionList=[]);for(let a=0,s=i.length;a<s;++a){const e=i[a];if(e.credit instanceof n["a"])break;e.credit=new n["a"](e.attribution);const t=e.coverageAreas;for(let i=0,a=e.coverageAreas.length;i<a;++i){const e=t[i],a=e.bbox;e.bbox=new _["a"](d["a"].toRadians(a[1]),d["a"].toRadians(a[0]),d["a"].toRadians(a[3]),d["a"].toRadians(a[2]))}}s._ready=!0,s._readyPromise.resolve(!0),b["a"].handleSuccess(g)}function y(e){const t=`An error occurred while accessing ${a.url}.`;g=b["a"].handleError(g,s,s._errorEvent,t,void 0,void 0,void 0,S),s._readyPromise.reject(new f["a"](t))}const T=a.url;function S(){const e=a.fetchJsonp("jsonp");A._metadataCache[T]=e,e.then(D).catch(y)}const E=A._metadataCache[T];Object(c["a"])(E)?E.then(D).catch(y):S()}Object.defineProperties(A.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},key:{get:function(){return this._key}},mapStyle:{get:function(){return this._mapStyle}},culture:{get:function(){return this._culture}},tileWidth:{get:function(){if(!this._ready)throw new l["a"]("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new l["a"]("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new l["a"]("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new l["a"]("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new l["a"]("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){if(!this._ready)throw new l["a"]("rectangle must not be called before the imagery provider is ready.");return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new l["a"]("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!1}}});const D=new _["a"];function y(e,t,i,a,s){const n=e._imageUrlTemplate,o=e._imageUrlSubdomains,r=(t+i+a)%o.length;return e._resource.getDerivedResource({url:n,request:s,templateValues:{quadkey:A.tileXYToQuadKey(t,i,a),subdomain:o[r],culture:e._culture},queryParameters:{n:"z"}})}A.prototype.getTileCredits=function(e,t,i){if(!this._ready)throw new l["a"]("getTileCredits must not be called before the imagery provider is ready.");const a=this._tilingScheme.tileXYToRectangle(e,t,i,D),s=S(this._attributionList,i,a);return s},A.prototype.requestImage=function(e,t,i,a){if(!this._ready)throw new l["a"]("requestImage must not be called before the imagery provider is ready.");const s=g["a"].loadImage(this,y(this,e,t,i,a));if(Object(c["a"])(s))return s.catch((function(e){return Object(c["a"])(e.blob)&&0===e.blob.size?O["a"].EMPTY_IMAGE:Promise.reject(e)}))},A.prototype.pickFeatures=function(e,t,i,a,s){},A.tileXYToQuadKey=function(e,t,i){let a="";for(let s=i;s>=0;--s){const i=1<<s;let n=0;0!==(e&i)&&(n|=1),0!==(t&i)&&(n|=2),a+=n}return a},A.quadKeyToTileXY=function(e){let t=0,i=0;const a=e.length-1;for(let s=a;s>=0;--s){const n=1<<s,o=+e[a-s];0!==(1&o)&&(t|=n),0!==(2&o)&&(i|=n)}return{x:t,y:i,level:a}},A._logoUrl=void 0,Object.defineProperties(A,{logoUrl:{get:function(){return Object(c["a"])(A._logoUrl)||(A._logoUrl=Object(a["a"])("Assets/Images/bing_maps_credit.png")),A._logoUrl},set:function(e){s["a"].defined("value",e),A._logoUrl=e}}});const T=new _["a"];function S(e,t,i){++t;const a=[];for(let s=0,n=e.length;s<n;++s){const n=e[s],o=n.coverageAreas;let r=!1;for(let e=0,a=n.coverageAreas.length;!r&&e<a;++e){const a=o[e];if(t>=a.zoomMin&&t<=a.zoomMax){const e=_["a"].intersection(i,a.bbox,T);Object(c["a"])(e)&&(r=!0)}}r&&a.push(n.credit)}return a}A._metadataCache={},t["a"]=A},a3ad:function(e,t,i){"use strict";var a=i("cf26"),s=i("8656"),n=i("85b2"),o=i("dde0"),r=i("ae9b"),c=i("4051"),l=i("cbf0"),h=i("1a5d"),d=i("c937"),_=i("21b7"),u=i("e2a6"),f=i("d809"),b=i("2642"),p=i("b8b5"),m=i("722e"),O=i("cedf"),g=i("6f54"),A=i("6ba7"),D=i("2341"),y=i("d5cf"),T=i("51f2"),S=i("5027"),E=i("8f7d"),x=i("b3ce"),C=i("6384"),I=i("688f"),N=i("f124"),v=i("bbc8"),R=i("da23"),w=i("33f6"),P=i("3522"),j=i("2a50"),L=i("dc6c"),B=i("2498"),U=i("4ab5"),M=i("c9db");const H=v["a"].SHOW_INDEX,F=v["a"].POSITION_INDEX,V=v["a"].PIXEL_OFFSET_INDEX,z=v["a"].EYE_OFFSET_INDEX,q=v["a"].HORIZONTAL_ORIGIN_INDEX,k=v["a"].VERTICAL_ORIGIN_INDEX,W=v["a"].SCALE_INDEX,X=v["a"].IMAGE_INDEX_INDEX,G=v["a"].COLOR_INDEX,Y=v["a"].ROTATION_INDEX,Q=v["a"].ALIGNED_AXIS_INDEX,K=v["a"].SCALE_BY_DISTANCE_INDEX,Z=v["a"].TRANSLUCENCY_BY_DISTANCE_INDEX,J=v["a"].PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX,$=v["a"].DISTANCE_DISPLAY_CONDITION,ee=v["a"].DISABLE_DEPTH_DISTANCE,te=v["a"].TEXTURE_COORDINATE_BOUNDS,ie=v["a"].SDF_INDEX,ae=v["a"].NUMBER_OF_PROPERTIES;let se;const ne={positionHighAndScale:0,positionLowAndRotation:1,compressedAttribute0:2,compressedAttribute1:3,compressedAttribute2:4,eyeOffset:5,scaleByDistance:6,pixelOffsetScaleByDistance:7,compressedAttribute3:8,textureCoordinateBoundsOrLabelTranslate:9,a_batchId:10,sdf:11},oe={direction:0,positionHighAndScale:1,positionLowAndRotation:2,compressedAttribute0:3,compressedAttribute1:4,compressedAttribute2:5,eyeOffset:6,scaleByDistance:7,pixelOffsetScaleByDistance:8,compressedAttribute3:9,textureCoordinateBoundsOrLabelTranslate:10,a_batchId:11,sdf:12};function re(e){e=Object(h["a"])(e,h["a"].EMPTY_OBJECT),this._scene=e.scene,this._batchTable=e.batchTable,this._textureAtlas=void 0,this._textureAtlasGUID=void 0,this._destroyTextureAtlas=!0,this._sp=void 0,this._spTranslucent=void 0,this._rsOpaque=void 0,this._rsTranslucent=void 0,this._vaf=void 0,this._billboards=[],this._billboardsToUpdate=[],this._billboardsToUpdateIndex=0,this._billboardsRemoved=!1,this._createVertexArray=!1,this._shaderRotation=!1,this._compiledShaderRotation=!1,this._shaderAlignedAxis=!1,this._compiledShaderAlignedAxis=!1,this._shaderScaleByDistance=!1,this._compiledShaderScaleByDistance=!1,this._shaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistance=!1,this._shaderPixelOffsetScaleByDistance=!1,this._compiledShaderPixelOffsetScaleByDistance=!1,this._shaderDistanceDisplayCondition=!1,this._compiledShaderDistanceDisplayCondition=!1,this._shaderDisableDepthDistance=!1,this._compiledShaderDisableDepthDistance=!1,this._shaderClampToGround=!1,this._compiledShaderClampToGround=!1,this._propertiesChanged=new Uint32Array(ae),this._maxSize=0,this._maxEyeOffset=0,this._maxScale=1,this._maxPixelOffset=0,this._allHorizontalCenter=!0,this._allVerticalCenter=!0,this._allSizedInMeters=!0,this._baseVolume=new s["a"],this._baseVolumeWC=new s["a"],this._baseVolume2D=new s["a"],this._boundingVolume=new s["a"],this._boundingVolumeDirty=!1,this._colorCommands=[],this.show=Object(h["a"])(e.show,!0),this.modelMatrix=m["a"].clone(Object(h["a"])(e.modelMatrix,m["a"].IDENTITY)),this._modelMatrix=m["a"].clone(m["a"].IDENTITY),this.debugShowBoundingVolume=Object(h["a"])(e.debugShowBoundingVolume,!1),this.debugShowTextureAtlas=Object(h["a"])(e.debugShowTextureAtlas,!1),this.blendOption=Object(h["a"])(e.blendOption,w["a"].OPAQUE_AND_TRANSLUCENT),this._blendOption=void 0,this._mode=L["a"].SCENE3D,this._buffersUsage=[A["a"].STATIC_DRAW,A["a"].STATIC_DRAW,A["a"].STATIC_DRAW,A["a"].STATIC_DRAW,A["a"].STATIC_DRAW,A["a"].STATIC_DRAW,A["a"].STATIC_DRAW,A["a"].STATIC_DRAW,A["a"].STATIC_DRAW,A["a"].STATIC_DRAW,A["a"].STATIC_DRAW,A["a"].STATIC_DRAW,A["a"].STATIC_DRAW,A["a"].STATIC_DRAW,A["a"].STATIC_DRAW,A["a"].STATIC_DRAW],this._highlightColor=c["a"].clone(c["a"].WHITE);const t=this;this._uniforms={u_atlas:function(){return t._textureAtlas.texture},u_highlightColor:function(){return t._highlightColor}};const i=this._scene;Object(d["a"])(i)&&Object(d["a"])(i.terrainProviderChanged)&&(this._removeCallbackFunc=i.terrainProviderChanged.addEventListener((function(){const e=this._billboards,t=e.length;for(let i=0;i<t;++i)Object(d["a"])(e[i])&&e[i]._updateClamping()}),this))}function ce(e){const t=e.length;for(let i=0;i<t;++i)e[i]&&e[i]._destroy()}function le(e){if(e._billboardsRemoved){e._billboardsRemoved=!1;const t=[],i=e._billboards,a=i.length;for(let e=0,s=0;e<a;++e){const a=i[e];Object(d["a"])(a)&&(a._index=s++,t.push(a))}e._billboards=t}}let he;function de(e){const t=16384;let i=e.cache.billboardCollection_indexBufferBatched;if(Object(d["a"])(i))return i;const a=6*t-6,s=new Uint16Array(a);for(let n=0,o=0;n<a;n+=6,o+=4)s[n]=o,s[n+1]=o+1,s[n+2]=o+2,s[n+3]=o+0,s[n+4]=o+2,s[n+5]=o+3;return i=g["a"].createIndexBuffer({context:e,typedArray:s,usage:A["a"].STATIC_DRAW,indexDatatype:b["a"].UNSIGNED_SHORT}),i.vertexArrayDestroyable=!1,e.cache.billboardCollection_indexBufferBatched=i,i}function _e(e){let t=e.cache.billboardCollection_indexBufferInstanced;return Object(d["a"])(t)||(t=g["a"].createIndexBuffer({context:e,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:A["a"].STATIC_DRAW,indexDatatype:b["a"].UNSIGNED_SHORT}),t.vertexArrayDestroyable=!1,e.cache.billboardCollection_indexBufferInstanced=t),t}function ue(e){let t=e.cache.billboardCollection_vertexBufferInstanced;return Object(d["a"])(t)||(t=g["a"].createVertexBuffer({context:e,typedArray:new Float32Array([0,0,1,0,1,1,0,1]),usage:A["a"].STATIC_DRAW}),t.vertexArrayDestroyable=!1,e.cache.billboardCollection_vertexBufferInstanced=t),t}function fe(e,t,i,a,s,n){const o=[{index:se.positionHighAndScale,componentsPerAttribute:4,componentDatatype:l["a"].FLOAT,usage:i[F]},{index:se.positionLowAndRotation,componentsPerAttribute:4,componentDatatype:l["a"].FLOAT,usage:i[F]},{index:se.compressedAttribute0,componentsPerAttribute:4,componentDatatype:l["a"].FLOAT,usage:i[V]},{index:se.compressedAttribute1,componentsPerAttribute:4,componentDatatype:l["a"].FLOAT,usage:i[Z]},{index:se.compressedAttribute2,componentsPerAttribute:4,componentDatatype:l["a"].FLOAT,usage:i[G]},{index:se.eyeOffset,componentsPerAttribute:4,componentDatatype:l["a"].FLOAT,usage:i[z]},{index:se.scaleByDistance,componentsPerAttribute:4,componentDatatype:l["a"].FLOAT,usage:i[K]},{index:se.pixelOffsetScaleByDistance,componentsPerAttribute:4,componentDatatype:l["a"].FLOAT,usage:i[J]},{index:se.compressedAttribute3,componentsPerAttribute:4,componentDatatype:l["a"].FLOAT,usage:i[$]},{index:se.textureCoordinateBoundsOrLabelTranslate,componentsPerAttribute:4,componentDatatype:l["a"].FLOAT,usage:i[te]}];a&&o.push({index:se.direction,componentsPerAttribute:2,componentDatatype:l["a"].FLOAT,vertexBuffer:ue(e)}),Object(d["a"])(s)&&o.push({index:se.a_batchId,componentsPerAttribute:1,componentDatatype:l["a"].FLOAT,bufferUsage:A["a"].STATIC_DRAW}),n&&o.push({index:se.sdf,componentsPerAttribute:2,componentDatatype:l["a"].FLOAT,usage:i[ie]});const r=a?t:4*t;return new C["a"](e,o,r,a)}Object.defineProperties(re.prototype,{length:{get:function(){return le(this),this._billboards.length}},textureAtlas:{get:function(){return this._textureAtlas},set:function(e){this._textureAtlas!==e&&(this._textureAtlas=this._destroyTextureAtlas&&this._textureAtlas&&this._textureAtlas.destroy(),this._textureAtlas=e,this._createVertexArray=!0)}},destroyTextureAtlas:{get:function(){return this._destroyTextureAtlas},set:function(e){this._destroyTextureAtlas=e}}}),re.prototype.add=function(e){const t=new v["a"](e,this);return t._index=this._billboards.length,this._billboards.push(t),this._createVertexArray=!0,t},re.prototype.remove=function(e){return!!this.contains(e)&&(this._billboards[e._index]=void 0,this._billboardsRemoved=!0,this._createVertexArray=!0,e._destroy(),!0)},re.prototype.removeAll=function(){ce(this._billboards),this._billboards=[],this._billboardsToUpdate=[],this._billboardsToUpdateIndex=0,this._billboardsRemoved=!1,this._createVertexArray=!0},re.prototype._updateBillboard=function(e,t){e._dirty||(this._billboardsToUpdate[this._billboardsToUpdateIndex++]=e),++this._propertiesChanged[t]},re.prototype.contains=function(e){return Object(d["a"])(e)&&e._billboardCollection===this},re.prototype.get=function(e){return r["a"].typeOf.number("index",e),le(this),this._billboards[e]},re.prototype.computeNewBuffersUsage=function(){const e=this._buffersUsage;let t=!1;const i=this._propertiesChanged;for(let a=0;a<ae;++a){const s=0===i[a]?A["a"].STATIC_DRAW:A["a"].STREAM_DRAW;t=t||e[a]!==s,e[a]=s}return t};const be=new f["a"];function pe(e,t,i,a,n){let o;const r=a[se.positionHighAndScale],c=a[se.positionLowAndRotation],l=n._getActualPosition();e._mode===L["a"].SCENE3D&&(s["a"].expand(e._baseVolume,l,e._baseVolume),e._boundingVolumeDirty=!0),f["a"].fromCartesian(l,be);const h=n.scale,d=n.rotation;0!==d&&(e._shaderRotation=!0),e._maxScale=Math.max(e._maxScale,h);const _=be.high,u=be.low;e._instanced?(o=n._index,r(o,_.x,_.y,_.z,h),c(o,u.x,u.y,u.z,d)):(o=4*n._index,r(o+0,_.x,_.y,_.z,h),r(o+1,_.x,_.y,_.z,h),r(o+2,_.x,_.y,_.z,h),r(o+3,_.x,_.y,_.z,h),c(o+0,u.x,u.y,u.z,d),c(o+1,u.x,u.y,u.z,d),c(o+2,u.x,u.y,u.z,d),c(o+3,u.x,u.y,u.z,d))}const me=new n["a"],Oe=32768,ge=65536,Ae=4096,De=256,ye=128,Te=32,Se=8,Ee=4,xe=1/256,Ce=0,Ie=2,Ne=3,ve=1;function Re(e,t,i,s,n){let o;const r=s[se.compressedAttribute0],c=n.pixelOffset,l=c.x,h=c.y,_=n._translate,f=_.x,b=_.y;e._maxPixelOffset=Math.max(e._maxPixelOffset,Math.abs(l+f),Math.abs(-h+b));const m=n.horizontalOrigin;let O=n._verticalOrigin,g=n.show&&n.clusterShow;0===n.color.alpha&&(g=!1),O===M["a"].BASELINE&&(O=M["a"].BOTTOM),e._allHorizontalCenter=e._allHorizontalCenter&&m===j["a"].CENTER,e._allVerticalCenter=e._allVerticalCenter&&O===M["a"].CENTER;let A=0,D=0,y=0,T=0;const S=n._imageIndex;if(-1!==S){const e=i[S];if(!Object(d["a"])(e))throw new u["a"]("Invalid billboard image index: "+S);A=e.x,D=e.y,y=e.width,T=e.height}const E=A+y,x=D+T;let C=Math.floor(p["a"].clamp(l,-Oe,Oe)+Oe)*ye;C+=(m+1)*Te,C+=(O+1)*Se,C+=(g?1:0)*Ee;let I=Math.floor(p["a"].clamp(h,-Oe,Oe)+Oe)*De,N=Math.floor(p["a"].clamp(f,-Oe,Oe)+Oe)*De;const v=(p["a"].clamp(b,-Oe,Oe)+Oe)*xe,R=Math.floor(v),w=Math.floor((v-R)*De);I+=R,N+=w,me.x=A,me.y=D;const P=a["a"].compressTextureCoordinates(me);me.x=E;const L=a["a"].compressTextureCoordinates(me);me.y=x;const B=a["a"].compressTextureCoordinates(me);me.x=A;const U=a["a"].compressTextureCoordinates(me);e._instanced?(o=n._index,r(o,C,I,N,P)):(o=4*n._index,r(o+0,C+Ce,I,N,P),r(o+1,C+Ie,I,N,L),r(o+2,C+Ne,I,N,B),r(o+3,C+ve,I,N,U))}function we(e,t,i,s,n){let r;const c=s[se.compressedAttribute1],l=n.alignedAxis;o["a"].equals(l,o["a"].ZERO)||(e._shaderAlignedAxis=!0);let _=0,f=1,b=1,m=1;const O=n.translucencyByDistance;Object(d["a"])(O)&&(_=O.near,f=O.nearValue,b=O.far,m=O.farValue,1===f&&1===m||(e._shaderTranslucencyByDistance=!0));let g=0;const A=n._imageIndex;if(-1!==A){const e=i[A];if(!Object(d["a"])(e))throw new u["a"]("Invalid billboard image index: "+A);g=e.width}const D=e._textureAtlas.texture.width,y=Math.round(Object(h["a"])(n.width,D*g));e._maxSize=Math.max(e._maxSize,y);let T=p["a"].clamp(y,0,ge),S=0;Math.abs(o["a"].magnitudeSquared(l)-1)<p["a"].EPSILON6&&(S=a["a"].octEncodeFloat(l)),f=p["a"].clamp(f,0,1),f=1===f?255:255*f|0,T=T*De+f,m=p["a"].clamp(m,0,1),m=1===m?255:255*m|0,S=S*De+m,e._instanced?(r=n._index,c(r,T,S,_,b)):(r=4*n._index,c(r+0,T,S,_,b),c(r+1,T,S,_,b),c(r+2,T,S,_,b),c(r+3,T,S,_,b))}function Pe(e,t,i,a,s){let n;const r=a[se.compressedAttribute2],l=s.color,_=Object(d["a"])(e._batchTable)?c["a"].WHITE:s.getPickId(t.context).color,f=s.sizeInMeters?1:0,b=Math.abs(o["a"].magnitudeSquared(s.alignedAxis)-1)<p["a"].EPSILON6?1:0;e._allSizedInMeters=e._allSizedInMeters&&1===f;let m=0;const O=s._imageIndex;if(-1!==O){const e=i[O];if(!Object(d["a"])(e))throw new u["a"]("Invalid billboard image index: "+O);m=e.height}const g=e._textureAtlas.texture.dimensions,A=Math.round(Object(h["a"])(s.height,g.y*m));e._maxSize=Math.max(e._maxSize,A);let D=Object(h["a"])(s._labelHorizontalOrigin,-2);D+=2;const y=A*Ee+D;let T=c["a"].floatToByte(l.red),S=c["a"].floatToByte(l.green),E=c["a"].floatToByte(l.blue);const x=T*ge+S*De+E;T=c["a"].floatToByte(_.red),S=c["a"].floatToByte(_.green),E=c["a"].floatToByte(_.blue);const C=T*ge+S*De+E;let I=c["a"].floatToByte(l.alpha)*ge+c["a"].floatToByte(_.alpha)*De;I+=2*f+b,e._instanced?(n=s._index,r(n,x,C,I,y)):(n=4*s._index,r(n+0,x,C,I,y),r(n+1,x,C,I,y),r(n+2,x,C,I,y),r(n+3,x,C,I,y))}function je(e,t,i,s,n){let o;const r=s[se.eyeOffset],c=n.eyeOffset;let l=c.z;if(n._heightReference!==P["a"].NONE&&(l*=1.005),e._maxEyeOffset=Math.max(e._maxEyeOffset,Math.abs(c.x),Math.abs(c.y),Math.abs(l)),e._instanced){let e=0,t=0;const s=n._imageIndex;if(-1!==s){const a=i[s];if(!Object(d["a"])(a))throw new u["a"]("Invalid billboard image index: "+s);e=a.width,t=a.height}me.x=e,me.y=t;const h=a["a"].compressTextureCoordinates(me);o=n._index,r(o,c.x,c.y,l,h)}else o=4*n._index,r(o+0,c.x,c.y,l,0),r(o+1,c.x,c.y,l,0),r(o+2,c.x,c.y,l,0),r(o+3,c.x,c.y,l,0)}function Le(e,t,i,a,s){let n;const o=a[se.scaleByDistance];let r=0,c=1,l=1,h=1;const _=s.scaleByDistance;Object(d["a"])(_)&&(r=_.near,c=_.nearValue,l=_.far,h=_.farValue,1===c&&1===h||(e._shaderScaleByDistance=!0)),e._instanced?(n=s._index,o(n,r,c,l,h)):(n=4*s._index,o(n+0,r,c,l,h),o(n+1,r,c,l,h),o(n+2,r,c,l,h),o(n+3,r,c,l,h))}function Be(e,t,i,a,s){let n;const o=a[se.pixelOffsetScaleByDistance];let r=0,c=1,l=1,h=1;const _=s.pixelOffsetScaleByDistance;Object(d["a"])(_)&&(r=_.near,c=_.nearValue,l=_.far,h=_.farValue,1===c&&1===h||(e._shaderPixelOffsetScaleByDistance=!0)),e._instanced?(n=s._index,o(n,r,c,l,h)):(n=4*s._index,o(n+0,r,c,l,h),o(n+1,r,c,l,h),o(n+2,r,c,l,h),o(n+3,r,c,l,h))}function Ue(e,t,i,a,s){let n;const o=a[se.compressedAttribute3];let r=0,c=Number.MAX_VALUE;const l=s.distanceDisplayCondition;Object(d["a"])(l)&&(r=l.near,c=l.far,r*=r,c*=c,e._shaderDistanceDisplayCondition=!0);let _=s.disableDepthTestDistance;const f=s.heightReference===P["a"].CLAMP_TO_GROUND&&t.context.depthTexture;let b,m;if(Object(d["a"])(_)||(_=f?5e3:0),_*=_,(f||_>0)&&(e._shaderDisableDepthDistance=!0,_===Number.POSITIVE_INFINITY&&(_=-1)),Object(d["a"])(s._labelDimensions))m=s._labelDimensions.x,b=s._labelDimensions.y;else{let t=0,a=0;const n=s._imageIndex;if(-1!==n){const e=i[n];if(!Object(d["a"])(e))throw new u["a"]("Invalid billboard image index: "+n);t=e.height,a=e.width}b=Math.round(Object(h["a"])(s.height,e._textureAtlas.texture.dimensions.y*t));const o=e._textureAtlas.texture.width;m=Math.round(Object(h["a"])(s.width,o*a))}const O=Math.floor(p["a"].clamp(m,0,Ae)),g=Math.floor(p["a"].clamp(b,0,Ae)),A=O*Ae+g;e._instanced?(n=s._index,o(n,r,c,_,A)):(n=4*s._index,o(n+0,r,c,_,A),o(n+1,r,c,_,A),o(n+2,r,c,_,A),o(n+3,r,c,_,A))}function Me(e,t,i,a,s){if(s.heightReference===P["a"].CLAMP_TO_GROUND){const i=e._scene,a=t.context,s=t.globeTranslucencyState.translucent,n=Object(d["a"])(i.globe)&&i.globe.depthTestAgainstTerrain;e._shaderClampToGround=a.depthTexture&&!s&&n}let n;const o=a[se.textureCoordinateBoundsOrLabelTranslate];if(D["a"].maximumVertexTextureImageUnits>0){let t=0,i=0;return Object(d["a"])(s._labelTranslate)&&(t=s._labelTranslate.x,i=s._labelTranslate.y),void(e._instanced?(n=s._index,o(n,t,i,0,0)):(n=4*s._index,o(n+0,t,i,0,0),o(n+1,t,i,0,0),o(n+2,t,i,0,0),o(n+3,t,i,0,0)))}let r=0,c=0,l=0,h=0;const _=s._imageIndex;if(-1!==_){const e=i[_];if(!Object(d["a"])(e))throw new u["a"]("Invalid billboard image index: "+_);r=e.x,c=e.y,l=e.width,h=e.height}const f=r+l,b=c+h;e._instanced?(n=s._index,o(n,r,c,f,b)):(n=4*s._index,o(n+0,r,c,f,b),o(n+1,r,c,f,b),o(n+2,r,c,f,b),o(n+3,r,c,f,b))}function He(e,t,i,a,s){if(!Object(d["a"])(e._batchTable))return;const n=a[se.a_batchId],o=s._batchIndex;let r;e._instanced?(r=s._index,n(r,o)):(r=4*s._index,n(r+0,o),n(r+1,o),n(r+2,o),n(r+3,o))}function Fe(e,t,i,a,s){if(!e._sdf)return;let n;const o=a[se.sdf],r=s.outlineColor,l=s.outlineWidth,h=c["a"].floatToByte(r.red),d=c["a"].floatToByte(r.green),_=c["a"].floatToByte(r.blue),u=h*ge+d*De+_,f=l/B["a"].RADIUS,b=c["a"].floatToByte(r.alpha)*ge+c["a"].floatToByte(f)*De;e._instanced?(n=s._index,o(n,u,b)):(n=4*s._index,o(n+0,u+Ce,b),o(n+1,u+Ie,b),o(n+2,u+Ne,b),o(n+3,u+ve,b))}function Ve(e,t,i,a,s){pe(e,t,i,a,s),Re(e,t,i,a,s),we(e,t,i,a,s),Pe(e,t,i,a,s),je(e,t,i,a,s),Le(e,t,i,a,s),Be(e,t,i,a,s),Ue(e,t,i,a,s),Me(e,t,i,a,s),He(e,t,i,a,s),Fe(e,t,i,a,s)}function ze(e,t,i,a,n,o){let r;a.mode===L["a"].SCENE3D?(r=e._baseVolume,e._boundingVolumeDirty=!0):r=e._baseVolume2D;const c=[];for(let l=0;l<i;++l){const e=t[l],i=e.position,h=v["a"]._computeActualPosition(e,i,a,n);Object(d["a"])(h)&&(e._setActualPosition(h),o?c.push(h):s["a"].expand(r,h,r))}o&&s["a"].fromPoints(c,r)}function qe(e,t){const i=t.mode,a=e._billboards,s=e._billboardsToUpdate,n=e._modelMatrix;e._createVertexArray||e._mode!==i||i!==L["a"].SCENE3D&&!m["a"].equals(n,e.modelMatrix)?(e._mode=i,m["a"].clone(e.modelMatrix,n),e._createVertexArray=!0,i!==L["a"].SCENE3D&&i!==L["a"].SCENE2D&&i!==L["a"].COLUMBUS_VIEW||ze(e,a,a.length,t,n,!0)):i===L["a"].MORPHING?ze(e,a,a.length,t,n,!0):i!==L["a"].SCENE2D&&i!==L["a"].COLUMBUS_VIEW||ze(e,s,e._billboardsToUpdateIndex,t,n,!1)}function ke(e,t,i){let a=1;e._allSizedInMeters&&0===e._maxPixelOffset||(a=t.camera.getPixelSize(i,t.context.drawingBufferWidth,t.context.drawingBufferHeight));let s=a*e._maxScale*e._maxSize*2;e._allHorizontalCenter&&e._allVerticalCenter&&(s*=.5);const n=a*e._maxPixelOffset+e._maxEyeOffset;i.radius+=s+n}function We(e,t){const i="uniform sampler2D billboard_texture; \nvarying vec2 v_textureCoordinates; \nvoid main() \n{ \n    gl_FragColor = texture2D(billboard_texture, v_textureCoordinates); \n} \n",a=t.createViewportQuadCommand(i,{uniformMap:{billboard_texture:function(){return e._textureAtlas.texture}}});return a.pass=T["a"].OVERLAY,a}const Xe=[];re.prototype.update=function(e){if(le(this),!this.show)return;let t=this._billboards,i=t.length;const a=e.context;this._instanced=a.instancedArrays,se=this._instanced?oe:ne,he=this._instanced?_e:de;let n=this._textureAtlas;if(!Object(d["a"])(n)){n=this._textureAtlas=new U["a"]({context:a});for(let e=0;e<i;++e)t[e]._loadImage()}const o=n.textureCoordinates;if(0===o.length)return;qe(this,e),t=this._billboards,i=t.length;const r=this._billboardsToUpdate,c=this._billboardsToUpdateIndex,l=this._propertiesChanged,h=n.guid,_=this._createVertexArray||this._textureAtlasGUID!==h;let u;this._textureAtlasGUID=h;const f=e.passes,b=f.pick;if(_||!b&&this.computeNewBuffersUsage()){this._createVertexArray=!1;for(let e=0;e<ae;++e)l[e]=0;if(this._vaf=this._vaf&&this._vaf.destroy(),i>0){this._vaf=fe(a,i,this._buffersUsage,this._instanced,this._batchTable,this._sdf),u=this._vaf.writers;for(let t=0;t<i;++t){const i=this._billboards[t];i._dirty=!1,Ve(this,e,o,u,i)}this._vaf.commit(he(a))}this._billboardsToUpdateIndex=0}else if(c>0){const t=Xe;t.length=0,(l[F]||l[Y]||l[W])&&t.push(pe),(l[X]||l[V]||l[q]||l[k]||l[H])&&(t.push(Re),this._instanced&&t.push(je)),(l[X]||l[Q]||l[Z])&&(t.push(we),t.push(Pe)),(l[X]||l[G])&&t.push(Pe),l[z]&&t.push(je),l[K]&&t.push(Le),l[J]&&t.push(Be),(l[$]||l[ee]||l[X]||l[F])&&t.push(Ue),(l[X]||l[F])&&t.push(Me),l[ie]&&t.push(Fe);const s=t.length;if(u=this._vaf.writers,c/i>.1){for(let i=0;i<c;++i){const a=r[i];a._dirty=!1;for(let i=0;i<s;++i)t[i](this,e,o,u,a)}this._vaf.commit(he(a))}else{for(let i=0;i<c;++i){const a=r[i];a._dirty=!1;for(let i=0;i<s;++i)t[i](this,e,o,u,a);this._instanced?this._vaf.subCommit(a._index,1):this._vaf.subCommit(4*a._index,4)}this._vaf.endSubCommits()}this._billboardsToUpdateIndex=0}if(c>1.5*i&&(r.length=i),!Object(d["a"])(this._vaf)||!Object(d["a"])(this._vaf.va))return;let p;this._boundingVolumeDirty&&(this._boundingVolumeDirty=!1,s["a"].transform(this._baseVolume,this.modelMatrix,this._baseVolumeWC));let g=m["a"].IDENTITY;e.mode===L["a"].SCENE3D?(g=this.modelMatrix,p=s["a"].clone(this._baseVolumeWC,this._boundingVolume)):p=s["a"].clone(this._baseVolume2D,this._boundingVolume),ke(this,e,p);const A=this._blendOption!==this.blendOption;if(this._blendOption=this.blendOption,A){this._blendOption===w["a"].OPAQUE||this._blendOption===w["a"].OPAQUE_AND_TRANSLUCENT?this._rsOpaque=S["a"].fromCache({depthTest:{enabled:!0,func:O["a"].LESS},depthMask:!0}):this._rsOpaque=void 0;const e=this._blendOption===w["a"].TRANSLUCENT;this._blendOption===w["a"].TRANSLUCENT||this._blendOption===w["a"].OPAQUE_AND_TRANSLUCENT?this._rsTranslucent=S["a"].fromCache({depthTest:{enabled:!0,func:e?O["a"].LEQUAL:O["a"].LESS},depthMask:e,blending:R["a"].ALPHA_BLEND}):this._rsTranslucent=void 0}let C,v,P,j,M;this._shaderDisableDepthDistance=this._shaderDisableDepthDistance||0!==e.minimumDisableDepthTestDistance;const te=D["a"].maximumVertexTextureImageUnits>0;if(A||this._shaderRotation!==this._compiledShaderRotation||this._shaderAlignedAxis!==this._compiledShaderAlignedAxis||this._shaderScaleByDistance!==this._compiledShaderScaleByDistance||this._shaderTranslucencyByDistance!==this._compiledShaderTranslucencyByDistance||this._shaderPixelOffsetScaleByDistance!==this._compiledShaderPixelOffsetScaleByDistance||this._shaderDistanceDisplayCondition!==this._compiledShaderDistanceDisplayCondition||this._shaderDisableDepthDistance!==this._compiledShaderDisableDepthDistance||this._shaderClampToGround!==this._compiledShaderClampToGround||this._sdf!==this._compiledSDF){C=N["a"],v=I["a"],M=[],Object(d["a"])(this._batchTable)&&(M.push("VECTOR_TILE"),C=this._batchTable.getVertexShaderCallback(!1,"a_batchId",void 0)(C),v=this._batchTable.getFragmentShaderCallback(!1,void 0)(v)),P=new x["a"]({defines:M,sources:[C]}),this._instanced&&P.defines.push("INSTANCED"),this._shaderRotation&&P.defines.push("ROTATION"),this._shaderAlignedAxis&&P.defines.push("ALIGNED_AXIS"),this._shaderScaleByDistance&&P.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&P.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderPixelOffsetScaleByDistance&&P.defines.push("EYE_DISTANCE_PIXEL_OFFSET"),this._shaderDistanceDisplayCondition&&P.defines.push("DISTANCE_DISPLAY_CONDITION"),this._shaderDisableDepthDistance&&P.defines.push("DISABLE_DEPTH_DISTANCE"),this._shaderClampToGround&&(te?P.defines.push("VERTEX_DEPTH_CHECK"):P.defines.push("FRAGMENT_DEPTH_CHECK"));const e=1-B["a"].CUTOFF;this._sdf&&P.defines.push("SDF");const t=Object(d["a"])(this._batchTable)?"VECTOR_TILE":"";this._blendOption===w["a"].OPAQUE_AND_TRANSLUCENT&&(j=new x["a"]({defines:["OPAQUE",t],sources:[v]}),this._shaderClampToGround&&(te?j.defines.push("VERTEX_DEPTH_CHECK"):j.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(j.defines.push("SDF"),j.defines.push("SDF_EDGE "+e)),this._sp=E["a"].replaceCache({context:a,shaderProgram:this._sp,vertexShaderSource:P,fragmentShaderSource:j,attributeLocations:se}),j=new x["a"]({defines:["TRANSLUCENT",t],sources:[v]}),this._shaderClampToGround&&(te?j.defines.push("VERTEX_DEPTH_CHECK"):j.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(j.defines.push("SDF"),j.defines.push("SDF_EDGE "+e)),this._spTranslucent=E["a"].replaceCache({context:a,shaderProgram:this._spTranslucent,vertexShaderSource:P,fragmentShaderSource:j,attributeLocations:se})),this._blendOption===w["a"].OPAQUE&&(j=new x["a"]({defines:[t],sources:[v]}),this._shaderClampToGround&&(te?j.defines.push("VERTEX_DEPTH_CHECK"):j.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(j.defines.push("SDF"),j.defines.push("SDF_EDGE "+e)),this._sp=E["a"].replaceCache({context:a,shaderProgram:this._sp,vertexShaderSource:P,fragmentShaderSource:j,attributeLocations:se})),this._blendOption===w["a"].TRANSLUCENT&&(j=new x["a"]({defines:[t],sources:[v]}),this._shaderClampToGround&&(te?j.defines.push("VERTEX_DEPTH_CHECK"):j.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(j.defines.push("SDF"),j.defines.push("SDF_EDGE "+e)),this._spTranslucent=E["a"].replaceCache({context:a,shaderProgram:this._spTranslucent,vertexShaderSource:P,fragmentShaderSource:j,attributeLocations:se})),this._compiledShaderRotation=this._shaderRotation,this._compiledShaderAlignedAxis=this._shaderAlignedAxis,this._compiledShaderScaleByDistance=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistance=this._shaderTranslucencyByDistance,this._compiledShaderPixelOffsetScaleByDistance=this._shaderPixelOffsetScaleByDistance,this._compiledShaderDistanceDisplayCondition=this._shaderDistanceDisplayCondition,this._compiledShaderDisableDepthDistance=this._shaderDisableDepthDistance,this._compiledShaderClampToGround=this._shaderClampToGround,this._compiledSDF=this._sdf}const re=e.commandList;if(f.render||f.pick){const t=this._colorCommands,a=this._blendOption===w["a"].OPAQUE,s=this._blendOption===w["a"].OPAQUE_AND_TRANSLUCENT,n=this._vaf.va,o=n.length;let r,c=this._uniforms;Object(d["a"])(this._batchTable)?(c=this._batchTable.getUniformMapCallback()(c),r=this._batchTable.getPickId()):r="v_pickColor",t.length=o;const l=s?2*o:o;for(let e=0;e<l;++e){let o=t[e];Object(d["a"])(o)||(o=t[e]=new y["a"]);const l=a||s&&e%2===0;o.pass=l||!s?T["a"].OPAQUE:T["a"].TRANSLUCENT,o.owner=this;const h=s?Math.floor(e/2):e;o.boundingVolume=p,o.modelMatrix=g,o.count=n[h].indicesCount,o.shaderProgram=l?this._sp:this._spTranslucent,o.uniformMap=c,o.vertexArray=n[h].va,o.renderState=l?this._rsOpaque:this._rsTranslucent,o.debugShowBoundingVolume=this.debugShowBoundingVolume,o.pickId=r,this._instanced&&(o.count=6,o.instanceCount=i),re.push(o)}this.debugShowTextureAtlas&&(Object(d["a"])(this.debugCommand)||(this.debugCommand=We(this,e.context)),re.push(this.debugCommand))}},re.prototype.isDestroyed=function(){return!1},re.prototype.destroy=function(){return Object(d["a"])(this._removeCallbackFunc)&&(this._removeCallbackFunc(),this._removeCallbackFunc=void 0),this._textureAtlas=this._destroyTextureAtlas&&this._textureAtlas&&this._textureAtlas.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spTranslucent=this._spTranslucent&&this._spTranslucent.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),ce(this._billboards),Object(_["a"])(this)},t["a"]=re},bbc8:function(e,t,i){"use strict";var a=i("6af0"),s=i("85b2"),n=i("dde0"),o=i("6b82"),r=i("8d54"),c=i("ae9b"),l=i("4051"),h=i("0b4a"),d=i("1a5d"),_=i("c937"),u=i("e2a6"),f=i("aecc"),b=i("722e"),p=i("d05a"),m=i("9f38"),O=i("3522"),g=i("2a50"),A=i("dc6c"),D=i("6a98"),y=i("c9db");function T(e,t){if(e=Object(d["a"])(e,d["a"].EMPTY_OBJECT),Object(_["a"])(e.disableDepthTestDistance)&&e.disableDepthTestDistance<0)throw new u["a"]("disableDepthTestDistance must be greater than or equal to 0.0.");let i=e.translucencyByDistance,a=e.pixelOffsetScaleByDistance,o=e.scaleByDistance,r=e.distanceDisplayCondition;if(Object(_["a"])(i)){if(i.far<=i.near)throw new u["a"]("translucencyByDistance.far must be greater than translucencyByDistance.near.");i=p["a"].clone(i)}if(Object(_["a"])(a)){if(a.far<=a.near)throw new u["a"]("pixelOffsetScaleByDistance.far must be greater than pixelOffsetScaleByDistance.near.");a=p["a"].clone(a)}if(Object(_["a"])(o)){if(o.far<=o.near)throw new u["a"]("scaleByDistance.far must be greater than scaleByDistance.near.");o=p["a"].clone(o)}if(Object(_["a"])(r)){if(r.far<=r.near)throw new u["a"]("distanceDisplayCondition.far must be greater than distanceDisplayCondition.near.");r=f["a"].clone(r)}this._show=Object(d["a"])(e.show,!0),this._position=n["a"].clone(Object(d["a"])(e.position,n["a"].ZERO)),this._actualPosition=n["a"].clone(this._position),this._pixelOffset=s["a"].clone(Object(d["a"])(e.pixelOffset,s["a"].ZERO)),this._translate=new s["a"](0,0),this._eyeOffset=n["a"].clone(Object(d["a"])(e.eyeOffset,n["a"].ZERO)),this._heightReference=Object(d["a"])(e.heightReference,O["a"].NONE),this._verticalOrigin=Object(d["a"])(e.verticalOrigin,y["a"].CENTER),this._horizontalOrigin=Object(d["a"])(e.horizontalOrigin,g["a"].CENTER),this._scale=Object(d["a"])(e.scale,1),this._color=l["a"].clone(Object(d["a"])(e.color,l["a"].WHITE)),this._rotation=Object(d["a"])(e.rotation,0),this._alignedAxis=n["a"].clone(Object(d["a"])(e.alignedAxis,n["a"].ZERO)),this._width=e.width,this._height=e.height,this._scaleByDistance=o,this._translucencyByDistance=i,this._pixelOffsetScaleByDistance=a,this._sizeInMeters=Object(d["a"])(e.sizeInMeters,!1),this._distanceDisplayCondition=r,this._disableDepthTestDistance=e.disableDepthTestDistance,this._id=e.id,this._collection=Object(d["a"])(e.collection,t),this._pickId=void 0,this._pickPrimitive=Object(d["a"])(e._pickPrimitive,this),this._billboardCollection=t,this._dirty=!1,this._index=-1,this._batchIndex=void 0,this._imageIndex=-1,this._imageIndexPromise=void 0,this._imageId=void 0,this._image=void 0,this._imageSubRegion=void 0,this._imageWidth=void 0,this._imageHeight=void 0,this._labelDimensions=void 0,this._labelHorizontalOrigin=void 0,this._labelTranslate=void 0;const c=e.image;let b=e.imageId;Object(_["a"])(c)&&(Object(_["a"])(b)||(b="string"===typeof c?c:Object(_["a"])(c.src)?c.src:Object(h["a"])()),this._imageId=b,this._image=c),Object(_["a"])(e.imageSubRegion)&&(this._imageId=b,this._imageSubRegion=e.imageSubRegion),Object(_["a"])(this._billboardCollection._textureAtlas)&&this._loadImage(),this._actualClampedPosition=void 0,this._removeCallbackFunc=void 0,this._mode=A["a"].SCENE3D,this._clusterShow=!0,this._outlineColor=l["a"].clone(Object(d["a"])(e.outlineColor,l["a"].BLACK)),this._outlineWidth=Object(d["a"])(e.outlineWidth,0),this._updateClamping()}const S=T.SHOW_INDEX=0,E=T.POSITION_INDEX=1,x=T.PIXEL_OFFSET_INDEX=2,C=T.EYE_OFFSET_INDEX=3,I=T.HORIZONTAL_ORIGIN_INDEX=4,N=T.VERTICAL_ORIGIN_INDEX=5,v=T.SCALE_INDEX=6,R=T.IMAGE_INDEX_INDEX=7,w=T.COLOR_INDEX=8,P=T.ROTATION_INDEX=9,j=T.ALIGNED_AXIS_INDEX=10,L=T.SCALE_BY_DISTANCE_INDEX=11,B=T.TRANSLUCENCY_BY_DISTANCE_INDEX=12,U=T.PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX=13,M=T.DISTANCE_DISPLAY_CONDITION=14,H=T.DISABLE_DEPTH_DISTANCE=15;T.TEXTURE_COORDINATE_BOUNDS=16;const F=T.SDF_INDEX=17;function V(e,t){const i=e._billboardCollection;Object(_["a"])(i)&&(i._updateBillboard(e,t),e._dirty=!0)}T.NUMBER_OF_PROPERTIES=18,Object.defineProperties(T.prototype,{show:{get:function(){return this._show},set:function(e){c["a"].typeOf.bool("value",e),this._show!==e&&(this._show=e,V(this,S))}},position:{get:function(){return this._position},set:function(e){c["a"].typeOf.object("value",e);const t=this._position;n["a"].equals(t,e)||(n["a"].clone(e,t),n["a"].clone(e,this._actualPosition),this._updateClamping(),V(this,E))}},heightReference:{get:function(){return this._heightReference},set:function(e){c["a"].typeOf.number("value",e);const t=this._heightReference;e!==t&&(this._heightReference=e,this._updateClamping(),V(this,E))}},pixelOffset:{get:function(){return this._pixelOffset},set:function(e){c["a"].typeOf.object("value",e);const t=this._pixelOffset;s["a"].equals(t,e)||(s["a"].clone(e,t),V(this,x))}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){if(Object(_["a"])(e)&&(c["a"].typeOf.object("value",e),e.far<=e.near))throw new u["a"]("far distance must be greater than near distance.");const t=this._scaleByDistance;p["a"].equals(t,e)||(this._scaleByDistance=p["a"].clone(e,t),V(this,L))}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){if(Object(_["a"])(e)&&(c["a"].typeOf.object("value",e),e.far<=e.near))throw new u["a"]("far distance must be greater than near distance.");const t=this._translucencyByDistance;p["a"].equals(t,e)||(this._translucencyByDistance=p["a"].clone(e,t),V(this,B))}},pixelOffsetScaleByDistance:{get:function(){return this._pixelOffsetScaleByDistance},set:function(e){if(Object(_["a"])(e)&&(c["a"].typeOf.object("value",e),e.far<=e.near))throw new u["a"]("far distance must be greater than near distance.");const t=this._pixelOffsetScaleByDistance;p["a"].equals(t,e)||(this._pixelOffsetScaleByDistance=p["a"].clone(e,t),V(this,U))}},eyeOffset:{get:function(){return this._eyeOffset},set:function(e){c["a"].typeOf.object("value",e);const t=this._eyeOffset;n["a"].equals(t,e)||(n["a"].clone(e,t),V(this,C))}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(e){c["a"].typeOf.number("value",e),this._horizontalOrigin!==e&&(this._horizontalOrigin=e,V(this,I))}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(e){c["a"].typeOf.number("value",e),this._verticalOrigin!==e&&(this._verticalOrigin=e,V(this,N))}},scale:{get:function(){return this._scale},set:function(e){c["a"].typeOf.number("value",e),this._scale!==e&&(this._scale=e,V(this,v))}},color:{get:function(){return this._color},set:function(e){c["a"].typeOf.object("value",e);const t=this._color;l["a"].equals(t,e)||(l["a"].clone(e,t),V(this,w))}},rotation:{get:function(){return this._rotation},set:function(e){c["a"].typeOf.number("value",e),this._rotation!==e&&(this._rotation=e,V(this,P))}},alignedAxis:{get:function(){return this._alignedAxis},set:function(e){c["a"].typeOf.object("value",e);const t=this._alignedAxis;n["a"].equals(t,e)||(n["a"].clone(e,t),V(this,j))}},width:{get:function(){return Object(d["a"])(this._width,this._imageWidth)},set:function(e){Object(_["a"])(e)&&c["a"].typeOf.number("value",e),this._width!==e&&(this._width=e,V(this,R))}},height:{get:function(){return Object(d["a"])(this._height,this._imageHeight)},set:function(e){Object(_["a"])(e)&&c["a"].typeOf.number("value",e),this._height!==e&&(this._height=e,V(this,R))}},sizeInMeters:{get:function(){return this._sizeInMeters},set:function(e){c["a"].typeOf.bool("value",e),this._sizeInMeters!==e&&(this._sizeInMeters=e,V(this,w))}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if(!f["a"].equals(e,this._distanceDisplayCondition)){if(Object(_["a"])(e)&&(c["a"].typeOf.object("value",e),e.far<=e.near))throw new u["a"]("far distance must be greater than near distance.");this._distanceDisplayCondition=f["a"].clone(e,this._distanceDisplayCondition),V(this,M)}}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){if(Object(_["a"])(e)&&(c["a"].typeOf.number("value",e),e<0))throw new u["a"]("disableDepthTestDistance must be greater than or equal to 0.0.");this._disableDepthTestDistance!==e&&(this._disableDepthTestDistance=e,V(this,H))}},id:{get:function(){return this._id},set:function(e){this._id=e,Object(_["a"])(this._pickId)&&(this._pickId.object.id=e)}},pickPrimitive:{get:function(){return this._pickPrimitive},set:function(e){this._pickPrimitive=e,Object(_["a"])(this._pickId)&&(this._pickId.object.primitive=e)}},pickId:{get:function(){return this._pickId}},image:{get:function(){return this._imageId},set:function(e){Object(_["a"])(e)?"string"===typeof e?this.setImage(e,e):e instanceof m["a"]?this.setImage(e.url,e):Object(_["a"])(e.src)?this.setImage(e.src,e):this.setImage(Object(h["a"])(),e):(this._imageIndex=-1,this._imageSubRegion=void 0,this._imageId=void 0,this._image=void 0,this._imageIndexPromise=void 0,V(this,R))}},ready:{get:function(){return-1!==this._imageIndex}},_clampedPosition:{get:function(){return this._actualClampedPosition},set:function(e){this._actualClampedPosition=n["a"].clone(e,this._actualClampedPosition),V(this,E)}},clusterShow:{get:function(){return this._clusterShow},set:function(e){this._clusterShow!==e&&(this._clusterShow=e,V(this,S))}},outlineColor:{get:function(){return this._outlineColor},set:function(e){if(!Object(_["a"])(e))throw new u["a"]("value is required.");const t=this._outlineColor;l["a"].equals(t,e)||(l["a"].clone(e,t),V(this,F))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth!==e&&(this._outlineWidth=e,V(this,F))}}}),T.prototype.getPickId=function(e){return Object(_["a"])(this._pickId)||(this._pickId=e.createPickId({primitive:this._pickPrimitive,collection:this._collection,id:this._id})),this._pickId},T.prototype._updateClamping=function(){T._updateClamping(this._billboardCollection,this)};const z=new r["a"],q=new n["a"];T._updateClamping=function(e,t){const i=e._scene;if(!Object(_["a"])(i)||!Object(_["a"])(i.globe)){if(t._heightReference!==O["a"].NONE)throw new u["a"]("Height reference is not supported without a scene and globe.");return}const a=i.globe,s=a.ellipsoid,o=a._surface,c=i.frameState.mode,l=c!==t._mode;if(t._mode=c,(t._heightReference===O["a"].NONE||l)&&Object(_["a"])(t._removeCallbackFunc)&&(t._removeCallbackFunc(),t._removeCallbackFunc=void 0,t._clampedPosition=void 0),t._heightReference===O["a"].NONE||!Object(_["a"])(t._position))return;const h=s.cartesianToCartographic(t._position);if(!Object(_["a"])(h))return void(t._actualClampedPosition=void 0);function d(e){if(t._heightReference===O["a"].RELATIVE_TO_GROUND)if(t._mode===A["a"].SCENE3D){const t=s.cartesianToCartographic(e,z);t.height+=h.height,s.cartographicToCartesian(t,e)}else e.x+=h.height;t._clampedPosition=n["a"].clone(e,t._clampedPosition)}Object(_["a"])(t._removeCallbackFunc)&&t._removeCallbackFunc(),t._removeCallbackFunc=o.updateHeight(h,d),r["a"].clone(h,z);const f=a.getHeight(h);Object(_["a"])(f)&&(z.height=f),s.cartographicToCartesian(z,q),d(q)},T.prototype._loadImage=function(){const e=this._billboardCollection._textureAtlas,t=this._imageId,i=this._image,s=this._imageSubRegion;let n;if(Object(_["a"])(i)&&(n=e.addImage(t,i)),Object(_["a"])(s)&&(n=e.addSubRegion(t,s)),this._imageIndexPromise=n,!Object(_["a"])(n))return;const o=this;n.then((function(n){if(o._imageId!==t||o._image!==i||!a["a"].equals(o._imageSubRegion,s))return;const r=e.textureCoordinates[n];o._imageWidth=e.texture.width*r.width,o._imageHeight=e.texture.height*r.height,o._imageIndex=n,o._ready=!0,o._image=void 0,o._imageIndexPromise=void 0,V(o,R)})).catch((function(e){console.error("Error loading image for billboard: "+e),o._imageIndexPromise=void 0}))},T.prototype.setImage=function(e,t){if(!Object(_["a"])(e))throw new u["a"]("id is required.");if(!Object(_["a"])(t))throw new u["a"]("image is required.");this._imageId!==e&&(this._imageIndex=-1,this._imageSubRegion=void 0,this._imageId=e,this._image=t,Object(_["a"])(this._billboardCollection._textureAtlas)&&this._loadImage())},T.prototype.setImageSubRegion=function(e,t){if(!Object(_["a"])(e))throw new u["a"]("id is required.");if(!Object(_["a"])(t))throw new u["a"]("subRegion is required.");this._imageId===e&&a["a"].equals(this._imageSubRegion,t)||(this._imageIndex=-1,this._imageId=e,this._imageSubRegion=a["a"].clone(t),Object(_["a"])(this._billboardCollection._textureAtlas)&&this._loadImage())},T.prototype._setTranslate=function(e){if(!Object(_["a"])(e))throw new u["a"]("value is required.");const t=this._translate;s["a"].equals(t,e)||(s["a"].clone(e,t),V(this,x))},T.prototype._getActualPosition=function(){return Object(_["a"])(this._clampedPosition)?this._clampedPosition:this._actualPosition},T.prototype._setActualPosition=function(e){Object(_["a"])(this._clampedPosition)||n["a"].clone(e,this._actualPosition),V(this,E)};const k=new o["a"];T._computeActualPosition=function(e,t,i,a){return Object(_["a"])(e._clampedPosition)?(i.mode!==e._mode&&e._updateClamping(),e._clampedPosition):i.mode===A["a"].SCENE3D?t:(b["a"].multiplyByPoint(a,t,k),D["a"].computeActualWgs84Position(i,k))};const W=new n["a"];T._computeScreenSpacePosition=function(e,t,i,a,n,o){const r=b["a"].multiplyByPoint(e,t,W),c=D["a"].wgs84WithEyeOffsetToWindowCoordinates(n,r,i,o);if(Object(_["a"])(c))return s["a"].add(c,a,c),c};const X=new s["a"](0,0);T.prototype.computeScreenSpacePosition=function(e,t){const i=this._billboardCollection;if(Object(_["a"])(t)||(t=new s["a"]),!Object(_["a"])(i))throw new u["a"]("Billboard must be in a collection.  Was it removed?");if(!Object(_["a"])(e))throw new u["a"]("scene is required.");s["a"].clone(this._pixelOffset,X),s["a"].add(X,this._translate,X);let a=i.modelMatrix,n=this._position;if(Object(_["a"])(this._clampedPosition)&&(n=this._clampedPosition,e.mode!==A["a"].SCENE3D)){const t=e.mapProjection,i=t.ellipsoid,s=t.unproject(n,z);n=i.cartographicToCartesian(s,W),a=b["a"].IDENTITY}const o=T._computeScreenSpacePosition(a,n,this._eyeOffset,X,e,t);return o},T.getScreenSpaceBoundingBox=function(e,t,i){let s=e.width,n=e.height;const o=e.scale;s*=o,n*=o;let r=t.x;e.horizontalOrigin===g["a"].RIGHT?r-=s:e.horizontalOrigin===g["a"].CENTER&&(r-=.5*s);let c=t.y;return e.verticalOrigin===y["a"].BOTTOM||e.verticalOrigin===y["a"].BASELINE?c-=n:e.verticalOrigin===y["a"].CENTER&&(c-=.5*n),Object(_["a"])(i)||(i=new a["a"]),i.x=r,i.y=c,i.width=s,i.height=n,i},T.prototype.equals=function(e){return this===e||Object(_["a"])(e)&&this._id===e._id&&n["a"].equals(this._position,e._position)&&this._imageId===e._imageId&&this._show===e._show&&this._scale===e._scale&&this._verticalOrigin===e._verticalOrigin&&this._horizontalOrigin===e._horizontalOrigin&&this._heightReference===e._heightReference&&a["a"].equals(this._imageSubRegion,e._imageSubRegion)&&l["a"].equals(this._color,e._color)&&s["a"].equals(this._pixelOffset,e._pixelOffset)&&s["a"].equals(this._translate,e._translate)&&n["a"].equals(this._eyeOffset,e._eyeOffset)&&p["a"].equals(this._scaleByDistance,e._scaleByDistance)&&p["a"].equals(this._translucencyByDistance,e._translucencyByDistance)&&p["a"].equals(this._pixelOffsetScaleByDistance,e._pixelOffsetScaleByDistance)&&f["a"].equals(this._distanceDisplayCondition,e._distanceDisplayCondition)&&this._disableDepthTestDistance===e._disableDepthTestDistance},T.prototype._destroy=function(){Object(_["a"])(this._customData)&&(this._billboardCollection._scene.globe._surface.removeTileCustomData(this._customData),this._customData=void 0),Object(_["a"])(this._removeCallbackFunc)&&(this._removeCallbackFunc(),this._removeCallbackFunc=void 0),this.image=void 0,this._pickId=this._pickId&&this._pickId.destroy(),this._billboardCollection=void 0},t["a"]=T},c294:function(e,t,i){"use strict";var a=i("cedf");const s={ZERO:a["a"].ZERO,ONE:a["a"].ONE,SOURCE_COLOR:a["a"].SRC_COLOR,ONE_MINUS_SOURCE_COLOR:a["a"].ONE_MINUS_SRC_COLOR,DESTINATION_COLOR:a["a"].DST_COLOR,ONE_MINUS_DESTINATION_COLOR:a["a"].ONE_MINUS_DST_COLOR,SOURCE_ALPHA:a["a"].SRC_ALPHA,ONE_MINUS_SOURCE_ALPHA:a["a"].ONE_MINUS_SRC_ALPHA,DESTINATION_ALPHA:a["a"].DST_ALPHA,ONE_MINUS_DESTINATION_ALPHA:a["a"].ONE_MINUS_DST_ALPHA,CONSTANT_COLOR:a["a"].CONSTANT_COLOR,ONE_MINUS_CONSTANT_COLOR:a["a"].ONE_MINUS_CONSTANT_COLOR,CONSTANT_ALPHA:a["a"].CONSTANT_ALPHA,ONE_MINUS_CONSTANT_ALPHA:a["a"].ONE_MINUS_CONSTANT_ALPHA,SOURCE_ALPHA_SATURATE:a["a"].SRC_ALPHA_SATURATE};t["a"]=Object.freeze(s)},da23:function(e,t,i){"use strict";var a=i("dc3b"),s=i("c294");const n={DISABLED:Object.freeze({enabled:!1}),ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:a["a"].ADD,equationAlpha:a["a"].ADD,functionSourceRgb:s["a"].SOURCE_ALPHA,functionSourceAlpha:s["a"].ONE,functionDestinationRgb:s["a"].ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:s["a"].ONE_MINUS_SOURCE_ALPHA}),PRE_MULTIPLIED_ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:a["a"].ADD,equationAlpha:a["a"].ADD,functionSourceRgb:s["a"].ONE,functionSourceAlpha:s["a"].ONE,functionDestinationRgb:s["a"].ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:s["a"].ONE_MINUS_SOURCE_ALPHA}),ADDITIVE_BLEND:Object.freeze({enabled:!0,equationRgb:a["a"].ADD,equationAlpha:a["a"].ADD,functionSourceRgb:s["a"].SOURCE_ALPHA,functionSourceAlpha:s["a"].ONE,functionDestinationRgb:s["a"].ONE,functionDestinationAlpha:s["a"].ONE})};t["a"]=Object.freeze(n)},dc3b:function(e,t,i){"use strict";var a=i("cedf");const s={ADD:a["a"].FUNC_ADD,SUBTRACT:a["a"].FUNC_SUBTRACT,REVERSE_SUBTRACT:a["a"].FUNC_REVERSE_SUBTRACT,MIN:a["a"].MIN,MAX:a["a"].MAX};t["a"]=Object.freeze(s)},fc80:function(e,t,i){"use strict";const a={AERIAL:"Aerial",AERIAL_WITH_LABELS:"AerialWithLabels",AERIAL_WITH_LABELS_ON_DEMAND:"AerialWithLabelsOnDemand",ROAD:"Road",ROAD_ON_DEMAND:"RoadOnDemand",CANVAS_DARK:"CanvasDark",CANVAS_LIGHT:"CanvasLight",CANVAS_GRAY:"CanvasGray",ORDNANCE_SURVEY:"OrdnanceSurvey",COLLINS_BART:"CollinsBart"};t["a"]=Object.freeze(a)}}]);