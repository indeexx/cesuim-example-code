(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors~2b523c4c"],{"434f":function(e,t,n){"use strict";var i=n("c937"),r=n("e2a6");function o(e,t,n){this._name=t.name,this._id=n,this._uniformMap=e._uniformMaps[n],this._technique=void 0,this._program=void 0,this._values=void 0}Object.defineProperties(o.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}}}),o.prototype.setValue=function(e,t){if(!Object(i["a"])(e))throw new r["a"]("name is required.");const n="u_"+e,o=this._uniformMap.values[n];if(!Object(i["a"])(o))throw new r["a"]("name must match a parameter name in the material's technique that is targetable and not optimized out.");o.value=o.clone(t,o.value)},o.prototype.getValue=function(e){if(!Object(i["a"])(e))throw new r["a"]("name is required.");const t="u_"+e,n=this._uniformMap.values[t];if(Object(i["a"])(n))return n.value},t["a"]=o},8289:function(e,t,n){"use strict";var i=n("8656"),r=n("85b2"),o=n("dde0"),a=n("6b82"),s=n("44e9"),c=n("c937"),u=n("d70f"),f=n("d767"),d=n("722e"),l=n("1b9c"),h=n("e2aa"),m=n("cedf"),_=n("b3ce"),g=n("6fe4"),b=n("a47e"),p=n("c949"),O=n("c380"),w=n("77df");const y={updateForwardAxis:function(e){const t=e.gltf.extras.sourceVersion;(Object(c["a"])(t)&&"2.0"!==t||"2.0"!==y.getAssetVersion(e.gltf))&&(e._gltfForwardAxis=w["a"].X)},getAssetVersion:function(e){return Object(c["a"])(e.asset)&&Object(c["a"])(e.asset.version)?e.asset.version:"1.0"},splitIncompatibleMaterials:function(e){const t=e.accessors,n=e.materials,i={};return b["a"].mesh(e,(function(e){b["a"].meshPrimitive(e,(function(e){let r=e.material;const o=n[r],a=e.attributes.JOINTS_0;let u,f;if(Object(c["a"])(a)){const e=t[a];u=e.componentType,f=e.type}const d=Object(c["a"])(a)&&"VEC4"===f,l=Object(c["a"])(e.attributes.COLOR_0),h=Object(c["a"])(e.targets),m=Object(c["a"])(e.attributes.NORMAL),_=Object(c["a"])(e.attributes.TANGENT),b=Object(c["a"])(e.attributes.TEXCOORD_0),p=b&&Object(c["a"])(e.attributes.TEXCOORD_1),O=Object(c["a"])(e.extensions)&&Object(c["a"])(e.extensions.CESIUM_primitive_outline),w=i[r];if(Object(c["a"])(w)){if(w.skinning.skinned!==d||w.hasVertexColors!==l||w.hasMorphTargets!==h||w.hasNormals!==m||w.hasTangents!==_||w.hasTexCoords!==b||w.hasTexCoord1!==p||w.hasOutline!==O){const t=Object(s["a"])(o,!0);r=Object(g["a"])(n,t),e.material=r,i[r]={skinning:{skinned:d,componentType:u},hasVertexColors:l,hasMorphTargets:h,hasNormals:m,hasTangents:_,hasTexCoords:b,hasTexCoord1:p,hasOutline:O}}}else i[r]={skinning:{skinned:d,componentType:u},hasVertexColors:l,hasMorphTargets:h,hasNormals:m,hasTangents:_,hasTexCoords:b,hasTexCoord1:p,hasOutline:O}}))})),i},getShaderVariable:function(e){return"SCALAR"===e?"float":e.toLowerCase()},ModelState:{NEEDS_LOAD:0,LOADING:1,LOADED:2,FAILED:3},getFailedLoadFunction:function(e,t,n){return function(i){e._state=y.ModelState.FAILED;let r=`Failed to load ${t}: ${n}`;Object(c["a"])(i)&&(r+="\n"+i.message),e._readyPromise.reject(new h["a"](r))}},parseBuffers:function(e,t){const n=e._loadResources;b["a"].buffer(e.gltf,(function(i,r){if(Object(c["a"])(i.extras._pipeline.source))n.buffers[r]=i.extras._pipeline.source;else if(Object(c["a"])(t)){const o=e._resource.getDerivedResource({url:i.uri});++n.pendingBufferLoads,o.fetchArrayBuffer().then(t(e,r)).catch(y.getFailedLoadFunction(e,"buffer",o.url))}}))}},x=new o["a"],E=new o["a"];function T(e,t){return b["a"].techniqueAttribute(e,(function(e,n){if(e.semantic===t)return n}))}function L(e,t){const n=e.accessors,i=e.materials,r=e.extensions.KHR_techniques_webgl,o=r.techniques,a=r.programs,s=r.shaders,u=t.targets,f=t.attributes;for(const c in u)if(u.hasOwnProperty(c)){const e=u[c];for(const t in e)"extras"!==t&&(f[`${t}_${c}`]=e[t])}const d=i[t.material],l=o[d.extensions.KHR_techniques_webgl.technique],h=a[l.program],m=s[h.vertexShader];for(const _ in f)if(f.hasOwnProperty(_)&&!Object(c["a"])(T(l,_))){const e=f[_],t=n[e];let i=_.toLowerCase();"_"===i.charAt(0)&&(i=i.slice(1));const r="a_"+i;l.attributes[r]={semantic:_,type:t.componentType};const o=m.extras._pipeline;let a=o.source;a=`attribute ${y.getShaderVariable(t.type)} ${r};\n${a}`,o.source=a}}function v(e,t,n,i){return Object(p["a"])(e,"KHR_techniques_webgl")?function(e,t){if(e.semantic===n&&(!i||!Object(c["a"])(e.node)))return t}:function(e,r){const o=t.parameters[e];if(o.semantic===n&&(!i||!Object(c["a"])(o.node)))return r}}y.computeBoundingSphere=function(e){const t=e.gltf,n=t.nodes,r=t.meshes,a=t.scenes[t.scene].nodes,s=a.length,u=[],f=new o["a"](Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),l=new o["a"](-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let i=0;i<s;++i){let e=n[a[i]];e._transformToRoot=y.getTransform(e),u.push(e);while(u.length>0){e=u.pop();const i=e._transformToRoot,a=e.mesh;if(Object(c["a"])(a)){const e=r[a],n=e.primitives,s=n.length;for(let r=0;r<s;++r){const e=n[r].attributes.POSITION;if(Object(c["a"])(e)){const n=y.getAccessorMinMax(t,e);if(Object(c["a"])(n.min)&&Object(c["a"])(n.max)){const e=o["a"].fromArray(n.min,0,x),t=o["a"].fromArray(n.max,0,E);d["a"].multiplyByPoint(i,e,e),d["a"].multiplyByPoint(i,t,t),o["a"].minimumByComponent(f,e,f),o["a"].maximumByComponent(l,t,l)}}}}const s=e.children;if(Object(c["a"])(s)){const e=s.length;for(let t=0;t<e;++t){const e=n[s[t]];e._transformToRoot=y.getTransform(e),d["a"].multiplyTransformation(i,e._transformToRoot,e._transformToRoot),u.push(e)}}delete e._transformToRoot}}const h=i["a"].fromCornerPoints(f,l);return e._forwardAxis===w["a"].Z&&i["a"].transformWithoutScale(h,w["a"].Z_UP_TO_X_UP,h),e._upAxis===w["a"].Y?i["a"].transformWithoutScale(h,w["a"].Y_UP_TO_Z_UP,h):e._upAxis===w["a"].X&&i["a"].transformWithoutScale(h,w["a"].X_UP_TO_Z_UP,h),h},y.ensureSemanticExistence=function(e){return b["a"].mesh(e,(function(t){b["a"].meshPrimitive(t,(function(t){L(e,t)}))})),e},y.createAttributeLocations=function(e,t){const n={};let i=!1,r=1;if(b["a"].techniqueAttribute(e,(function(e,t){/pos/i.test(t)&&!i?(n[t]=0,i=!0):n[t]=r++})),Object(c["a"])(t))for(const o in t)t.hasOwnProperty(o)&&(n[o]=r++);return n},y.getAccessorMinMax=function(e,t){const n=e.accessors[t],i=n.extensions;let r=n.min,o=n.max;if(Object(c["a"])(i)){const e=i.WEB3D_quantized_attributes;Object(c["a"])(e)&&(r=e.decodedMin,o=e.decodedMax)}return{min:r,max:o}},y.getAttributeOrUniformBySemantic=function(e,t,n,i){return b["a"].technique(e,(function(r){if(Object(c["a"])(n)&&r.program!==n)return;const o=b["a"].techniqueAttribute(r,v(e,r,t,i));return Object(c["a"])(o)?o:b["a"].techniqueUniform(r,v(e,r,t,i))}))},y.getDiffuseAttributeOrUniform=function(e,t){let n=y.getAttributeOrUniformBySemantic(e,"COLOR_0",t);return Object(c["a"])(n)||(n=y.getAttributeOrUniformBySemantic(e,"_3DTILESDIFFUSE",t)),n};const A=new o["a"],C=new l["a"],M=new o["a"];function S(e,t,n){t+="(?!\\w)",t=new RegExp(t,"g");const i=e.search(t);return e.replace(t,(function(e,t){return i===t?e:n}))}function I(e,t){const n=e.accessors[t],i=n.extensions;if(Object(c["a"])(i))return i.WEB3D_quantized_attributes}function B(e,t,n){const i=t.material,r=e.materials[i];if(!Object(p["a"])(e,"KHR_techniques_webgl")||!Object(c["a"])(r.extensions)||!Object(c["a"])(r.extensions.KHR_techniques_webgl))return;const o=r.extensions.KHR_techniques_webgl.technique,a=e.extensions.KHR_techniques_webgl,s=a.techniques[o];return b["a"].techniqueAttribute(s,(function(e,t){const i=e.semantic;if(i===n)return t}))}function V(e){const t={value:e,clone:function(e,t){return e},func:function(){return t.value}};return t}function j(e){const t={value:r["a"].fromArray(e),clone:r["a"].clone,func:function(){return t.value}};return t}function D(e){const t={value:o["a"].fromArray(e),clone:o["a"].clone,func:function(){return t.value}};return t}function R(e){const t={value:a["a"].fromArray(e),clone:a["a"].clone,func:function(){return t.value}};return t}function P(e){const t={value:u["a"].fromColumnMajorArray(e),clone:u["a"].clone,func:function(){return t.value}};return t}function N(e){const t={value:f["a"].fromColumnMajorArray(e),clone:f["a"].clone,func:function(){return t.value}};return t}function z(e){const t={value:d["a"].fromColumnMajorArray(e),clone:d["a"].clone,func:function(){return t.value}};return t}function k(e,t,n){this._value=void 0,this._textureId=e.index,this._textures=t,this._defaultTexture=n}function U(e,t,n){const i=new k(e,t,n);return i.func=function(){return i.value},i}y.getTransform=function(e,t){return Object(c["a"])(e.matrix)?d["a"].fromColumnMajorArray(e.matrix,t):d["a"].fromTranslationQuaternionRotationScale(o["a"].fromArray(e.translation,0,A),l["a"].unpack(e.rotation,0,C),o["a"].fromArray(e.scale,0,M),t)},y.getUsedExtensions=function(e){const t=e.extensionsUsed,n={};if(Object(c["a"])(t)){const e=t.length;for(let i=0;i<e;i++){const e=t[i];n[e]=!0}}return n},y.getRequiredExtensions=function(e){const t=e.extensionsRequired,n={};if(Object(c["a"])(t)){const e=t.length;for(let i=0;i<e;i++){const e=t[i];n[e]=!0}}return n},y.supportedExtensions={AGI_articulations:!0,CESIUM_RTC:!0,EXT_texture_webp:!0,KHR_blend:!0,KHR_binary_glTF:!0,KHR_texture_basisu:!0,KHR_draco_mesh_compression:!0,KHR_materials_common:!0,KHR_techniques_webgl:!0,KHR_materials_unlit:!0,KHR_materials_pbrSpecularGlossiness:!0,KHR_texture_transform:!0,WEB3D_quantized_attributes:!0},y.checkSupportedExtensions=function(e,t){for(const n in e)if(e.hasOwnProperty(n)){if(!y.supportedExtensions[n])throw new h["a"]("Unsupported glTF Extension: "+n);if("EXT_texture_webp"===n&&!1===t)throw new h["a"]("Loaded model requires WebP but browser does not support it.")}},y.checkSupportedGlExtensions=function(e,t){if(Object(c["a"])(e)){const n=e.length;for(let i=0;i<n;i++){const n=e[i];if("OES_element_index_uint"!==n)throw new h["a"]("Unsupported WebGL Extension: "+n);if(!t.elementIndexUint)throw new h["a"]("OES_element_index_uint WebGL extension is not enabled.")}}},y.modifyShaderForDracoQuantizedAttributes=function(e,t,n,i){const r={};for(let o in i)if(i.hasOwnProperty(o)){const a=i[o],s=a.quantization;if(!Object(c["a"])(s))continue;const u=B(e,t,o);"_"===o.charAt(0)&&(o=o.substring(1));const f="gltf_u_dec_"+o.toLowerCase();if(!Object(c["a"])(r[f])){const e="gltf_decoded_"+o,t=u.replace("a_","gltf_a_dec_"),i=a.componentsPerAttribute;let r;n=S(n,u,t),r=s.octEncoded?"vec3":i>1?"vec"+i:"float",n=`${r} ${t};\n${n}`;const c=3===i&&"COLOR_0"===o;c&&(n=S(n,t,`vec4(${t}, 1.0)`));let d="";if(s.octEncoded){const i=f+"_rangeConstant";n=`uniform float ${i};\n${n}`,d=`\nvoid main() {\n    ${t} = czm_octDecode(${u}.xy, ${i}).zxy;\n    ${e}();\n}\n`}else{const i=f+"_normConstant",o=f+"_min";n=`uniform float ${i};\nuniform ${r} ${o};\n${n}`;const a=c?".xyz":"";d=`\nvoid main() {\n    ${t} = ${o} + ${u}${a} * ${i};\n    ${e}();\n}\n`}n=_["a"].replaceMain(n,e),n+=d}}return{shader:n}},y.modifyShaderForQuantizedAttributes=function(e,t,n){const i={},r=t.attributes;for(let o in r)if(r.hasOwnProperty(o)){const r=B(e,t,o),a=t.attributes[o];"_"===o.charAt(0)&&(o=o.substring(1));const s="gltf_u_dec_"+o.toLowerCase(),u=s+"_scale",f=s+"_translate";if(!Object(c["a"])(i[s])&&!Object(c["a"])(i[u])){const t=I(e,a);if(Object(c["a"])(t)){const e=t.decodeMatrix,a="gltf_decoded_"+o,c=r.replace("a_","gltf_a_dec_"),d=Math.floor(Math.sqrt(e.length));let l;n=S(n,r,c),l=d>2?"vec"+(d-1):"float",n=`${l} ${c};\n${n}`;let h="";5===d?(n=`uniform mat4 ${u};\n${n}`,n=`uniform vec4 ${f};\n${n}`,h=`\nvoid main() {\n    ${c} = ${u} * ${r} + ${f};\n    ${a}();\n}\n`,i[u]={mat:4},i[f]={vec:4}):(n=`uniform mat${d} ${s};\n${n}`,h=`\nvoid main() {\n    ${c} = ${l}(${s} * vec${d}(${r},1.0));\n    ${a}();\n}\n`,i[s]={mat:d}),n=_["a"].replaceMain(n,a),n+=h}}}return{shader:n,uniforms:i}},Object.defineProperties(k.prototype,{value:{get:function(){if(!Object(c["a"])(this._value)){const e=this._textures[this._textureId];if(!Object(c["a"])(e))return this._defaultTexture;this._value=e}return this._value},set:function(e){this._value=e}}}),k.prototype.clone=function(e){return e},k.prototype.func=void 0;const $={};function F(e){return[e[0],e[1],e[2],e[3],e[5],e[6],e[7],e[8],e[10],e[11],e[12],e[13],e[15],e[16],e[17],e[18]]}function q(e){return[e[20],e[21],e[22],e[23]]}$[m["a"].FLOAT]=V,$[m["a"].FLOAT_VEC2]=j,$[m["a"].FLOAT_VEC3]=D,$[m["a"].FLOAT_VEC4]=R,$[m["a"].INT]=V,$[m["a"].INT_VEC2]=j,$[m["a"].INT_VEC3]=D,$[m["a"].INT_VEC4]=R,$[m["a"].BOOL]=V,$[m["a"].BOOL_VEC2]=j,$[m["a"].BOOL_VEC3]=D,$[m["a"].BOOL_VEC4]=R,$[m["a"].FLOAT_MAT2]=P,$[m["a"].FLOAT_MAT3]=N,$[m["a"].FLOAT_MAT4]=z,$[m["a"].SAMPLER_2D]=U,y.createUniformFunction=function(e,t,n,i){return $[e](t,n,i)},y.createUniformsForDracoQuantizedAttributes=function(e){const t={};for(let n in e)if(e.hasOwnProperty(n)){const i=e[n],r=i.quantization;if(!Object(c["a"])(r))continue;"_"===n.charAt(0)&&(n=n.substring(1));const o="gltf_u_dec_"+n.toLowerCase();if(r.octEncoded){const e=o+"_rangeConstant",n=(1<<r.quantizationBits)-1;t[e]=V(n).func;continue}const a=o+"_normConstant",s=r.range/(1<<r.quantizationBits);t[a]=V(s).func;const u=o+"_min";switch(i.componentsPerAttribute){case 1:t[u]=V(r.minValues).func;break;case 2:t[u]=j(r.minValues).func;break;case 3:t[u]=D(r.minValues).func;break;case 4:t[u]=R(r.minValues).func;break}}return t},y.createUniformsForQuantizedAttributes=function(e,t,n){const i=e.accessors,r={},o={},a=t.attributes;for(let s in a)if(a.hasOwnProperty(s)){const e=a[s],t=i[e],n=t.extensions;if("_"===s.charAt(0)&&(s=s.substring(1)),Object(c["a"])(n)){const e=n.WEB3D_quantized_attributes;if(Object(c["a"])(e)){const n=e.decodeMatrix,i="gltf_u_dec_"+s.toLowerCase();let a,c;switch(t.type){case O["a"].SCALAR:o[i]=P(n).func,r[i]=!0;break;case O["a"].VEC2:o[i]=N(n).func,r[i]=!0;break;case O["a"].VEC3:o[i]=z(n).func,r[i]=!0;break;case O["a"].VEC4:a=i+"_scale",c=i+"_translate",o[a]=z(F(n)).func,o[c]=R(q(n)).func,r[a]=!0,r[c]=!0;break}}}}for(const s in n)if(n.hasOwnProperty(s)&&!r[s]){const e=n[s];Object(c["a"])(e.mat)&&(2===e.mat?o[s]=P(u["a"].IDENTITY).func:3===e.mat?o[s]=N(f["a"].IDENTITY).func:4===e.mat&&(o[s]=z(d["a"].IDENTITY).func)),Object(c["a"])(e.vec)&&4===e.vec&&(o[s]=R([0,0,0,0]).func)}return o};const W=new o["a"],H={MODEL:function(e,t){return function(){return e.model}},VIEW:function(e,t){return function(){return e.view}},PROJECTION:function(e,t){return function(){return e.projection}},MODELVIEW:function(e,t){return function(){return e.modelView}},CESIUM_RTC_MODELVIEW:function(e,t){const n=new d["a"];return function(){return Object(c["a"])(t._rtcCenter)?(d["a"].getTranslation(e.model,W),o["a"].add(W,t._rtcCenter,W),d["a"].multiplyByPoint(e.view,W,W),d["a"].setTranslation(e.modelView,W,n)):e.modelView}},MODELVIEWPROJECTION:function(e,t){return function(){return e.modelViewProjection}},MODELINVERSE:function(e,t){return function(){return e.inverseModel}},VIEWINVERSE:function(e,t){return function(){return e.inverseView}},PROJECTIONINVERSE:function(e,t){return function(){return e.inverseProjection}},MODELVIEWINVERSE:function(e,t){return function(){return e.inverseModelView}},MODELVIEWPROJECTIONINVERSE:function(e,t){return function(){return e.inverseModelViewProjection}},MODELINVERSETRANSPOSE:function(e,t){return function(){return e.inverseTransposeModel}},MODELVIEWINVERSETRANSPOSE:function(e,t){return function(){return e.normal}},VIEWPORT:function(e,t){return function(){return e.viewportCartesian4}}};y.getGltfSemanticUniforms=function(){return H},t["a"]=y},"8c69":function(e,t,n){"use strict";var i=n("722e");function r(e,t,n,r,o){this._model=e,this._runtimeNode=n,this._name=t.name,this._id=r,this.useMatrix=!1,this._show=!0,this._matrix=i["a"].clone(o),this._originalMatrix=i["a"].clone(o)}Object.defineProperties(r.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},show:{get:function(){return this._show},set:function(e){this._show!==e&&(this._show=e,this._model._perNodeShowDirty=!0)}},matrix:{get:function(){return this._matrix},set:function(e){this._matrix=i["a"].clone(e,this._matrix),this.useMatrix=!0;const t=this._model;t._cesiumAnimationsDirty=!0,this._runtimeNode.dirtyNumber=t._maxDirtyNumber}},originalMatrix:{get:function(){return this._originalMatrix}}}),r.prototype.setMatrix=function(e){i["a"].clone(e,this._matrix)},t["a"]=r},"8de2":function(e,t,n){"use strict";var i=n("722e");function r(e,t,n){this.primitive=e,this._modelMatrix=i["a"].clone(t),this._instanceId=n}Object.defineProperties(r.prototype,{instanceId:{get:function(){return this._instanceId}},model:{get:function(){return this.primitive._model}},modelMatrix:{get:function(){return i["a"].clone(this._modelMatrix)},set:function(e){i["a"].clone(e,this._modelMatrix),this.primitive.expandBoundingSphere(this._modelMatrix),this.primitive._dirty=!0}}}),t["a"]=r},"9d83":function(e,t,n){"use strict";function i(e,t,n){const i=[],r=e.primitives,o=r.length;for(let a=0;a<o;++a){const e=r[a];i[a]=t[e.material]}this._name=e.name,this._materials=i,this._id=n}Object.defineProperties(i.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},materials:{get:function(){return this._materials}}}),t["a"]=i},e81a:function(e,t,n){"use strict";var i=n("c937"),r=n("0238"),o=n("2341"),a=n("4d68"),s=n("1a75"),c=n("50de"),u=n("518b"),f=n("2189"),d=n("a47e");const l=65534;function h(){}function m(e,t,n,r,o){const a=o.vertexCopies,s=o.extraVertices,c=o.outlineCoordinates,u=e.gltf,f=u.meshes[t],d=f.primitives[n],h=u.accessors,m=u.bufferViews;let _;for(const l in d.attributes)if(d.attributes.hasOwnProperty(l)){const e=d.attributes[l],t=h[e];if(Object(i["a"])(t)){_=t.count;break}}if(!Object(i["a"])(_))return;const g=h[d.indices],O=m[g.bufferView],w=h[r],y=m[w.bufferView],x=e._loadResources,E=x.getBuffer(O),T=x.getBuffer(y);let L=5123===g.componentType?new Uint16Array(E.buffer,E.byteOffset+g.byteOffset,g.count):new Uint32Array(E.buffer,E.byteOffset+g.byteOffset,g.count);const v=5123===w.componentType?new Uint16Array(T.buffer,T.byteOffset+w.byteOffset,w.count):new Uint32Array(T.buffer,T.byteOffset+w.byteOffset,w.count),A=_,C=[A];let M;for(M=0;M<v.length;M+=2){const e=v[M],t=v[M+1],n=Math.min(e,t),i=Math.max(e,t);C[n*A+i]=1}for(M=0;M<L.length;M+=3){let t=L[M],n=L[M+1],r=L[M+2];const o=!1,f=o||p(C,t,n),d=o||p(C,n,r),h=o||p(C,r,t);let m=b(c,t,n,r,f,d,h);while(m>=0){let o;if(o=m===t?a[t]:m===n?a[n]:a[r],void 0===o){o=_+s.length;let e=m;while(e>=_)e=s[e-_];s.push(e),a[m]=o}o>l&&L instanceof Uint16Array&&(L=new Uint32Array(L),g.componentType=5125,O.buffer=u.buffers.push({byteLength:L.byteLength,extras:{_pipeline:{source:L.buffer}}})-1,O.byteLength=L.byteLength,O.byteOffset=0,e._loadResources.buffers[O.buffer]=new Uint8Array(L.buffer,0,L.byteLength),x.indexBuffersToCreate._array.forEach((function(e){e.id===g.bufferView&&(e.componentType=g.componentType)}))),m===t?(t=o,L[M]=o):m===n?(n=o,L[M+1]=o):(r=o,L[M+2]=o),Object(i["a"])(g.max)&&(g.max[0]=Math.max(g.max[0],o)),m=b(c,t,n,r,f,d,h)}}}function _(e,t,n,i,r){const o=3*t,a=e[o],s=e[o+1],c=e[o+2];return void 0===a?63:((a===n&&s===i&&c===r)<<0)+((a===n&&s===r&&c===i)<<1)+((a===i&&s===n&&c===r)<<2)+((a===i&&s===r&&c===n)<<3)+((a===r&&s===n&&c===i)<<4)+((a===r&&s===i&&c===n)<<5)}function g(e){return(1&e)+(e>>1&1)+(e>>2&1)+(e>>3&1)+(e>>4&1)+(e>>5&1)}function b(e,t,n,i,r,o,a){const s=a?1:0,c=r?1:0,u=0,f=_(e,t,s,c,u);if(0===f)return t;const d=0,l=r?1:0,h=o?1:0,m=_(e,n,d,l,h);if(0===m)return n;const b=a?1:0,p=0,O=o?1:0,w=_(e,i,b,p,O);if(0===w)return i;const y=f&m&w;let x,E,T;if(1&y)x=0,E=1,T=2;else if(2&y)x=0,T=1,E=2;else if(4&y)E=0,x=1,T=2;else if(8&y)E=0,T=1,x=2;else if(16&y)T=0,x=1,E=2;else{if(!(32&y)){const e=g(f),r=g(m),o=g(w);return e<r&&e<o?t:r<o?n:i}T=0,E=1,x=2}const L=3*t;e[L+x]=s,e[L+E]=c,e[L+T]=u;const v=3*n;e[v+x]=d,e[v+E]=l,e[v+T]=h;const A=3*i;return e[A+x]=b,e[A+E]=p,e[A+T]=O,-1}function p(e,t,n){const i=e[0],r=Math.min(t,n)*i+Math.max(t,n);return 1===e[r]}function O(e){const t=new Uint8Array(e);return t[e-1]=192,8===e?t[e-1]=96:4===e?t[e-1]=48:2===e?t[e-1]=24:1===e&&(t[e-1]=12),t}function w(e,t){const n=e.gltf,i=e._loadResources;let r,o;for(r=0;r<t.length;++r){const a=t[r],s=a.extras._pipeline.vertexNumberingScope;a.extras._pipeline.vertexNumberingScope=void 0;const c=s.extraVertices,u=i.getBuffer(a),f=a.byteStride||4,d=c.length,l=new Uint8Array(u.byteLength+d*f);for(l.set(u),o=0;o<d;++o){const e=c[o]*f,t=u.length+o*f;for(let n=0;n<f;++n)l[t+n]=l[e+n]}a.byteOffset=0,a.byteLength=l.byteLength;const h=n.buffers.push({byteLength:l.byteLength,extras:{_pipeline:{source:l.buffer}}})-1;a.buffer=h,i.buffers[h]=l;const m=s.accessors;for(o=0;o<m.length;++o){const e=m[o];n.accessors[e].count+=d}if(!s.createdOutlines){const t=s.outlineCoordinates,n=new Float32Array(t),r=e.gltf.buffers.push({byteLength:n.byteLength,extras:{_pipeline:{source:n.buffer}}})-1;i.buffers[r]=new Uint8Array(n.buffer,0,n.byteLength);const a=e.gltf.bufferViews.push({buffer:r,byteLength:n.byteLength,byteOffset:0,byteStride:3*Float32Array.BYTES_PER_ELEMENT,target:34962})-1,c=e.gltf.accessors.push({bufferView:a,byteOffset:0,componentType:5126,count:n.length/3,type:"VEC3",min:[0,0,0],max:[1,1,1]})-1,u=s.primitives;for(o=0;o<u.length;++o)u[o].attributes._OUTLINE_COORDINATES=c;i.vertexBuffersToCreate.enqueue(a),s.createdOutlines=!0}}}function y(e){const t=e.gltf,n=e._loadResources;let i;for(i=0;i<t.buffers.length;++i){const e=t.buffers[i],r=t.bufferViews.filter(x.bind(void 0,i)),o=r.reduce((function(e,t){return e+t.byteLength}),0);if(o===e.byteLength)continue;const a=new Uint8Array(o);let s=0;for(let t=0;t<r.length;++t){const e=r[t],i=n.getBuffer(e);a.set(i,s),e.byteOffset=s,s+=i.byteLength}n.buffers[i]=a,e.extras._pipeline.source=a.buffer,e.byteLength=o}}function x(e,t){return t.buffer===e}function E(e,t){const n=t.attributes;if(void 0===n)return;const r=e.gltf;let o;for(const a in n){if(!n.hasOwnProperty(a))continue;const e=n[a],t=r.accessors[e],s=t.bufferView,c=r.bufferViews[s];if(Object(i["a"])(c.extras)||(c.extras={}),Object(i["a"])(c.extras._pipeline)||(c.extras._pipeline={}),Object(i["a"])(c.extras._pipeline.vertexNumberingScope)){if(void 0!==o&&c.extras._pipeline.vertexNumberingScope!==o)return}else c.extras._pipeline.vertexNumberingScope=o||{vertexCopies:[],extraVertices:[],outlineCoordinates:[],accessors:[],bufferViews:[],primitives:[],createdOutlines:!1};o=c.extras._pipeline.vertexNumberingScope,o.bufferViews.indexOf(c)<0&&o.bufferViews.push(c),o.accessors.indexOf(e)<0&&o.accessors.push(e)}return o.primitives.push(t),o}h.hasExtension=function(e){return Object(i["a"])(e.extensionsRequired.CESIUM_primitive_outline)||Object(i["a"])(e.extensionsUsed.CESIUM_primitive_outline)},h.outlinePrimitives=function(e){if(!h.hasExtension(e))return;const t=e.gltf,n=[];d["a"].mesh(t,(function(t,r){d["a"].meshPrimitive(t,(function(t,o){if(!Object(i["a"])(t.extensions))return;const a=t.extensions.CESIUM_primitive_outline;if(!Object(i["a"])(a))return;const s=E(e,t);void 0!==s&&(n.indexOf(s)<0&&n.push(s),m(e,r,o,a.indices,s))}))}));for(let i=0;i<n.length;++i)w(e,n[i].bufferViews);y(e)},h.createTexture=function(e,t){let n=t.cache.modelOutliningCache;if(Object(i["a"])(n)||(n=t.cache.modelOutliningCache={}),Object(i["a"])(n.outlineTexture))return n.outlineTexture;const d=Math.min(4096,o["a"].maximumTextureSize);let l=d;const h=O(l),m=[];while(l>1)l>>=1,m.push(O(l));const _=new s["a"]({context:t,source:{arrayBufferView:h,mipLevels:m},width:d,height:1,pixelFormat:r["a"].LUMINANCE,sampler:new a["a"]({wrapS:f["a"].CLAMP_TO_EDGE,wrapT:f["a"].CLAMP_TO_EDGE,minificationFilter:u["a"].LINEAR_MIPMAP_LINEAR,magnificationFilter:c["a"].LINEAR})});return n.outlineTexture=_,_},t["a"]=h},f00f:function(e,t,n){"use strict";var i=n("a5ef");function r(){this.initialized=!1,this.resourcesParsed=!1,this.vertexBuffersToCreate=new i["a"],this.indexBuffersToCreate=new i["a"],this.buffers={},this.pendingBufferLoads=0,this.programsToCreate=new i["a"],this.shaders={},this.pendingShaderLoads=0,this.texturesToCreate=new i["a"],this.pendingTextureLoads=0,this.texturesToCreateFromBufferView=new i["a"],this.pendingBufferViewToImage=0,this.createSamplers=!0,this.createSkins=!0,this.createRuntimeAnimations=!0,this.createVertexArrays=!0,this.createRenderStates=!0,this.createUniformMaps=!0,this.createRuntimeNodes=!0,this.createdBufferViews={},this.primitivesToDecode=new i["a"],this.activeDecodingTasks=0,this.pendingDecodingCache=!1,this.skinnedNodesIds=[]}function o(e,t,n){return e.subarray(t,t+n)}r.prototype.getBuffer=function(e){return o(this.buffers[e.buffer],e.byteOffset,e.byteLength)},r.prototype.finishedPendingBufferLoads=function(){return 0===this.pendingBufferLoads},r.prototype.finishedBuffersCreation=function(){return 0===this.pendingBufferLoads&&0===this.vertexBuffersToCreate.length&&0===this.indexBuffersToCreate.length},r.prototype.finishedProgramCreation=function(){return 0===this.pendingShaderLoads&&0===this.programsToCreate.length},r.prototype.finishedTextureCreation=function(){const e=0===this.pendingTextureLoads,t=0===this.texturesToCreate.length&&0===this.texturesToCreateFromBufferView.length;return e&&t},r.prototype.finishedEverythingButTextureCreation=function(){const e=0===this.pendingBufferLoads&&0===this.pendingShaderLoads,t=0===this.vertexBuffersToCreate.length&&0===this.indexBuffersToCreate.length&&0===this.programsToCreate.length&&0===this.pendingBufferViewToImage;return this.finishedDecoding()&&e&&t},r.prototype.finishedDecoding=function(){return 0===this.primitivesToDecode.length&&0===this.activeDecodingTasks&&!this.pendingDecodingCache},r.prototype.finished=function(){return this.finishedDecoding()&&this.finishedTextureCreation()&&this.finishedEverythingButTextureCreation()},t["a"]=r},fc8b:function(e,t,n){"use strict";var i=n("8656"),r=n("dde0"),o=n("44e9"),a=n("4051"),s=n("cbf0"),c=n("1a5d"),u=n("61ad"),f=n("c937"),d=n("21b7"),l=n("e2a6"),h=n("a1a1"),m=n("722e"),_=n("82ba"),g=n("9f38"),b=n("e2aa"),p=n("6f7c"),O=n("6f54"),w=n("6ba7"),y=n("d5cf"),x=n("51f2"),E=n("5027"),T=n("b3ce"),L=n("a47e"),v=n("1d6b"),A=n("8de2"),C=n("8289"),M=n("dc6c"),S=n("ff3a"),I=n("66a6");const B={NEEDS_LOAD:0,LOADING:1,LOADED:2,FAILED:3};function V(e){if(e=Object(c["a"])(e,c["a"].EMPTY_OBJECT),!Object(f["a"])(e.gltf)&&!Object(f["a"])(e.url))throw new l["a"]("Either options.gltf or options.url is required.");if(Object(f["a"])(e.gltf)&&Object(f["a"])(e.url))throw new l["a"]("Cannot pass in both options.gltf and options.url.");this.show=Object(c["a"])(e.show,!0),this._instancingSupported=!1,this._dynamic=Object(c["a"])(e.dynamic,!1),this._allowPicking=Object(c["a"])(e.allowPicking,!0),this._ready=!1,this._readyPromise=Object(u["a"])(),this._state=B.NEEDS_LOAD,this._dirty=!1,this._cull=Object(c["a"])(e.cull,!0),this._opaquePass=Object(c["a"])(e.opaquePass,x["a"].OPAQUE),this._instances=j(this,e.instances),this._batchTable=e.batchTable,this._model=void 0,this._vertexBufferTypedArray=void 0,this._vertexBuffer=void 0,this._batchIdBuffer=void 0,this._instancedUniformsByProgram=void 0,this._drawCommands=[],this._modelCommands=void 0,this._renderStates=void 0,this._disableCullingRenderStates=void 0,this._boundingSphere=D(this),this._center=r["a"].clone(this._boundingSphere.center),this._rtcTransform=new m["a"],this._rtcModelView=new m["a"],this._mode=void 0,this.modelMatrix=m["a"].clone(m["a"].IDENTITY),this._modelMatrix=m["a"].clone(this.modelMatrix),this._url=g["a"].createIfNeeded(e.url),this._requestType=e.requestType,this._gltf=e.gltf,this._basePath=g["a"].createIfNeeded(e.basePath),this._asynchronous=e.asynchronous,this._incrementallyLoadTextures=e.incrementallyLoadTextures,this._upAxis=e.upAxis,this._forwardAxis=e.forwardAxis,this.shadows=Object(c["a"])(e.shadows,S["a"].ENABLED),this._shadows=this.shadows,this._pickIdLoaded=e.pickIdLoaded,this.splitDirection=Object(c["a"])(e.splitDirection,I["a"].NONE),this.debugShowBoundingVolume=Object(c["a"])(e.debugShowBoundingVolume,!1),this._debugShowBoundingVolume=!1,this.debugWireframe=Object(c["a"])(e.debugWireframe,!1),this._debugWireframe=!1,Object(f["a"])(e.imageBasedLighting)?(this._imageBasedLighting=e.imageBasedLighting,this._shouldDestroyImageBasedLighting=!1):(this._imageBasedLighting=new h["a"]({imageBasedLightingFactor:e.imageBasedLightingFactor,luminanceAtZenith:e.luminanceAtZenith,sphericalHarmonicCoefficients:e.sphericalHarmonicCoefficients,specularEnvironmentMaps:e.specularEnvironmentMaps}),this._shouldDestroyImageBasedLighting=!0),this.backFaceCulling=Object(c["a"])(e.backFaceCulling,!0),this._backFaceCulling=this.backFaceCulling,this.showCreditsOnScreen=Object(c["a"])(e.showCreditsOnScreen,!1)}function j(e,t){t=Object(c["a"])(t,[]);const n=t.length,i=new Array(n);for(let r=0;r<n;++r){const n=t[r],o=n.modelMatrix,a=Object(c["a"])(n.batchId,r);i[r]=new A["a"](e,o,a)}return i}function D(e){const t=e.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=m["a"].getTranslation(e._instances[i]._modelMatrix,new r["a"]);return i["a"].fromPoints(n)}Object.defineProperties(V.prototype,{allowPicking:{get:function(){return this._allowPicking}},length:{get:function(){return this._instances.length}},activeAnimations:{get:function(){return this._model.activeAnimations}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1)}},imageBasedLightingFactor:{get:function(){return this._imageBasedLighting.imageBasedLightingFactor},set:function(e){this._imageBasedLighting.imageBasedLightingFactor=e}},luminanceAtZenith:{get:function(){return this._imageBasedLighting.luminanceAtZenith},set:function(e){this._imageBasedLighting.luminanceAtZenith=e}},sphericalHarmonicCoefficients:{get:function(){return this._imageBasedLighting.sphericalHarmonicCoefficients},set:function(e){this._imageBasedLighting.sphericalHarmonicCoefficients=e}},specularEnvironmentMaps:{get:function(){return this._imageBasedLighting.specularEnvironmentMaps},set:function(e){this._imageBasedLighting.specularEnvironmentMaps=e}}});const R=new r["a"],P=new m["a"];function N(e,t,n,i){return function(r,o){const a=r.semantic;if(Object(f["a"])(a)&&e.indexOf(a)>-1){if(!(t.indexOf(a)>-1))throw new b["a"](`Shader program cannot be optimized for instancing. Uniform "${o}" in program "${n}" uses unsupported semantic "${a}"`);i[o]=a}}}function z(e,t){if(Object(f["a"])(e._instancedUniformsByProgram))return e._instancedUniformsByProgram[t];const n={};e._instancedUniformsByProgram=n;const i=["MODEL","MODELVIEW","CESIUM_RTC_MODELVIEW","MODELVIEWPROJECTION","MODELINVERSE","MODELVIEWINVERSE","MODELVIEWPROJECTIONINVERSE","MODELINVERSETRANSPOSE","MODELVIEWINVERSETRANSPOSE"],r=["MODELVIEW","CESIUM_RTC_MODELVIEW","MODELVIEWPROJECTION","MODELVIEWINVERSETRANSPOSE"],o=e._model._sourceTechniques;for(const a in o)if(o.hasOwnProperty(a)){const e=o[a],s=e.program;if(!Object(f["a"])(n[s])){const o={};n[s]=o,L["a"].techniqueUniform(e,N(i,r,t,o))}}return n[t]}function k(e){return function(t,n){const i=z(e,n),r=Object(f["a"])(e._batchTable);let o=T["a"].replaceMain(t,"czm_instancing_main"),a="",s="";for(const e in i)if(i.hasOwnProperty(e)){const t=i[e];let n;"MODELVIEW"===t||"CESIUM_RTC_MODELVIEW"===t?n="czm_instanced_modelView":"MODELVIEWPROJECTION"===t?(n="czm_instanced_modelViewProjection",a+="mat4 czm_instanced_modelViewProjection;\n",s+="czm_instanced_modelViewProjection = czm_projection * czm_instanced_modelView;\n"):"MODELVIEWINVERSETRANSPOSE"===t&&(n="czm_instanced_modelViewInverseTranspose",a+="mat3 czm_instanced_modelViewInverseTranspose;\n",s+="czm_instanced_modelViewInverseTranspose = mat3(czm_instanced_modelView);\n");let r=new RegExp(`uniform.*${e}.*`);o=o.replace(r,""),r=new RegExp(e+"\\b","g"),o=o.replace(r,n)}const c="uniform mat4 czm_instanced_modifiedModelView;\nuniform mat4 czm_instanced_nodeTransform;\n";let u,d,l;r?(u="attribute float a_batchId;\n",d="",l=""):(u="",d="attribute vec4 pickColor;\nvarying vec4 v_pickColor;\n",l="    v_pickColor = pickColor;\n");let h=c+a+"mat4 czm_instanced_modelView;\nattribute vec4 czm_modelMatrixRow0;\nattribute vec4 czm_modelMatrixRow1;\n"+`attribute vec4 czm_modelMatrixRow2;\n${u}${d}${o}void main()\n{\n    mat4 czm_instanced_model = mat4(czm_modelMatrixRow0.x, czm_modelMatrixRow1.x, czm_modelMatrixRow2.x, 0.0, czm_modelMatrixRow0.y, czm_modelMatrixRow1.y, czm_modelMatrixRow2.y, 0.0, czm_modelMatrixRow0.z, czm_modelMatrixRow1.z, czm_modelMatrixRow2.z, 0.0, czm_modelMatrixRow0.w, czm_modelMatrixRow1.w, czm_modelMatrixRow2.w, 1.0);\n`+`    czm_instanced_modelView = czm_instanced_modifiedModelView * czm_instanced_model * czm_instanced_nodeTransform;\n${s}    czm_instancing_main();\n${l}}\n`;if(r){const t=e._model.gltf,i=C["a"].getDiffuseAttributeOrUniform(t,n);h=e._batchTable.getVertexShaderCallback(!0,"a_batchId",i)(h)}return h}}function U(e){return function(t,n){const i=e._batchTable;if(Object(f["a"])(i)){const r=e._model.gltf,o=C["a"].getDiffuseAttributeOrUniform(r,n);t=i.getFragmentShaderCallback(!0,o,!1)(t)}else t="varying vec4 v_pickColor;\n"+t;return t}}function $(e,t){return function(){return m["a"].multiply(t.uniformState.view,e._rtcTransform,e._rtcModelView)}}function F(e){return function(){return e.computedMatrix}}function q(e,t){return function(n,i,r){n=Object(o["a"])(n),n.czm_instanced_modifiedModelView=$(e,t),n.czm_instanced_nodeTransform=F(r);const a=z(e,i);for(const e in a)a.hasOwnProperty(e)&&delete n[e];return Object(f["a"])(e._batchTable)&&(n=e._batchTable.getUniformMapCallback()(n)),n}}function W(e){return function(t,n){if(Object(f["a"])(e._batchTable)){const i=e._model.gltf,r=C["a"].getDiffuseAttributeOrUniform(i,n);t=e._batchTable.getVertexShaderCallback(!0,"a_batchId",r)(t),t="uniform float a_batchId\n;"+t}return t}}function H(e){return function(t,n){const i=e._batchTable;if(Object(f["a"])(i)){const r=e._model.gltf,o=C["a"].getDiffuseAttributeOrUniform(r,n);t=i.getFragmentShaderCallback(!0,o,!1)(t)}else t="uniform vec4 czm_pickColor;\n"+t;return t}}function G(e){return function(t){return Object(f["a"])(e._batchTable)&&(t=e._batchTable.getUniformMapCallback()(t)),t}}function K(e){const t=e._instances,n=e.length,i=e._center,r=12;let o=e._vertexBufferTypedArray;Object(f["a"])(o)||(o=new Float32Array(n*r)),e._dynamic&&(e._vertexBufferTypedArray=o);for(let a=0;a<n;++a){const e=t[a]._modelMatrix,n=m["a"].clone(e,P);n[12]-=i.x,n[13]-=i.y,n[14]-=i.z;const s=a*r;o[s+0]=n[0],o[s+1]=n[4],o[s+2]=n[8],o[s+3]=n[12],o[s+4]=n[1],o[s+5]=n[5],o[s+6]=n[9],o[s+7]=n[13],o[s+8]=n[2],o[s+9]=n[6],o[s+10]=n[10],o[s+11]=n[14]}return o}function X(e,t){let n;const i=e._instances,r=e.length,o=e._dynamic,s=Object(f["a"])(e._batchTable);if(s){const o=new Uint16Array(r);for(n=0;n<r;++n)o[n]=i[n]._instanceId;e._batchIdBuffer=O["a"].createVertexBuffer({context:t,typedArray:o,usage:w["a"].STATIC_DRAW})}if(!s){const i=new Uint8Array(4*r);for(n=0;n<r;++n){const t=e._pickIds[n],r=t.color,o=4*n;i[o]=a["a"].floatToByte(r.red),i[o+1]=a["a"].floatToByte(r.green),i[o+2]=a["a"].floatToByte(r.blue),i[o+3]=a["a"].floatToByte(r.alpha)}e._pickIdBuffer=O["a"].createVertexBuffer({context:t,typedArray:i,usage:w["a"].STATIC_DRAW})}const c=K(e);e._vertexBuffer=O["a"].createVertexBuffer({context:t,typedArray:c,usage:o?w["a"].STREAM_DRAW:w["a"].STATIC_DRAW})}function J(e){const t=K(e);e._vertexBuffer.copyFromArrayView(t)}function Y(e,t){const n=e._instances,i=n.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=t.createPickId(n[o]);return r}function Z(e,t){const n=e._instancingSupported,i=Object(f["a"])(e._batchTable),r=e._allowPicking,o={url:e._url,requestType:e._requestType,gltf:e._gltf,basePath:e._basePath,shadows:e._shadows,cacheKey:void 0,asynchronous:e._asynchronous,allowPicking:r,incrementallyLoadTextures:e._incrementallyLoadTextures,upAxis:e._upAxis,forwardAxis:e._forwardAxis,precreatedAttributes:void 0,vertexShaderLoaded:void 0,fragmentShaderLoaded:void 0,uniformMapLoaded:void 0,pickIdLoaded:e._pickIdLoaded,ignoreCommands:!0,opaquePass:e._opaquePass,imageBasedLighting:e._imageBasedLighting,showOutline:e.showOutline,showCreditsOnScreen:e.showCreditsOnScreen};if(i||(e._pickIds=Y(e,t)),n){X(e,t);const n=12,r=s["a"].getSizeInBytes(s["a"].FLOAT),a={czm_modelMatrixRow0:{index:0,vertexBuffer:e._vertexBuffer,componentsPerAttribute:4,componentDatatype:s["a"].FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:r*n,instanceDivisor:1},czm_modelMatrixRow1:{index:0,vertexBuffer:e._vertexBuffer,componentsPerAttribute:4,componentDatatype:s["a"].FLOAT,normalize:!1,offsetInBytes:4*r,strideInBytes:r*n,instanceDivisor:1},czm_modelMatrixRow2:{index:0,vertexBuffer:e._vertexBuffer,componentsPerAttribute:4,componentDatatype:s["a"].FLOAT,normalize:!1,offsetInBytes:8*r,strideInBytes:r*n,instanceDivisor:1}};i&&(a.a_batchId={index:0,vertexBuffer:e._batchIdBuffer,componentsPerAttribute:1,componentDatatype:s["a"].UNSIGNED_SHORT,normalize:!1,offsetInBytes:0,strideInBytes:0,instanceDivisor:1}),i||(a.pickColor={index:0,vertexBuffer:e._pickIdBuffer,componentsPerAttribute:4,componentDatatype:s["a"].UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0,instanceDivisor:1}),o.precreatedAttributes=a,o.vertexShaderLoaded=k(e),o.fragmentShaderLoaded=U(e),o.uniformMapLoaded=q(e,t),Object(f["a"])(e._url)&&(o.cacheKey=e._url.getUrlComponent()+"#instanced")}else o.vertexShaderLoaded=W(e),o.fragmentShaderLoaded=H(e),o.uniformMapLoaded=G(e,t);Object(f["a"])(e._url)?e._model=v["a"].fromGltf(o):e._model=new v["a"](o)}function Q(e,t){if(e._debugWireframe!==e.debugWireframe||t){e._debugWireframe=e.debugWireframe;const t=e.debugWireframe?_["a"].LINES:_["a"].TRIANGLES,n=e._drawCommands,i=n.length;for(let e=0;e<i;++e)n[e].primitiveType=t}}function ee(e){const t=Object(o["a"])(e,!0);return t.cull.enabled=!1,E["a"].fromCache(t)}function te(e,t){if(e._backFaceCulling!==e.backFaceCulling||t){e._backFaceCulling=e.backFaceCulling;const t=e._drawCommands,n=t.length;let i;if(!Object(f["a"])(e._disableCullingRenderStates))for(e._disableCullingRenderStates=new Array(n),e._renderStates=new Array(n),i=0;i<n;++i){const n=t[i].renderState,r=ee(n);e._disableCullingRenderStates[i]=r,e._renderStates[i]=n}for(i=0;i<n;++i)t[i].renderState=e._backFaceCulling?e._renderStates[i]:e._disableCullingRenderStates[i]}}function ne(e,t){if(e.debugShowBoundingVolume!==e._debugShowBoundingVolume||t){e._debugShowBoundingVolume=e.debugShowBoundingVolume;const t=e._drawCommands,n=t.length;for(let i=0;i<n;++i)t[i].debugShowBoundingVolume=e.debugShowBoundingVolume}}function ie(e,t){const n=t.length,i=e.length,r=e._boundingSphere,o=e._cull;for(let a=0;a<n;++a){const n=y["a"].shallowClone(t[a]);n.instanceCount=i,n.boundingVolume=r,n.cull=o,Object(f["a"])(e._batchTable)?n.pickId=e._batchTable.getPickId():n.pickId="v_pickColor",e._drawCommands.push(n)}}function re(e){return function(){return e}}function oe(e){return function(){return e}}function ae(e,t){const n=e._instances,r=t.length,a=e.length,s=e._batchTable,c=Object(f["a"])(s),u=e._cull;for(let f=0;f<r;++f)for(let r=0;r<a;++r){const a=y["a"].shallowClone(t[f]);if(a.modelMatrix=new m["a"],a.boundingVolume=new i["a"],a.cull=u,a.uniformMap=Object(o["a"])(a.uniformMap),c)a.uniformMap.a_batchId=re(n[r]._instanceId);else{const t=e._pickIds[r];a.uniformMap.czm_pickColor=oe(t.color)}e._drawCommands.push(a)}}function se(e){const t=e._modelCommands,n=t.length,r=e.length,o=e._rtcTransform,a=e._center;for(let s=0;s<n;++s){const n=t[s];for(let t=0;t<r;++t){const c=s*r+t,u=e._drawCommands[c];let f=m["a"].clone(e._instances[t]._modelMatrix,P);f[12]-=a.x,f[13]-=a.y,f[14]-=a.z,f=m["a"].multiply(o,f,P);const d=n.modelMatrix,l=u.modelMatrix;m["a"].multiply(f,d,l);const h=n.boundingVolume,_=u.boundingVolume;i["a"].transform(h,f,_)}}}function ce(e){const t=e._nodeCommands,n=t.length,i=[];for(let r=0;r<n;++r){const e=t[r];e.show&&i.push(e.command)}return i}function ue(e){const t=e._nodeCommands,n=t.length;let i=!1;for(let r=0;r<n;r++){const e=t[r];e.command.dirty&&(e.command.dirty=!1,i=!0)}return i}function fe(e,t){e._drawCommands=[];const n=ce(e._model);t?ie(e,n):(ae(e,n),se(e))}function de(e,t){if(e.shadows!==e._shadows||t){e._shadows=e.shadows;const t=S["a"].castShadows(e.shadows),n=S["a"].receiveShadows(e.shadows),i=e._drawCommands,r=i.length;for(let e=0;e<r;++e){const r=i[e];r.castShadows=t,r.receiveShadows=n}}}V.prototype.expandBoundingSphere=function(e){const t=m["a"].getTranslation(e,R);i["a"].expand(this._boundingSphere,t,this._boundingSphere)},V.prototype.update=function(e){if(e.mode===M["a"].MORPHING)return;if(!this.show)return;if(0===this.length)return;const t=e.context;if(this._state===B.NEEDS_LOAD){this._state=B.LOADING,this._instancingSupported=t.instancedArrays,Z(this,t);const e=this;this._model.readyPromise.catch((function(t){e._state=B.FAILED,e._readyPromise.reject(t)}))}const n=this._instancingSupported,i=this._model;if(i.imageBasedLighting=this._imageBasedLighting,i.showCreditsOnScreen=this.showCreditsOnScreen,i.splitDirection=this.splitDirection,i.update(e),i.ready&&this._state===B.LOADING){this._state=B.LOADED,this._ready=!0;const e=i.boundingSphere.radius+r["a"].magnitude(i.boundingSphere.center);return this._boundingSphere.radius+=e,this._modelCommands=ce(i),fe(this,n),void this._readyPromise.resolve(this)}if(this._state!==B.LOADED)return;const o=e.mode!==this._mode,a=this.modelMatrix,s=!m["a"].equals(this._modelMatrix,a);if(o||s){this._mode=e.mode,m["a"].clone(a,this._modelMatrix);let t=m["a"].multiplyByTranslation(this._modelMatrix,this._center,this._rtcTransform);this._mode!==M["a"].SCENE3D&&(t=p["a"].basisTo2D(e.mapProjection,t,t)),m["a"].getTranslation(t,this._boundingSphere.center)}n&&this._dirty&&(this._dynamic=!0,this._dirty=!1,J(this));const c=ue(i);c&&fe(this,n),!n&&(i.dirty||this._dirty||o||s)&&se(this),de(this,c),Q(this,c),te(this,c),ne(this,c);const u=e.passes;if(!u.render&&!u.pick)return;const f=e.commandList,d=this._drawCommands,l=d.length;for(let r=0;r<l;++r)f.push(d[r])},V.prototype.isDestroyed=function(){return!1},V.prototype.destroy=function(){this._model=this._model&&this._model.destroy();const e=this._pickIds;if(Object(f["a"])(e)){const t=e.length;for(let n=0;n<t;++n)e[n].destroy()}return this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,Object(d["a"])(this)},t["a"]=V}}]);